<p>This does almost what you want:</p>

<pre><code>&gt;&gt;&gt; re.compile(r"\[([^\]]*)\]").sub("&lt;ol&gt;\\1&lt;/ol&gt;", "b[#a]c")
'b&lt;ol&gt;#a&lt;/ol&gt;c'
</code></pre>

<p>The <code>[^\]]</code> take every character except ] after the <code>\[</code> clsing bracket.</p>

<p>With an the <code>#</code> it would look like this:</p>

<pre><code>&gt;&gt;&gt; re.compile(r"\[([^\]]*#[^\]]*)\]").sub("&lt;ol&gt;\\1&lt;/ol&gt;", "b[#a]c")
'b&lt;ol&gt;#a&lt;/ol&gt;c'
&gt;&gt;&gt; re.compile(r"\[([^\]]*#[^\]]*)\]").sub("&lt;ol&gt;\\1&lt;/ol&gt;", "b[gggg]c")
'b[gggg]c'
</code></pre>

<p>The <code>.</code> is always a bit of a problem if you want to find something between something.</p>
