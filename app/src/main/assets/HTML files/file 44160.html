<p>That function is not valid. Your version of the book contains an error.  The correct version tests <code>*p</code> in the <code>while</code> condition.</p>

<pre><code>int count_x(char* p, char x)
    // count the number of occurrences of x in p[]
    // p is assumed to point to a zero-terminated array of char (or to nothing)
{
    int count = 0;
    while (*p) {
//         ^----------------- You omitted this asterisk.
        if (*p==x)
            ++count;
        ++p;
    }
    return count;
}
</code></pre>

<p>Update: the code apparently changed a little bit between printings, and <a href="http://www.stroustrup.com/Tour_printing2.html" rel="nofollow">the errata for the first printing</a> mentions an error related to this function. Hat tip to @BenVoigt.</p>
