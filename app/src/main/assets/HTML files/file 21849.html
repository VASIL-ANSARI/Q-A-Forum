<p>A simple solution, just counting the number of images and not taking into account the size of the images would be something like (just a simple example...):</p>

<pre><code>function loadPage(html) {
  // html contains the html to add to #main-wrapper

  // put the html in an element to count the images in it
  var el = $("&lt;div&gt;").html(html);
  var imgCount = el.find("img").length;
  var count = 0;
  var percentage = 0;

  $("img", el).load(function() {
    count++;
    if (imgCount === count) {
      $("#main-wrapper").html(html);
    } else {
      percentage = (count / imgCount) * 100;
      $("#main-wrapper").html("loading ("+ percentage + "%) ...");
    }
  });
}
</code></pre>

<p>It will be difficult to get the image sizes before they are loaded; I have not tried that recently but before it was easy to get the sizes in firefox, but impossible to get them in for example webkit.</p>
