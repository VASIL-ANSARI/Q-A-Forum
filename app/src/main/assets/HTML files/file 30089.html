<p>You are not doing anything wrong, however you could change your code to take full use of the cpu cores by:</p>

<p>1 - setting the core affinity so that the thread does not change from one core to another, this could improve the cache usage (L1 and maybe L2)</p>

<p>2 - setting the scheduling of threads to FIFO so it does not get context-switched before finishing its processing</p>

<p>3 - run that thread on a higher priority process (this would require root privilege for the process)</p>

<p>Cheers</p>
