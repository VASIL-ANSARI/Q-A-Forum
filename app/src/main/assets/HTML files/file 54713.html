<p>Here is a MIP model that could be used to solve your problem:</p>

<p><a href="http://i.stack.imgur.com/fw8HH.gif" rel="nofollow"><img src="http://i.stack.imgur.com/fw8HH.gif" alt="enter image description here"></a></p>

<p>LpSolve is designed to solve models like this. Note that this is not really very close to a knapsack problem.</p>
