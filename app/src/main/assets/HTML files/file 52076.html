<p>using your posted code as a guide, I produced the following:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;


int main(int argc, char *argv[])
{

    if(argc != 3)
    {
        fprintf( stderr, "USAGE: %s outFilename inFileName\n", argv[0] );
        exit( EXIT_FAILURE );
    }


    FILE *fp_out = fopen( argv[1], "a");

    FILE* fp_in  = fopen( argv[2], "rb");

    fprintf(fp_out, "char byn[] = {\n" );

    unsigned long n = 0;
    unsigned char c;
    while(fread(&amp;c, 1, 1, fp_in) == 1)
    {
        fprintf( fp_out,"0x%.2X,", (int)c);
        ++n;

        if(n % 10 == 0)
        fprintf( fp_out,"\n");
    }

    fprintf( fp_out, "};\n\n");
    fclose(fp_in);
    fclose(fp_out);

} // end function: main
</code></pre>

<p>which I ran on a few executable files</p>

<p>Note: I'm running Ubuntu Linux 14.04 </p>

<p>It seems to work correctly.</p>

<p>As with your example, I skipped the error checking (which you should really include in your actual code.)</p>
