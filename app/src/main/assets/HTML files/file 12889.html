<p>You didn't really go into detail about why you want to associate key/value pairs with the session concept.</p>

<p>Coming from NServiceBus and Udi Dahan's advice on SOA and service boundaries, this type of session concept tends to rub me the wrong way. My feeling is that message handlers should be, for the most part, fairly deterministic with respect to time.  That is, it should run just as well right now, or sit in a queue for awhile and execute the exact same way at some point in the future.</p>

<p>So, my advice would be that for security purposes, go ahead and use message headers if necessary.  In NServiceBus you can introduce message handlers from an IT/Ops Service that are configured to execute first in the handler chain, verifying security and stuff like that independent of the actual business logic.  In this case, the header information just affects whether the message gets processed or rejected.</p>

<p>When you get to session type information, I would want to carefully analyze those requirements and put the relevant pieces in the message schema itself.</p>

<p>Again, it would be helpful to know the motivation behind the session data in the first place. If you edit your question, perhaps we could identify a way you could reorganize those requirements.</p>
