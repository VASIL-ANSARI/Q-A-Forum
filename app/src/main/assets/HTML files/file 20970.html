<p>Rack does not care about controllers, it cares about apps.  So <code>HomeController</code> and <code>UsersController</code> are 2 Sinatra applications "racked up" in Rack.  These are not controllers, they are separate Rack apps. I do not think you want 2 applications but rather to put these 2 controllers in 2 files so you can spec them out separately and keep the code readable. </p>

<p>The naming convention for Sinatra is to name it something like <code>MyApp</code> to reflect this.  Sinatra is a flat framework, but you can name your "controller" files what you want.</p>

<p>So in folder <code>routes</code> you can have 'users.rb' and 'home.rb' but both files have at the top </p>

<pre><code>MyApp &lt; Sinatra::Application
</code></pre>

<p>Then you can test using <code>Rack::Test</code> with Rspec.</p>

<p>If you do indeed want to test 2 apps and want the prefix using <code>Rack::Test</code> w Rspec you simply need to define <code>app</code> in your spec_helper or spec file as:</p>

<pre><code> def app
  run Rack::URLMap.new(
   '/' =&gt; HomeController.new,
   '/users' =&gt; UsersController.new(TwilioWrapper.new)
  )
 end
</code></pre>

<p>All <code>Rack::Test</code> does is rackup your Sinatra app into a test container.</p>

<p>Also please see Phrogz's excellent answer on <a href="http://stackoverflow.com/questions/5015471/using-sinatra-for-larger-projects-via-multiple-files">how to lay out a Sinatra application</a> </p>
