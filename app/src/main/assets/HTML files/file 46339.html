<p><a href="http://codepen.io/simoncowie/pen/BNPMjW?editors=101" rel="nofollow">Here's an example I made on codepen.</a></p>

<p>Check out the code below and/or fork the codepen and have a play. </p>

<p>Essentially, what is happening here is that I add a <code>g</code> element for each item in your data array. Normally we might be-able to create a circle for each data element, but since that is contained within a property and variable, I've used an <code>each</code> loop  (d3 each). This creates a loop of the number of items, and creates a circle for each. If the element is selected, the fill color changes. </p>

<p>things to note: </p>

<ul>
<li>The <code>g</code> element has a transform of 30 * <code>i</code> on the y axis. This means that each group will stack down the page. </li>
<li>In the <code>for</code> loop we get access to the <code>g</code> element using <code>this</code>, but we must use the d3 <code>select</code> function to reference it as a d3 object so we can append.</li>
</ul>

<p>The code:</p>

<pre><code>//add an svg canvas to the page
var svg = d3.select("body")
.append("svg")
.attr("transform", "translate(" + 20 + "," + 20 + ")"); //this will give it a bottom and left margin

//set up some basic data
var data = [
    {
        "items": 10,
        "selected": 8
    },
    {
        "items": 12,
        "selected": 4
    }];

var groups = svg.selectAll("g")
        .data(data)
        .enter()
    .append("g").attr("transform", function(d, i) {
      return "translate(0," + i * 30 + ")";
    });

groups.each(function(d,i) {
    for (var x = 1; x &lt;= d.items; x++) {
      d3.select(this).append('circle').attr({cx: function(d,i) { return (x + 1) * 22; } ,
             cy: 10 ,
             r: 10 ,
             fill: function(d,i) { return x == d.selected ? "yellow" : "blue" }
       }); 
    }
});
</code></pre>
