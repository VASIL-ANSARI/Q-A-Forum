<p>Just use the right <code>row_number()</code> logic:</p>

<pre><code>select c.*
from (select c.*,
             row_number() over (partition by username
                                order by (case when address is not null then 1 else 2 end), UpdatedDate desc
                               ) as seqnum
      from clients c
     ) c
where seqnum = 1;
</code></pre>

<p>Of course, if you don't mind filtering out <code>username</code>s that have no address, you could use:</p>

<pre><code>select c.*
from (select c.*,
             row_number() over (partition by username
                                order by UpdatedDate desc
                               ) as seqnum
      from clients c
      where address is not null
     ) c
where seqnum = 1;
</code></pre>

<p>But you might end up losing some records.</p>
