<p>the problem is solved, adding "r5" and "cc" to my clobber list made it work.
here is the working code:</p>

<pre><code>void foo(int *pIn, int *pOut) {
     //pIn contains the number of iterations the loop will have
     asm volatile(
         "ldr r3, %[in];"
         "ldr r4, %[out];"
         "ldr r5, [r3];"

         "loop:; "
         //here would go the code inside the loop perhaps put something in output, in this case just do nothing
         "subs r5, r5, #1;"
         "bne loop"

         :[out] "=m" (pOut)
         :[in] "m" (pIn)
         :"r3","r4","r5","cc","memory" 
     );
 }
</code></pre>
