<p>with <a href="http://mongodb.github.io/node-mongodb-native/api-bson-generated/objectid.html" rel="nofollow">ObjectId</a></p>

<p>When you already have an id as a string (it must be a String of 12 bytes (24 hex characters)) (from client-side or a json) then you need to use ObjectId constructor:</p>

<pre><code>var {ObjectId} = require('mongodb'); //like ObjectId=require('mongodb').ObjectId;

var _id = new ObjectId(doc._id); // convert document's _id from string to ObjectId
collection.update({_id}, doc, {upsert: true}, function(err, item){...}); // {_id} is {_id:_id}
// ... 
</code></pre>
