<p>Each element of <code>$items_from_amazon</code> array is an associative array with a <em>single</em> key, that is either <code>main-asin</code> or <code>sub-asin</code>. So the first element of <code>data</code> array will have <code>main-asin</code> property set, but not <code>sub-asin</code>; all the others will have only <code>sub-asin</code>, but no <code>main-asin</code>. </p>

<p>The one way to fix it is to update your code like that:</p>

<pre><code>toAppend += '&lt;tr&gt;&lt;td colspan="2"&gt;'+data[0]['main-asin'][0]+'&lt;/td&gt;&lt;/tr&gt;';
for(var i = 1; i&lt;data.length; i++){
  toAppend += '&lt;tr&gt;&lt;td&gt;'+data[i]['sub-asin'][0]+'&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;';
}
</code></pre>

<p>... but perhaps it's better to alter the structure of BOTH response AND processing code:</p>

<pre><code>PHP:

foreach($xml-&gt;Items-&gt;Item as $item){
  $new_item_from_amazon = array(
    'main-asin' =&gt; $item-&gt;ASIN,
    'sub-asin'  =&gt; array(),
  ); 
  foreach($xml-&gt;Items-&gt;Item-&gt;Variations-&gt;Item as $item) {
    $new_item_from_amazon['sub_asin'][] = $item-&gt;ASIN;
  }
  $items_from_amazon[] = $new_item_from_amazon;
}

JS:

toAppend += '&lt;tr&gt;&lt;td colspan="2"&gt;'+data['main-asin']+'&lt;/td&gt;&lt;/tr&gt;';
for (var i = 0, l = data['sub-asin'].length; i &lt; l; i++){
  toAppend += '&lt;tr&gt;&lt;td&gt;'+data['sub-asin'][i]+'&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;';
}
</code></pre>

<p>I've assigned an empty array as <code>sub-asin</code> value here to avoid additional checking <code>data['sub-asin']</code> in JS.</p>
