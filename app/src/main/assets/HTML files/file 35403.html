<p>With the information provided, this is going to be a custom job. For example if I was just given the 7 blocks that you mention I could end up with (2,3,2) like you did or (2,2,3) or (3,2,2) or (4,2,1), etc.</p>

<p>To put together a mathematically well formed solution you are going to have to constrain it more. e.g. no more than x rows, rows are added in the following order, new rows can / cannot be inserted between existing rows etc.</p>

<p>writing that kind of algorithm from scratch is doable, but you need to constrain the possibilities more to have it work as you described.</p>
