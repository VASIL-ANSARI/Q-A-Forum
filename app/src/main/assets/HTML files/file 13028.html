<p>Try this first, it being derived instantly from your post:</p>

<pre><code>INSERT INTO foo (`name`, `rank`)
SELECT 'CCCC', (MAX(`rank`) + 1) AS rank
FROM `foo`
</code></pre>

<p>Then using PDO, I think this'll work:</p>

<pre class="lang-php prettyprint-override"><code>...
$sql = "INSERT INTO foo (`name`, `rank`) SELECT ?, (MAX(`rank`) + 1) AS rank FROM `foo`"
$name = "CCCC";
$st = $pd-&gt;prepare($sql);
$st-&gt;bindValue(1, $name);

try {
    $retval = $st-&gt;execute();
} catch (PDOException $pdoex) {
...
</code></pre>

<p>Not sure if I got in syntactically correct but that should be about the gist of it ... I think</p>

<p>Err.. lemme know if the SQL works, at least :D</p>
