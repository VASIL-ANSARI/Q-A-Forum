<p>The only function in that code that is not part of Lua 5.2 is <code>luaL_register</code>. You should use <code>luaL_setfuncs</code> instead.</p>

<p>You should also set the global <code>MyClass</code> by hand or use <code>local MyClass=require"MyClass"</code> in your Lua code because <code>require</code> no longer sets globals.</p>

<p>If you are embedding Lua, you can just compile it and your code with <code>-DLUA_COMPAT_MODULE</code> and get the 5.1 functions. But consider that now is a good time to move your code to Lua 5.2, if you plan to use this version.</p>
