<p>Try following workaround not using (so far as I know) any deprecated classes. Add the action <strong>"com.google.android.c2dm.intent.REGISTRATION"</strong> to the <code>GCMBroadcastReceiver</code> in your <code>manifest</code>. This will enable to receive the <code>registration_id</code> at your <code>GCMBroadcastReceiver</code>.</p>

<pre><code>&lt;receiver
   android:name="YOUR_PACKAGE_NAME.GCMBroadcastReceiver"
   android:permission="com.google.android.c2dm.permission.SEND" &gt;
      &lt;intent-filter&gt;
         &lt;action android:name="com.google.android.c2dm.intent.RECEIVE" /&gt;
         &lt;action android:name="com.google.android.c2dm.intent.REGISTRATION" /&gt;

         &lt;category android:name="YOUR_PACKAGE_NAME" /&gt;
      &lt;/intent-filter&gt;
&lt;/receiver&gt;
</code></pre>

<p>After that your <code>GCMBroadcastReceiver</code> is able to receive the <code>registration_id</code>:</p>

<pre><code>public void onReceive(Context context, Intent intent) 
{
   String regId = intent.getExtras().getString("registration_id");

   if(regId != null &amp;&amp; !regId.equals("")) 
   {
       /* Do what ever you want with the regId eg. send it to your server */
   }
}
</code></pre>

<p>Although I still get a <code>SERVICE_NOT_AVAILABLE</code> error, I can handle the <code>registration_id</code> in my <code>GCMBroadcastReceiver</code> and I am able to send messages to my smartphone. Quite weird, but it works for me.</p>
