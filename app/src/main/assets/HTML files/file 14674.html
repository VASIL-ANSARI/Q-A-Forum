<p>You have corrupted your memory with another statement. It's hard to guess without seeing the actual code, but the best guess would be that you write out of bounds of something allocated before tmpstr or a stack-array directly afterwards. </p>

<p>either way, memory that should actually belong to the stream object is overwritten causing the stream object to break. The core dump happens after the actual broken line because it wasn't detected. You wrote over some bounds but ended up in your program's memory and not outside. In particular, in tmpstr's memory.</p>
