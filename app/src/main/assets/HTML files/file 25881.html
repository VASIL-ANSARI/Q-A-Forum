<p>I sure hope the real example is more complicated :)</p>

<p>I'd say go for nested or helper function. I'd personally go for the helper function but that's just my opinion. 
This is of course from what I can tell of your description. The actual code would provider better ground for a suggestion than just a random example. </p>
