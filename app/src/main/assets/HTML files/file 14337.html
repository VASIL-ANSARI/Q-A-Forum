<p>I think what you probably want here is <a href="http://en.cppreference.com/w/cpp/memory/enable_shared_from_this"><code>shared_from_this</code></a>.</p>

<pre><code>// headers
class A : std::enable_shared_from_this&lt; A &gt;
{
public:
   std::shared_ptr&lt;B&gt; createB();
}


class B 
{
private:
   std::shared_ptr&lt;A&gt; a;

public:
   B(std::shared_ptr&lt;A&gt;);
}


// source
std::shared_ptr&lt;B&gt; A::createB()
{
   return std::make_shared&lt;B&gt;( shared_from_this() );
}
</code></pre>

<hr>

<p>Update to include <a href="http://stackoverflow.com/questions/10534220/c11-passing-this-as-paramenter-for-stdmake-shared#comment13628496_10534285">comments from David Rodriguez</a>:</p>

<p>Note that <code>shared_from_this()</code> should <em>never</em> be called on an object that isn't already managed by a <code>shared_ptr</code>.  This is valid:</p>

<pre><code>shared_ptr&lt;A&gt; a( new A );
a-&gt;createB();
</code></pre>

<p>While the following leads to undefined behaviour (attempting to call <code>delete</code> on <code>a</code>):</p>

<pre><code>A a;
a.createB();
</code></pre>
