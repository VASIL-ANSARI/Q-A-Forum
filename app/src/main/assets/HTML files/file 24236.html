<p>The following function creates and returns an object, which contains the <code>main</code> method only:</p>

<pre><code>var MyModule = function(callback){
    var count = 0;

    var secret = function(){
        if(count === 2){
            callback();
        } 
    }

    var main = function(){
        count ++;
        window.specialApi.doWorkAndCallback(secret);
    }

    main();

    return {
        main: main
    };
};
</code></pre>

<p>Then, the only thing you have to do, is to call this function once and store its returned value on a variable:</p>

<pre><code>var module = MyModule(function(){console.log('ok');});
</code></pre>

<p>Finally, whenever you want to call <code>main</code> (and keep the old value of <code>count</code>), just do:</p>

<pre><code>module.main();
</code></pre>
