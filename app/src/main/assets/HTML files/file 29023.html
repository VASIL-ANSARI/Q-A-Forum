<p>This should do:</p>

<pre><code>SELECT  DISTINCT 
        T1.GR,
        T2.A,
        T3.B,
        T2.ID A_ID,
        T3.ID B_ID
FROM #TBL T1
OUTER APPLY (SELECT TOP 1 *
             FROM #TBL
             WHERE GR = T1.GR
             AND A IS NOT NULL
             ORDER BY A, ID) T2
OUTER APPLY (SELECT TOP 1 *
             FROM #TBL
             WHERE GR = T1.GR
             AND B IS NOT NULL
             ORDER BY B, ID) T3
</code></pre>

<p>Results:</p>

<pre><code>ââââââ¦ââââ¦âââââââ¦âââââââ¦âââââââ
â GR â A â  B   â A_ID â B_ID â
â âââââ¬ââââ¬âââââââ¬âââââââ¬âââââââ£
â  1 â 1 â 2    â    1 â 2    â
â  2 â 2 â NULL â    4 â NULL â
ââââââ©ââââ©âââââââ©âââââââ©âââââââ
</code></pre>
