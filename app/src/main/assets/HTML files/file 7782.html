<p>You <code>set_checkbox</code> calls are wrong. When you're using an array like "ambience[]" in form_checkbox, you don't want to include the square brackets ([]) in your <code>set_checkbox</code> call. The other problem is that set_checkbox requires a second parameter which you've only included in the first 2 checkboxes.</p>

<p>The set_checkbox should always be like this:</p>

<pre><code>set_checkbox('ambience', 'value');
</code></pre>

<p>Where 'value' is the second parameter of the <code>form_checkbox</code> call. Like this:</p>

<pre><code>form_checkbox('ambience[]', 'value', set_checkbox('ambience', 'value'));
</code></pre>
