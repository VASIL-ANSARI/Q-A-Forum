<p>You are compiling for Unicode, so <code>LPTSTR</code> expands to <code>wchar_t*</code>. But you have ANSI data, <code>char*</code>. In that case it is simplest to call <code>CreateProcessA</code> and pass the ANSI data.</p>

<pre><code>BOOL retval = CreateProcessA(..., TestExePath, ...));
</code></pre>

<p>If you want to avoid using ANSI functions then you can stick to <code>wchar_t</code> arrays.</p>

<pre><code>whar_t exepath[MAX_PATH + 100]; // enough room for cwd and the rest of command line
GetCurrentDirectory(MAX_PATH, exepath);
wcscat(exepath, L"\\pwrtest.exe /sleep /c:1");
BOOL retval = CreateProcess(..., exepath, ...);
</code></pre>

<p>Note that I switched from <code>getcwd</code> to <code>GetCurrentDirectory</code> in order to get a wide char version of the working directory.</p>

<p>Note also that your code should check for errors. I neglected to do that here due to laze. But in your real code, you should not be as lazy as I have been.</p>

<hr>

<p>The fact that you had to cast should have set off warning signals for you. Well, judging from the question, it probably did. When you write:</p>

<pre><code>appPath = (LPTSTR)TestEXEPath;
</code></pre>

<p>That simply tells the compiler to treat <code>TestEXEPath</code> as <code>LPTSTR</code> whether or not it really is. And the fact that the program won't compile without the cast tells you that <code>TestEXEPath</code> is not <code>LPTSTR</code>. The cast does not change that reality, it merely shuts the compiler up. Always a bad move.</p>
