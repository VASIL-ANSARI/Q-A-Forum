<p>Just found a solution by myself: we need not to <code>stop()</code> the <code>io_service</code> but <code>reset()</code> it and before this we need to close the socket, thus the correct timeout callback will be:</p>

<pre><code>void deadlineTimeout() {
    deadline_.cancel();
    socket_.close(); // socket_ is a socket on io_service_
    io_service_.reset();
}
</code></pre>

<p>After this change all the futures are released.</p>
