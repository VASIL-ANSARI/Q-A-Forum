<p>You should use an Integer Set to store what is the valid values. I mean:</p>

<pre><code>Set&lt;Integer&gt; validValues = new HashSet&lt;&gt;();
for (int i = 0; i &lt; input.length; ++i) {
  validValues.add(i);
}

for (int i = 0; i &lt; Array_of_key.length; i++) {
    for (y = 0; y &lt; SortedKey.length; y++) {
        if (Array_of_key[i] == SortedKey[y] &amp;&amp; validValues.contains(y)) {
            Array_of_indexKey[i] = y;
            validValues.remove(y);
            break; // this is very important, without it you get 21403
        }
    }
}
</code></pre>

<p>In your implementation let's see the case, when the input was 'gamal'. Then the sorted array is 'aaglm' and the inner loop found the first 'a' two times (this inner for loop doesn't know in the second time, that it found this 'a' previously, so we should check it with 'validValues').</p>
