<p>I think you have the only one solution: to create manually constraint on your table (you can add migration and then write something like this):</p>

<pre><code>public override void Up()
{
    Sql(@"ALTER TABLE dbo.Friends ADD 
    CONSTRAINT CustomOrder CHECK (UserAId &gt; UserBId)");
}

public override void Down()
{
    Sql(@"ALTER TABLE dbo.Friends DROP CONSTRAINT CustomOrder");
}
</code></pre>

<p>And now you can add only user's id pairs like that: 2 - 1, 5 - 3, but not 1 - 2 and 3 -5, so we have not duplicates as you wanted, but also you must provide assigning to UserA id value that will be more then UserB id value, but I think that it is not difficult for you.</p>
