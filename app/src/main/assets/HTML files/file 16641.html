<p>Why don't you try this way using OpenCV 2.3? I think it is more direct and efficient, and more clear to your eyes:</p>

<pre><code>VideoCapture _videoSource;

if(!_videoSource.open("test1.avi")) 
{
   exit(1);         // Exit if fail
}
_videoSource.set(CV_CAP_PROP_CONVERT_RGB, 1);

Mat frame;
namedWindow("Image");
int posFrame;

while(1) 
{
  _videoSource &gt;&gt; frame;
  posFrame=_videoSource.get(CV_CAP_PROP_POS_FRAMES);
  imshow("output", frame);
  return 0;
}
</code></pre>

<p>Something like this should work.</p>
