<p>From here: <a href="http://blog.nicksieger.com/articles/2006/04/23/tweaking-irb" rel="nofollow">http://blog.nicksieger.com/articles/2006/04/23/tweaking-irb</a></p>

<pre><code>module Readline
  module History
    LOG = "#{ENV['HOME']}/.irb-history"

    def self.write_log(line)
      File.open(LOG, 'ab') {|f| f &lt;&lt; "#{line}
"}
    end

    def self.start_session_log
      write_log("
# session start: #{Time.now}

")
      at_exit { write_log("
# session stop: #{Time.now}
") }
    end
  end

  alias :old_readline :readline
  def readline(*args)
    ln = old_readline(*args)
    begin
      History.write_log(ln)
    rescue
    end
    ln
  end
end

Readline::History.start_session_log
</code></pre>
