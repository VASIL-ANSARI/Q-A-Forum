<p>Remove the unnecessary GROUP BY and the statement looks good. If however you expect many sample.set already to contain the correct value, then you would update many records that need no update. This may create some overhead (larger rollback segments, triggers executed etc.) and thus take longer.</p>

<p>In order to only update the records that need be updated, join:</p>

<pre><code>UPDATE sample
INNER JOIN 
(
  SELECT postid, COUNT(tagid) as cnt
  FROM PostTags 
  GROUP BY postid
) tags ON tags.postid = sample.postid
SET sample.cnt = tags.cnt
WHERE sample.cnt != tags.cnt OR sample.cnt IS NULL;
</code></pre>

<p>Here is the SQL fiddle: <a href="http://sqlfiddle.com/#!2/d5e88" rel="nofollow">http://sqlfiddle.com/#!2/d5e88</a>.</p>
