<p>As far as I know, rules appliance are synchronous. I hope to be right, if that's the case, whis would work:</p>

<pre><code>function loadCssRules(rules, doc, callback) {
  var styleElement = this.createElement("style", doc);
  ...    
    styleElement.innerHTML = rules;
  } 
  doc.getElementsByTagName("head")[0].appendChild(styleElement);
  if (callback) {
    callback();
  }
}
</code></pre>

<p>Hope this helps. Cheers</p>
