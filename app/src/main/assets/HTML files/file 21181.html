<p>This should work</p>

<pre><code>private ActionBar bar;

//....

SearchView searchView = new SearchView(bar.getThemedContext());
searchView.setQueryHint("some text");
searchView.setIconified(false);
searchView.setOnCloseListener(new SearchView.OnCloseListener() {
    // revert to normal menu
    bar.setDisplayOptions(your_opions);
    invalidateOptionsMenu();
});

//...

@Override
public void onClick(View v) {
    // show custom view
    bar.setDisplayOptions(your_opions | ActionBar.DISPLAY_SHOW_CUSTOM);
    bar.setCustomView(searchView);

}
</code></pre>
