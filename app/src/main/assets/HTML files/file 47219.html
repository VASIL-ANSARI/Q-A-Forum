<p>If all the threads are operating on different index value, then you do not need a lock. Basically it is equivalent to using different variables. 
In your code , the value of the variable i is not set or modified. So it is reading only a particular index of flag. And for writing you are using different index, in this case no need to use lock.</p>
