<p>Well, for starters, a <code>SOCKET</code> on Windows is a handle (ie a pointer) and thus is subject to 32/64-bit byte sizes, so <code>%d</code> is not adequate if your app runs on a 64-bit system. You would have to use <code>%p</code> instead.</p>

<p>Aside from that, <code>WSADuplicateSocket()</code> is the correct approach.  MSDN says as much:</p>

<p><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms740478%28v=vs.85%29.aspx" rel="nofollow">Shared Sockets</a></p>

<blockquote>
  <p>The WSADuplicateSocket function is introduced to
  enable socket sharing across processes.</p>
</blockquote>
