<p>You're reusing the same deferred/promise object for all instances of the class, instead, you need to create a new one for each instance.</p>

<pre><code>var modalConfirm = (function ($) {

    var cls = function () {

        var dfd = $.Deferred();
        this.title = arguments[0].title;
        this.text = arguments[0].text;

        var t = new Date().getTime();

        var html = '&lt;div class="modal show" id="modal-confirm' + t + '"&gt;\n';
        html += '   &lt;div class="panel"&gt;\n';
        html += '       &lt;h2&gt;' + this.title + '&lt;/h2&gt;\n';
        html += '       &lt;p&gt;' + this.text + '&lt;/p&gt;\n';
        html += '       &lt;div class="buttons"&gt;\n';
        html += '           &lt;input type="button" id="confirm-yes' + t + '" value="Yes"&gt;\n';
        html += '           &lt;input type="button" id="confirm-no' + t + '" value="No"&gt;\n';
        html += '       &lt;/div&gt;\n';
        html += '    &lt;/div&gt;\n';
        html += '&lt;/div&gt;\n';
        html += '&lt;div id="modal-overlay' + t + '" class="overlay"&gt;&lt;/div&gt;\n';

        $('body').append(html);

        $('#confirm-no' + t).click(function () {
            mHideConfirm(t);
            dfd.reject({ modal: null });
        });
        $('#confirm-yes' + t).click(function () {
            mHideConfirm(t);
            dfd.resolve({ modal: null });
        });
        this.yes = dfd.done;
        this.no = dfd.fail;
        return this;
    }

    return cls;

})(jQuery);
</code></pre>

<p>which you can then simply to:</p>

<pre><code>(function ($) {

    var modalConfirm = function () {

        var dfd = $.Deferred();
        this.title = arguments[0].title;
        this.text = arguments[0].text;

        var t = new Date().getTime();

        var html = '&lt;div class="modal show" id="modal-confirm' + t + '"&gt;\n';
        html += '   &lt;div class="panel"&gt;\n';
        html += '       &lt;h2&gt;' + this.title + '&lt;/h2&gt;\n';
        html += '       &lt;p&gt;' + this.text + '&lt;/p&gt;\n';
        html += '       &lt;div class="buttons"&gt;\n';
        html += '           &lt;input type="button" id="confirm-yes' + t + '" value="Yes"&gt;\n';
        html += '           &lt;input type="button" id="confirm-no' + t + '" value="No"&gt;\n';
        html += '       &lt;/div&gt;\n';
        html += '    &lt;/div&gt;\n';
        html += '&lt;/div&gt;\n';
        html += '&lt;div id="modal-overlay' + t + '" class="overlay"&gt;&lt;/div&gt;\n';

        $('body').append(html);

        $('#confirm-no' + t).click(function () {
            mHideConfirm(t);
            dfd.reject({ modal: null });
        });
        $('#confirm-yes' + t).click(function () {
            mHideConfirm(t);
            dfd.resolve({ modal: null });
        });
        this.yes = dfd.done;
        this.no = dfd.fail;
        return this;
    }

    window.modalConfirm = modalConfirm;

})(jQuery);
</code></pre>
