<p>You appear to be expecting the variable <code>canvas</code> to be defined on the new page.  Keep in mind that when a new page is loaded the previous page (and the javascript objects for that page) are basically gone.</p>

<p>You will need to serialize the canvas image data, and pass it along in the URL (or somewhere) so that it can be reconstituted on the new page.  See <a href="http://stackoverflow.com/questions/766137/javascript-canvas-serialization-deserialization">this SO question about canvas serialization</a>.</p>

<p>You may also wish to consider making the two phases of your floorplan application work on the same page, so that this isn't necessary.</p>
