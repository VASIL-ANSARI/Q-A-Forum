<p>you haven't added the namespace declaration in the root node, you just declared the root node in the namespace, two entirely different things.  when building DOM, you need to reference the namespace on every relevant Node.  in other words, when you add your attribute, you need to define its namespace (e.g. setAttributeNS).</p>

<p>side note, although xml namespaces look like URLs, they really aren't.  there's no need to use the URL class here.</p>
