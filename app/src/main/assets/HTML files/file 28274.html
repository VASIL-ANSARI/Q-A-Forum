<p>In C, arrays are often "decayed" to pointer values, so when you return an array, you're essentially returning the address of its first element. In your sample code, you allocate <code>pictureModify</code> on a local stack, and attempt to return its address. When your function returns, all variables declared during its execution will be cleaned up -- this includes your local buffer.</p>

<p>To get around this you have a few options:</p>

<ol>
<li>Use <code>malloc()</code> to allocate a block of memory, write your results to it and then return a pointer to it. When you do this, you need to make sure your calling code will call <code>free()</code> on it.</li>
<li>Allocate memory in your calling code, and pass a pointer to that buffer to <code>picture2BlocVector</code>. This way, you're localizing all memory management to one place. In this scenario, you can even create a local variable and pass its address.</li>
</ol>
