<p>This is a bug in ApacheBench.</p>

<p>ApacheBench does not follow the http specifications fully, and assumes headers have a certain capitalization. Because the headers returned by the netty application doesn't have the character case ApacheBench expects, it assumes a default of 0 bytes for the content length. </p>

<p><strong><a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2" rel="nofollow">Http specification 4.2:</a></strong></p>

<blockquote>
  <p>HTTP header fields, which include general-header (section 4.5),
  request-header (section 5.3), response-header (section 6.2), and
  entity-header (section 7.1) fields, follow the same generic format as
  that given in Section 3.1 of RFC 822 [9]. Each header field consists
  of a name followed by a colon (":") and the field value. <strong>Field names
  are case-insensitive.</strong> The field value MAY be preceded by any amount of
  LWS, though a single SP is preferred. Header fields can be extended
  over multiple lines by preceding each extra line with at least one SP
  or HT. Applications ought to follow "common form", where one is known
  or indicated, when generating HTTP constructs, since there might exist
  some implementations that fail to accept anything beyond the common forms.</p>
</blockquote>

<p>Because the keep-alive switch of ApacheBench forces it to assume the server supports keep alive, it doesn't detect a "missing" header for the keep alive packet.</p>

<p>This problem if however something that should be solved in ApacheBench, as it is a bug in that application that causes it to miss the proper content-length.</p>
