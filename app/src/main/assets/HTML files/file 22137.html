<p>The first thing I see is that you are only coloring shapes one color at a time. So here:</p>

<pre><code>public void paint(Graphics g) {
    g2 = (Graphics2D) g;
    g2.setColor(coulor);        //set the drawing color
    for (Shape s : shapes) {
         g2.draw(s);            //draw in that color
    }
}
</code></pre>

<p>All your shapes are being drawn in the same color, when you want to color them differently. I think a better way to do things is to add all your shapes into your list, keeping track of their color, and calling <code>repaint()</code> once. Also, I would change the paint method to something to the effect of:</p>

<pre><code>public void paint(Graphics g) {
    g2 = (Graphics2D) g;
    for (Shape s : shapes) {
         g2.setColor(coulor[indexOfShape]);   //set the drawing color
         g2.draw(s);            //draw in that color
    }
}
</code></pre>

<p>Also, for <code>repaint</code> only being called twice: It is probably throwing an <code>IOException</code>. Try using a <code>try {...} catch(IOException e) {...}</code> block instead of just throwing it up the line. Something like:</p>

<pre><code>private void readNextLine() {
    try {
       File file = new File("map.txt");
       BufferedReader in = new BufferedReader(new FileReader(file));
       String line = in.readLine();
       ...
       ...
    } catch (IOException e) {
       e.printStackTrace();
    }
}
</code></pre>

<p>It should complain about something if it isn't reading right.</p>
