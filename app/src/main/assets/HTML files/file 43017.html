<p>Well, to make it work you will need to setup distributed transactions (XA) properly:</p>

<ol>
<li>Check that all datasources are XA-ready. Typically this means different jdbc driver class name and different type of connection pool during setup.
The process is vendor-specified, but always described in documentation of your application server.</li>
<li><p>You need to remove annotation:</p>

<p>@TransactionManagement( TransactionManagementType.BEAN )</p></li>
</ol>

<p>to let your container (actually his transaction broker) to manage transactions instead of bean.
3. You need to add @TransactionAttribute annotation on method saveTwoEJBs :</p>

<pre><code> @TransactionAttribute(TransactionAttributeType.REQUIRED)
public void saveTwoEJBs(EntityA, a, EntityB b)
</code></pre>

<ol start="4">
<li><p>It's not required but there is no reason to lookup EJB beans via JNDI context, just inject them via @EJB annotation:</p>

<pre><code>@EJB
private EJB_A ejbA;
@EJB
private EJB_B ejbB;
</code></pre></li>
</ol>

<p>Some links to go:</p>

<p><a href="http://docs.oracle.com/cd/E13222_01/wls/docs100/ejb30/examples.html" rel="nofollow">http://docs.oracle.com/cd/E13222_01/wls/docs100/ejb30/examples.html</a>
<a href="http://docs.oracle.com/cd/E16439_01/doc.1013/e13981/servtran001.htm" rel="nofollow">http://docs.oracle.com/cd/E16439_01/doc.1013/e13981/servtran001.htm</a>
<a href="http://entjavastuff.blogspot.ru/2011/02/ejb-transaction-management-going-deeper.html" rel="nofollow">http://entjavastuff.blogspot.ru/2011/02/ejb-transaction-management-going-deeper.html</a></p>
