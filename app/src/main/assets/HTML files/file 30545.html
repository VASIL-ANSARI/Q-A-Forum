<p>What you are looking to do is called multi-tenancy. And this is quite complex task. </p>

<p>You can't really play about with <code>web.config</code> substitution and for one request give one file and for another request give another config. What if 2 requests from different tenants will come exactly at the same time?</p>

<p>At the moment we are converting our application to multi-tenancy and this is very complex task, so can't really be described in one answer on SO.</p>

<p>You can have a look on this write-up <a href="http://www.scribd.com/doc/140181293/setting-up-an-mvc4-multi-tenant-site-v1-1" rel="nofollow">http://www.scribd.com/doc/140181293/setting-up-an-mvc4-multi-tenant-site-v1-1</a>
Also if you google for "multi-tenancy MVC" you'll get many articles on that. </p>

<p>Basic principles for our multi-tenancy look like this: DI container is aware of different tenants and knows that request for <code>tenant1.site.com</code> should use configuration set 1 and for request <code>tenant2.site.com</code> configuration set 2 should be used. 
Apart from DI container, no other component knows about tenants. And DI container orchestrates the configurations. Connection strings are sitting in configuration objects and these objects are given to EF contexts before they are created... somewhat complex.</p>

<p>If your case is simple and you don't use caches, to substitute the connection strings, I'd save them outwith <code>web.config</code> and provide them based on tenant request. Probably you can get away without complex DI setups.</p>
