<p><code>gl_Color</code> is the color output by the vertex shader. Unless your vertex shader did your texture fetching for you, then your vertex shader probably passes the color attribute directly to your fragment shader via gl_FrontColor.</p>

<p>If you're not using a vertex shader, and just using fixed-function vertex processing, then it's a certainty that the fragment shader was given only the color. Remember that fragment shaders override <em>all</em> per-fragment glTexEnv operations, including the fetching of the texture.</p>

<p>If you want to test the <em>texture's</em> opacity, then you need to fetch from the texture yourself. That requires using a <code>sampler2D</code> object and the <code>texture2D</code> function (assuming you're using GLSL version 1.20. If you're using later versions, you want the <code>texture</code> function). It's been a while since I did anything with OpenGL's built-in inputs and outputs, but the shader would look something like this:</p>

<pre><code>#version 120
uniform sampler2D myTexture;

void main()
{
    gl_FragColor = vec4(0.0);
    vec4 texColor = texture2D(myTexture, gl_TexCoord[0]); //Assuming you're using texture coordinate 0.
    if(texColor.a &lt; 1.0)
        gl_FragColor = vec4(1.0,0,0,1.0);
}
</code></pre>

<p>You will also have to set the program uniform's value to the texture unit you're using. You'll have to look that one up though.</p>
