<p>I'm assuming Python based upon the syntax in what you posted, so I tried this out in Python 2.7:</p>

<pre><code>import sys

data = []
with open('myInput03.txt', 'r') as myInput:
  for line in myInput:
    line = line.strip()
    if not line: continue
    try:
      (year, rainfall) = line.split()
      data.append((int(year), float(rainfall)))
    except ValueError:
      sys.stderr.write("Possible malformed line '%s'- skipping" % line)
      continue

dataSize = len(data)
if dataSize &lt; 3:
  sys.stderr.write("Not enough data to compute 3 year average")
  sys.exit(1)

with open('myOutput03.txt', 'w') as myOutput:
  for i in xrange(2, dataSize):
    rainfallTotal = 0.0
    mySlice = data[i-2:i+1]
    for (year, rainfall) in mySlice: rainfallTotal += rainfall
    (firstYear, lastYear) = [data[j][0] for j in (i-2, i)]
    myOutput.write("%d-%d %f\n" % (firstYear, lastYear, rainfallTotal/len(mySlice)))
</code></pre>

<p>This will compute rolling averages for all three year periods - for instance, my output using your input was this:</p>

<pre><code>1997-1999 2.596667
1998-2000 1.183333
1999-2001 1.360000
2000-2002 2.536667
</code></pre>

<p>You may need to modify it in case you don't want those middle periods to be computed.</p>
