<p>I'm not sure I understand the situation completely. Usually you pre-define all involved hosts and arrange them in groups. All hosts a playbook might process, are required to be defined in the inventory. Which hosts are processed by a playbook then is more or less fixed. What exactly do you mean by:</p>

<blockquote>
  <p>If X nodes are <em>requested</em> ...</p>
</blockquote>

<p>I know you can use <code>--limit</code> to limit the playbook to a subset of the originally defined hosts. Also you can use a param defined in <code>--extra-vars</code> to pick a specific group or a set of hosts. But still they need to be pre-defined in the inventory and it seems strange (and error prone) to me to depend the groups and therefore the roles (redis master, slave etc) on the number of involved hosts.</p>

<p>That being said... I think inventory scripts might be what you're looking for. With those scripts you can generate the inventory dynamic. I think you can't pass params but you can export vars and read them later from the script.</p>

<ul>
<li><a href="http://docs.ansible.com/ansible/intro_dynamic_inventory.html" rel="nofollow">Dynamic Inventory</a></li>
<li><a href="http://docs.ansible.com/ansible/developing_inventory.html" rel="nofollow">Developing Dynamic Inventory Sources</a></li>
</ul>
