<p>There's a pretty convenient way to handle this, actually - you just have to be careful and sanitize things, as it involves getting input from the browser pretty close to your database.  Basically, in <code>ItemsController</code>, you have a function that looks a lot like this:</p>

<pre><code>def search
    @items = Item.where(params[:item_criteria])
end
</code></pre>

<p>Scary, no?  But effective!  For security, I recommend something like:</p>

<pre><code>def search
    searchable_attrs = [...] #Possibly load this straight from the model
    conditions = params[:item_criteria].keep_if do |k, v|
        searchable_attrs.contains? k
    end
    conditions[:must_be_false] = false
    @items = Item.where(conditions)
end
</code></pre>

<p>Those first four lines used to be doable with ActiveSupport's <a href="http://apidock.com/rails/ActiveSupport/CoreExtensions/Hash/Slice" rel="nofollow">Hash#slice</a> method, but that's been deprecated.  I assume there's a new version somewhere, since it's so useful, but I'm not sure what it is.</p>

<p>Hope that helps!</p>
