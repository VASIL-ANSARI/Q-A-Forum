<p>You can use after_save callback like this</p>

<pre><code>after_save: set_age

def set_age
    bd = self.dob
    d = Date.today
    age = d.year - bd.year
    age = age - 1 if (
    bd.month &gt; d.month or
        (bd.month &gt;= d.month and bd.day &gt; d.day)
    )
    self.age = age.to_i
    self.save
  end
</code></pre>

<p>or before_save callback</p>

<pre><code>before_save: set_age

def set_age
    bd = self.dob
    d = Date.today
    age = d.year - bd.year
    age = age - 1 if (
    bd.month &gt; d.month or
        (bd.month &gt;= d.month and bd.day &gt; d.day)
    )
    self.age = age.to_i
  end
</code></pre>

<p>before_save is better than after_save as it will commit changes once.</p>

<p>I also think you neednot have a column age as age should always be derived on fly.</p>

<p>Thanks</p>
