<p>You've got it almost right.</p>

<p>You need</p>

<pre><code>pop(&amp;stack, ((void**)&amp;a));
</code></pre>

<p>instead of</p>

<pre><code>pop(&amp;stack,a);
</code></pre>

<p>And your <code>pop</code> function should be like this:</p>

<pre><code>int pop(Element ** stack, void **data) // modified
{
    if(!*stack) return 0;
    Element *head = *stack;
    *data = head-&gt;data;       // modified
    *stack = head-&gt;next;
    free(head);
    head = NULL;
    //delete head;
    return 1;
}
</code></pre>

<p>In your original code </p>

<pre><code>A *a;
pop(&amp;stack,a);
</code></pre>

<p><code>a</code> wont be modified by the <code>pop</code> function. If you want <code>a</code> to be modified, you have to pass a <em>pointer</em> to <code>a</code> to the <code>pop</code> function as it's done in my modified code.</p>
