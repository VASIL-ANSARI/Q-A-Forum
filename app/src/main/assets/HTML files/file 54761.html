<p>I think you need to use a prepared statement and setImmediate(), like this: </p>

<pre><code>var sqlite3 = require('sqlite3').verbose();

var stmt = db.prepare(query);

doQuery();

function doQuery(){

    stmt.get(function(error, data){
        if(data){
            if(error){
                console.log(error);
            } else {
                // do something with data here.
            }
            setImmediate(function(){
                doQuery();
            });
        }
    });

}
</code></pre>

<p>Explanation: </p>

<p>1) Prepared statements makes the client retrieve each row separately, rather than trying to grab all the results at once. The data param will be undefined when it hits the last row. </p>

<p>2) setImmediate() makes sure that the callback loop isn't called recursively, which could blow your call stack if the number of rows is too high.</p>
