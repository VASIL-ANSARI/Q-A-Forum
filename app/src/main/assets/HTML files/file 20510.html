<p>I believe you need to add a call <code>ca()</code> at the beginning of your function <code>f</code>.</p>

<p>From the boost documentation: </p>

<blockquote>
  <p>The execution control is transferred to coroutine at construction (coroutine-function entered) - when control should be returned to the original calling routine, invoke boost::coroutines::coroutine&lt;>::operator() on the first argument of type boost::coroutines::coroutine&lt;>::caller_type inside coroutine-function.</p>
</blockquote>
