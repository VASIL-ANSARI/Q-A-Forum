<p>One problem is that you have not covered the <code>SKPaymentTransactionState.Restored</code> case in your implementation of <code>paymentQueue:updatedTransactions:</code>. This means that in that situation you are not calling <code>finishTransaction</code> and are headed for a train wreck.</p>
