<p>This will do it:</p>

<pre><code>(?x)           # enable comments and whitespace to make
               # it understandable.  always always do this.

^              # front anchor

[\pL\pN]       # an alphanumeric

# now begin a repeat group that 
# will go through the end of the string

(?: [\pL\pN]   # then either another alnum
  |            # or else an underbar surrounded
               # by an alnum to either side of it
    (?&lt;= [\pL\pN] )      # must follow an alnum behind it
    _                    # the real underscore
    (?=  [\pL\pN] )      # and must precede an alnum before it
) *            # repeat that whole group 0 or more times

\z             # through the true end of the string
</code></pre>

<p>So you start off with an alphanumeric, then have any number of alphanumunders through the end, constraining any actual underscores to be surround by an actual alphanumerics to either side.</p>
