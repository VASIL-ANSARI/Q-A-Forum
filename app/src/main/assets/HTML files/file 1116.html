<p>One side of a connection is not going to know whether the other side's send buffer is empty.</p>

<p><code>DataAvailable</code> only indicates whether there is incoming data to be read. You could use that prior to <code>Read()</code>, but it alone doesn't give you the information you want. It doesn't tell you the beginning and ending of each batch.</p>

<p>I've coded back-and-forth conversation before, and I used length-prefixes in the data. What I did was write helper functions that read an exact number of bytes (chunks at a time) and no more.</p>

<p>The only alternative to length-of-batch values in the stream is some way of examining the incoming data and recognizing the beginnings and endings of batches.</p>
