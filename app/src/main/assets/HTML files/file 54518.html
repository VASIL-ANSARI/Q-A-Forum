<p>The problem is with the below line:</p>

<p><code>mapOfPermissions.put(current,setOfArray);</code></p>

<p>Basically, we are putting the values in the map, however, we still have the reference (i.e. <code>setOfArray</code>) and hence, when we <code>add/remove</code> elements using that reference, the value in the map gets changed. The solution is to use the below line instead:</p>

<p><code>mapOfPermissions.put(current,new HashSet&lt;String&gt;(setOfArray));</code></p>

<p>This puts a copy of the set into map and hence, further changes in that set don't affect the map value.</p>
