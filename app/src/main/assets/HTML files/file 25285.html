<p>It is common to have a tradeoff between memory and performance.  Which matters more to you depends on your application.</p>

<p>In this case I would suggest mitigating that by using BitVector (see <a href="https://pypi.python.org/pypi/BitVector" rel="nofollow">https://pypi.python.org/pypi/BitVector</a> for details) so that the data structure you create is much more compact.</p>

<p>Also in this case special casing 2 and only storing odd bits will double performance, and halve memory, at the cost of slightly more code complexity.  That is probably worth it.</p>
