<p>You are using it wrongly. <br />
The autoload is used for autoloading only the given class name on the 1st argument of callback, not for loading all classes like you're doing.</p>

<p>For example:</p>

<pre><code>spl_autoload_register(function ($class) {
 // ...
 $class = stream_resolve_include_path(sprintf("%s.php", $class));
 if ($class !== false) {
  require $class
 }
});
</code></pre>

<p><code>$class</code> will contains the class to load it, so, you can use it to find the file containing this class at your filesystem.</p>
