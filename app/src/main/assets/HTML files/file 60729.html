<p>The problem is that the ajax call returns nothing when the subcategory has no other subcategories, try sending an empty select list, for example:</p>

<pre><code> &lt;?php }else { ?&gt;
     &lt;select id="sub_category" name="sub_category"&gt;
       &lt;option name="sub_category" id="cat" value="0"&gt;No subcategory&lt;/option&gt;
     &lt;/select&gt;
 &lt;?php   } ?&gt;
</code></pre>

<p><strong>Edit</strong></p>

<p>If you want to add the selected elements to the multiselect add a class to the selects with the categories and use a javascript function like the following </p>

<pre><code>function addtoFinal(){
  var elements=document.getElementsByClassName("clazz");
  var opts="";
  for(var i=0;i&lt;elements.length;i++){
    opts+="&lt;option&gt;"+elements[i].value+"&lt;/option&gt;"
  }
  document.getElementById("final").innerHTML=opts;
}
</code></pre>
