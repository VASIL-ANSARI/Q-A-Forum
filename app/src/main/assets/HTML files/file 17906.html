<p>You can do the same a little simpler with a <a href="http://docs.python.org/library/collections.html#collections.defaultdict"><code>defaultdict</code></a>:</p>

<pre><code>from collections import defaultdict

def make_index(data,key,value=lambda x:x):
    d=defaultdict(list)
    for item in data:
        d[key(item)].append(value(item))
    return d
</code></pre>

<p>Using a <code>defaultdict</code> is faster than using <code>.setdefault()</code>, which would be the other option.</p>
