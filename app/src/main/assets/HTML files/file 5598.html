<p>If you don't know why it's not compiling, then change your code like this:</p>

<pre><code>this.gl.compileShader(tempFrag);    
if(!this.gl.getShaderParameter(tempFrag, this.gl.COMPILE_STATUS)) {
      this.Log("invalid shader : " + this.gl.getShaderInfoLog(tempFrag));
      return null;
};
</code></pre>

<p>This should give you more information on what is wrong (possibly the use of <code>#ifdef</code>)</p>
