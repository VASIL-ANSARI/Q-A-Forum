<p>Despite having "w64" in the file name, <code>i686-w64-mingw32-gcc.exe</code> generates 32-bit binaries.</p>

<p>To generate 64-bit binaries, use <code>x86_64-w64-mingw32-gcc.exe</code>.  In the cygwin package installer, look for mingw64-x86_64-.</p>

<p>"mingw64" GCC toolchains in the list below.  The first targets 32-bit systems and the second 64-bit.  They are named this way because they are from the "GCC for Win64" project (cygwin is <a href="http://mingw-w64.org/doku.php/download" rel="nofollow">not the only source</a> for these toolchains).  Also get the C toolchains (not shown below).</p>

<p><a href="http://i.stack.imgur.com/U8JfQ.png" rel="nofollow"><img src="http://i.stack.imgur.com/U8JfQ.png" alt="enter image description here"></a></p>

<p>Also, based on my experience with the <a href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/5.1.0/" rel="nofollow">standalone mingw64</a>, you probably need to add the following compiler flags to what you have:</p>

<pre><code>-m64 -mwin32 -mdll ...
</code></pre>

<p>And you do need <code>-shared</code> as a linker flag.</p>
