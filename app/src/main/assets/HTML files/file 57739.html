<p>For historical reasons libvips used to have its own array type. It had a whole set of functions for manipulating these arrays, all slightly different from the functions for manipulating images.</p>

<p>libvips8 has fixed this by removing the array type and using one-band double images instead. So the result of <code>stats</code> is now a small image you can just read pixels values from.</p>

<p>Use <code>getpoint</code> to read pixels from images:</p>

<p><a href="http://www.rubydoc.info/gems/ruby-vips/1.0.0/Vips/Image#getpoint-instance_method" rel="nofollow">http://www.rubydoc.info/gems/ruby-vips/1.0.0/Vips/Image#getpoint-instance_method</a></p>

<p>For example:</p>

<pre><code>$ irb
irb(main):001:0&gt; require 'vips'
=&gt; true
irb(main):002:0&gt; im = Vips::Image.new_from_file "/home/john/pics/k2.jpg"
=&gt; #&lt;Vips::Image:0x1c83830 ptr=0x1fb7020&gt;
irb(main):003:0&gt; im.getpoint(10, 10)
=&gt; [10.0, 0.0, 3.0]
irb(main):004:0&gt; im.stats
=&gt; #&lt;Vips::Image:0x20d1950 ptr=0x1fb7e30&gt;
</code></pre>

<p>The layout of the image you get from stats is in the C docs (<code>ruby-vips</code> is a thin layer over the C API, so all those docs work):</p>

<p><a href="http://www.vips.ecs.soton.ac.uk/supported/current/doc/html/libvips/libvips-arithmetic.html#vips-stats" rel="nofollow">http://www.vips.ecs.soton.ac.uk/supported/current/doc/html/libvips/libvips-arithmetic.html#vips-stats</a></p>

<p>So you want column 4, rows 1, 2, 3 for the RGB averages. <code>getpoint</code> returns an array, so for a one-band image, use <code>[0]</code> to get the first element.</p>

<pre><code>irb(main):007:0&gt; im.stats.getpoint(4, 1)[0]
=&gt; 110.87133688038793
irb(main):008:0&gt; im.stats.getpoint(4, 2)[0]
=&gt; 101.0471090382543
irb(main):009:0&gt; im.stats.getpoint(4, 3)[0]
=&gt; 96.45809502963363
</code></pre>

<p>This does seem a bit clumsy. Perhaps <code>Image</code> should have a <code>to_a</code> method? It would only make sense for very small images, of course. </p>
