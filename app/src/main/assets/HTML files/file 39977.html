<p><code>while(file)</code> will return true as long as the file is left in a valid state. </p>

<p>You haven't told us what a <code>T</code> is or what its <code>load</code> method does, so we can't really give you much more info than that. You need to make sure that the <code>load</code> method either closes the file descriptor, or leaves it in <code>eof</code> state or something else like that.</p>
