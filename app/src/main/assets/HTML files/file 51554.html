<p>Try including <code>event.waitUntil</code> second <code>.then()</code> chained , set <code>tag</code> using returned value from first <code>.then()</code> ; or setting <code>tag</code> at first then ; removing trailing comma <code>,</code> following last value at <code>event.waitUntil</code> object</p>

<pre><code>    foo().then(function(response){
      console.log('this is then result ', response);
      var tag = response.question_id;
      return tag;
        // access the value inside the `then`
    })
    .then(function(data) {
      event.waitUntil(
        self.registration.showNotification(title, {
          body:body,
          tag:data
        })
      );
    })
</code></pre>

<hr>

<pre><code>    foo().then(function(response){
      console.log('this is then result ', response);
      var tag = response.question_id;

        // access the value inside the `then`
      event.waitUntil(
        self.registration.showNotification(title, {
          body:body,
          tag:tag
        })
      );
    })
</code></pre>
