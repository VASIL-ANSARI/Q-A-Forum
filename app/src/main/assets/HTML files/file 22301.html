<p>ToList() materilizes by executing the query, and after that there is no way for NHibernate to understand that the first query should be included as a subquery.</p>

<p>Just remove the useless ToList():</p>

<pre><code>IQueryable&lt;int&gt; tempList = yetkiUygulamaList.Select(y =&gt; y.Id);  // removed here
query = query.Where(x =&gt; tempList.Contains(x.Uygulama.Id));
</code></pre>

<p>The above code will generate a single SQL query. If you want to stick it all in one C# code line, just get rid of the intermediary variable:</p>

<pre><code>query = query.Where(x =&gt; yetkiUygulamaList.Select(y =&gt; y.Id).Contains(x.Uygulama.Id));
</code></pre>
