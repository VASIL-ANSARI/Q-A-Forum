<p>Your definition of <code>f</code> is bogus. This is all you need to write:</p>

<pre><code>def f(x):
    return x**4 * (1 - x)**4 / (1 + x**2)
</code></pre>

<p>The rest of your code looks good to me, so long as you call <code>trap0</code> with floating-point arguments for <code>a</code> and <code>b</code>.</p>

<pre><code>&gt;&gt;&gt; trap0(math.cos, 0.0, math.pi/2, 100)
0.99997943823960744
</code></pre>

<p>If you want to call it with integer <code>a</code> and <code>b</code> then things can go wrong, because <code>f</code> ends up doing integer division instead of floating-point division:</p>

<pre><code>&gt;&gt;&gt; f(4.0)
1219.7647058823529
&gt;&gt;&gt; f(4)
1219
</code></pre>

<p>The easiest fix to is to coerce the division to be floating-point, perhaps like this:</p>

<pre><code>def g(x):
    return x**4 * (1 - x)**4 / (1.0 + x**2)

&gt;&gt;&gt; g(4.0) == g(4)
True
</code></pre>
