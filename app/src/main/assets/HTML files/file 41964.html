<p>A clean and elegant way to do this is to push all the entries into the stack(if not they are operators)as a float and perform the pop operations on the stack when you encounter an operator  get the operator. If its an operator perform two pops and get the operants and perform the appropriate operation and push the result back to the stack </p>

<p>The reason for your wired numbers output is that you have the float values of the operators also in the stack and you loop through the string to find the operators. So for the example 2 3 + 7 4 - * .you will have the stack as  2 3 float(+) 7 4 float(-) float(*)&lt;-being the stack top. so when you loop through the string and find the '+' symbol. you add the values of float(*) and float(-) and push it into the stack. I hope this will make your doubt clear. :)</p>

<p>Edit :
This is the code for the above explanation.</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string.h&gt; 
#include &lt;stack&gt;
#include &lt;sstream&gt;
#include &lt;stdlib.h&gt;

using namespace std ;

int main()
{stack&lt;float&gt;stack;
int i;
float num,result,first,second;  
char op,ch;
string str,str1;

getline(cin,str);
istringstream is(str); 

for(;is&gt;&gt;str1;){

if(str1.compare("+")==0){

    first=stack.top();
    stack.pop();
    second=stack.top();
    stack.pop();


    stack.push(first+second);

    }else if(str1.compare("-")==0){

    first=stack.top();
    stack.pop();
    second=stack.top();
    stack.pop();
    stack.push(first-second);
    }else if(str1.compare("*")==0){

    first=stack.top();
    stack.pop();
    second=stack.top();
    stack.pop();
    stack.push(first*second);
    }else if(str1.compare("/")==0){

    first=stack.top();
    stack.pop();
    second=stack.top();
    stack.pop();
    stack.push(first/second);
    }else{

    stack.push(strtof(str1.c_str(),NULL));              
    }
}
cout&lt;&lt;"The result of the expression is:"&lt;&lt;stack.top();
} 
</code></pre>
