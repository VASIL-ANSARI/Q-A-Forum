<p>Fixed it.</p>

<pre><code>for (i = 0; i &lt; N; i++) pthread_create(&amp;tid[i], NULL, doit, (void *)i);
</code></pre>

<p>should be</p>

<pre><code>for (i = 0; i &lt; N; i++) pthread_create(&amp;tid[i], NULL, doit, (void *)&amp;i);
</code></pre>

<p>missed the amperson operator for address.</p>

<p>Update:</p>

<p>I didn't pass the address now.</p>

<pre><code>for (i = 0; i &lt; N; i++) pthread_create(&amp;tid[i], NULL, doit, (void *)i);
</code></pre>

<p>and in <code>int doit(void *arg)</code>, changed <code>int tid = *((int*)(&amp;arg));</code></p>

<p>It works perfectly now.</p>
