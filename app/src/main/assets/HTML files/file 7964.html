<p>There are a couple of side-effects you need to beware of.</p>

<p>The first thing is that the extended persistence context you use to hold this user entity should not be used for much else, as it automatically caches everything being touched (the L1 cache). </p>

<p>If you need to use this continuously attached user entity in some other operation dealing with some other persistence context, you need to fetch a fresh instance instead of using the instance in session scope.</p>

<p>The locking thing does not happen automatically. Normally, different persistence contexts can also modify the same entity. Typically the last one to do any writes will 'win'. If you want to prevent this, you can take advantage of the normal locking operations in JPA. For this case, optimistic locks are probably best suited.</p>

<p>I'm curious though how well this will work in practice. It's surely a novel idea. From reading many blog posts, articles, books and discussions with many developers, I get the feeling that the extended persistence context is fairly little known thing and not that much best practices have been created for it. </p>

<p>The fact that Stateful session beans can now be scoped via CDI (and thus automatically destroyed when e.g. the HTTP session is destroyed) makes the entire concept much more viable. But CDI too is relatively new, and a lot of people still have to discover how to best use it.</p>
