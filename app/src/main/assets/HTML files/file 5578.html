<p>Since the preprocessor runs before semantic analysis, the comma in your template parameter is being interpreted as the argument separator for the macro. Instead, you should be able to use variadic macros to do something like this:</p>

<pre><code>#define specialize_AClass(...)\
template&lt;&gt; struct AClass&lt; __VA_ARGS__ &gt; { X a; };
</code></pre>
