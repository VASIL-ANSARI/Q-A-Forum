<p>Use <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx" rel="nofollow">WideCharToMultiByte</a> with the output charset as CP_UTF8</p>

<p>The function will return the number of bytes written to the output buffer, or the length of the UTF-8 encoded string</p>

<pre><code>LPCSTR instr;
char outstr[MAX_OUTSTR_SIZE];
int utf8_len = WideCharToMultiByte(CP_UTF8, 0, instr, -1, outstr, MAX_OUTSTR_SIZE, NULL, NULL);
</code></pre>

<p>After converting you can also use <code>strlen</code> on the output string</p>

<pre><code>int utf8_len = strlen(outstr);
</code></pre>

<p>If you don't need the output string, you can simply set the output buffer size to 0. In that case the function will return the number of bytes in UTF-8 without really outputting anything</p>

<pre><code>int utf8_len = WideCharToMultiByte(CP_UTF8, 0, instr, -1, NULL, 0, NULL, NULL);
</code></pre>
