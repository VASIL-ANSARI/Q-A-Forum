<p>Now I have the following triggers. Thanks for your help!</p>

<pre><code>DELIMITER $$

USE `devtestplandb`$$

CREATE
TRIGGER `db`.`trig1`
BEFORE INSERT ON `db`.`TABLE`
FOR EACH ROW
BEGIN
    SET @CNT = (
            select  count(*) 
            from    `TABLE` d 
            where   d.`ref` = NEW.`ref` and 
                    d.`to` &gt;= NEW.`from` and 
                    d.`from` &lt;= NEW.`to`);
    IF @CNT != 0 THEN
        CALL error_001();
    END IF;
END$$

CREATE
TRIGGER `db`.`trig2`
BEFORE UPDATE ON `db`.`TABLE`
FOR EACH ROW
BEGIN
    SET @CNT = (
            select  count(*) 
            from    `TABLE` d 
            where   d.`ref` = NEW.`ref` and 
                    d.`ID` &lt;&gt; NEW.`ID` and
                    d.`to` &gt;= NEW.`from` and 
                    d.`from` &lt;= NEW.`to`);
    IF @CNT != 0 THEN
        CALL error_002();
    END IF;
END$$
</code></pre>
