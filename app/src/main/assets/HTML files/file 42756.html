<pre><code>token = expr.charAt(count);
</code></pre>

<p>This should be</p>

<pre><code>token = expr.charAt(index);
</code></pre>

<p>I don't know why you're bothering to maintain both <code>index</code> and <code>count.</code> It only leads to trouble like this.</p>
