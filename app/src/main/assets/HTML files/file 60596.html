<p>The problem is <code>Arrays.asList(new Document("$$review.userId", 121))</code>. It should be <code>Arrays.asList("$$review.userId", 121)</code>. </p>

<p><code>Arrays.asList(new Document("$$review.userId", 121))</code> = <code>[ { "$$review.userId" : 121 } ]</code></p>

<p><code>Arrays.asList("$$review.userId", 121)</code> = <code>[  "$$review.userId", 121  ]</code></p>

<p>The snippet should be like below:</p>

<pre><code>List&lt;CatalogReview&gt; reviews = collection.aggregate(Arrays.asList(
            new Document("$project", new Document("reviews", new Document("$filter", new Document("input", "$reviews")
                    .append("as", "review").append("cond", new Document("$eq", Arrays.asList("$$review.userId", 121))))))
    )).into(new ArrayList&lt;&gt;());
</code></pre>
