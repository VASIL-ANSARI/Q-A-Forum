<p>According to the <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F" rel="nofollow">documentation</a> the current_page? method requires the request object, maybe you could try passing the request object directly into the link method.</p>

<pre><code>def link(title, path, request, opts={})
    css_class = 'inactive'
    css_class = 'active' if current_page?(path)
    content_tag :li, link_to(title, path), class: opts[:class]
 end

&lt;%= nl.link 'Employees', department_users_path(@department), request %&gt;
</code></pre>
