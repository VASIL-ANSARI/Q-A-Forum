<p>I solved the problem by placing the callback and deliver_ack parameters with the startbatch command and not the quicksend command.  This seems to work.  So here is what I have inside the <code>C#.NET</code> function that starts the batch:</p>

<pre><code>protected string get_batch_id(string session_id, string message_body)
{
    // Declare a WebClient.
    WebClient client = new WebClient();

    // Add a User Agent Header.
    client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR1.0.3705;)");

    // Add the session_id to the Query String.
    client.QueryString.Add("session_id", session_id);

    // Add the template to the Query String.
    client.QueryString.Add("template", message_body);

    // Add the callback to the Query String.
    client.QueryString.Add("callback", "3");

    // Add the deliv_ack to the Query String.
    client.QueryString.Add("deliv_ack", "1");

    // Declare the baseurl.
    string baseurl = "http://api.clickatell.com/http_batch/startbatch";

    // Open the baseurl.
    Stream data = client.OpenRead(baseurl);

    // Declare and instantiate a StreamReader to retrieve the results of executing the startbatch command.
    StreamReader reader = new StreamReader(data);

    // Parse and split the returned string into the returned_strings array.
    string[] returned_strings = reader.ReadToEnd().Split(' ');

    // Retrieve the batch_id from the (second element of the) returned_strings array.
    string batch_id = returned_strings[1].ToString();

    // Close the Stream.
    data.Close();

    // Close the Reader.
    reader.Close();

    // Return the batch_id.
    return (batch_id);
}
</code></pre>

<p>Phew!</p>

<p>So I've also managed to get the following functionality successfully coded up in ASP.NET using <code>C#.NET</code>:</p>

<ol>
<li>Send a message to a single recipient;</li>
<li>Send the same message to multiple recipients;</li>
<li>Send a personalised message to a single recipient;</li>
<li>Send a personalised message to multiple recipients;</li>
</ol>

<p>Along the way I've noticed that there aren't too many cliackatell code samples in <code>ASP.NET</code> using <code>C#.NET</code>.</p>
