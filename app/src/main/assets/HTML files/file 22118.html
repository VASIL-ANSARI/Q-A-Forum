<p>This happens because <code>array_unique</code> works by <em><a href="http://lxr.php.net/xref/PHP_5_4/ext/standard/array.c#2787">first sorting the values as strings</a></em>, then <a href="http://lxr.php.net/xref/PHP_5_4/ext/standard/array.c#2815">iterating</a> over the sorted array and for each value excluding from the result <em>all successive values that compare equal to it</em>.</p>

<p>The comparison function for "comparing equal" above is chosen according to the second parameter, which for <code>SORT_REGULAR</code> is the same as an equality check with <code>==</code>.</p>

<p>This behavior gives rise to a whole lot of gotchas. Since the sort is quicksort, it's  unstable. Therefore sorting an array that contains both <code>1</code> and <code>'1'</code> gives no guarantee which one will end up being first in the result. This means that <code>array_unique</code> may appear to arbitrarily "prefer" <code>1</code> in some cases and <code>'1'</code> in others.</p>

<p>However the madness continues: consider that if the sort produces <code>[1, '1', '1a']</code> then <code>'1a'</code> will <em>not</em> be included in the result (it compares equal to <code>1</code>) while if the sort produces <code>['1', 1, '1a']</code> then it <em>will</em> be included (it does not compare equal to the string <code>'1'</code>)!</p>
