<p>When you are calling <code>RE.query.filter(RE.e_id == e)</code> in your function-under-test, it is returning a new <strong>unconfigured</strong> <code>MagicMock</code>, and then you are calling its <code>one</code> function, which is generating that default <code>return_value</code>.</p>

<p>You probably want to set the <code>return_value</code> of <code>filter</code> to be a new <code>Mock</code> whose <code>one</code> function returns <code>None</code>.</p>
