<p>The function <code>wcstok</code> specified by C89 (and therefore C++) is reentrant and has the same signature and essentially the same behavior as Microsoft's <code>wcstok_s</code>.  <code>wcstok</code> should be declared in <code>&lt;wchar.h&gt;</code> and/or <code>&lt;cwchar&gt;</code>.</p>

<pre><code>wchar_t* wcstok(wchar_t* s, const wchar_t* delim, wchar_t** ptr);
</code></pre>

<p>But it looks like Microsoft's <code>wcstok</code> has an incorrect signature.</p>

<p>So maybe you can use <code>#ifdef _WINDOWS</code> (rather than <code>#ifdef _MSC_VER</code>) to determine which function to use, if you run into this problem even using gcc on Windows.</p>
