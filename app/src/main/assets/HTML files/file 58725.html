<p>You have 
a=price;
instead of 
price = a;</p>

<p>This is the reason because you get the 0 in the subtotal.</p>
