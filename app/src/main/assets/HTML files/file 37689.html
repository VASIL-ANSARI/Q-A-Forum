<p>You need to append new value to existing array stored in local storage, not new empty array:</p>

<pre><code>var LS = {
    set: function (key, val) {
        return localStorage.setItem(key, JSON.stringify(val));
    },
    get: function (key) {
        return JSON.parse(localStorage.getItem(key));
    }
};

var itemArray = LS.get('Viewed') || [];
var myItem = $("li#ref").data("ref");

if (itemArray.indexOf(myItem) !== -1) {
    itemArray.push(myItem);
}

LS.set("Viewed", itemArray);
</code></pre>

<p>You should probably also check if the value is already in array to avoid duplicates.</p>
