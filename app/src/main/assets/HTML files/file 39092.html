<p>It turns out that CIImage becomes nil right after creating it in the simulator. I did find that if I run the same code on a device then it works.</p>
