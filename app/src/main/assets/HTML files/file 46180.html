<p>Use <code>imagecreatetruecolor()</code> instead of <code>imagecreate()</code>.</p>

<p>While the php docs are surprisingly unclear about this, <code>imagecreatetruecolor()</code> creates a RGBA image, which is necessary for having alpha transparency.</p>

<p>PHP Docs
<a href="http://php.net/manual/en/function.imagecreatetruecolor.php" rel="nofollow">http://php.net/manual/en/function.imagecreatetruecolor.php</a></p>

<h2>Note</h2>

<p>The color indexes are 32bit ARGB, if for some reason you decided to create them directly rather than allocate them. This is actually quite convenient.</p>

<h2>Bonus: ARGB color function</h2>

<pre><code>// return 32bit ARGB color index
// input red (0-255), green (0-255), blue(0-255), alpha (0-127)
function makeColor($r=0, $g=0, $b=0, $a=0) {
   return ($a &lt;&lt; 24) + ($r &lt;&lt; 16) + ($g &lt;&lt; 8) + $b;
}
</code></pre>
