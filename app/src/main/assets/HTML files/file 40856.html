<p>I think you are going wrong in your <code>thumb1_tmp_img</code> near the end. I made this a class so I didn't have to duplicate so much like you have, but you can see the changes. See if this does it for you:</p>

<pre><code>class ImageFactory
    {
        public  function MakeThumb($thumb_target = '', $width = 60,$height = 60,$SetFileName = false, $quality = 80)
            {
                $thumb_img  =   imagecreatefromjpeg($thumb_target);

                // size from
                list($w, $h) = getimagesize($thumb_target);

                if($w &gt; $h) {
                        $new_height =   $height;
                        $new_width  =   floor($w * ($new_height / $h));
                        $crop_x     =   ceil(($w - $h) / 2);
                        $crop_y     =   0;
                    }
                else {
                        $new_width  =   $width;
                        $new_height =   floor( $h * ( $new_width / $w ));
                        $crop_x     =   0;
                        $crop_y     =   ceil(($h - $w) / 2);
                    }

                // I think this is where you are mainly going wrong
                $tmp_img = imagecreatetruecolor($width,$height);

                imagecopyresampled($tmp_img, $thumb_img, 0, 0, $crop_x, $crop_y, $new_width, $new_height, $w, $h);

                if($SetFileName == false) {
                        header('Content-Type: image/jpeg');
                        imagejpeg($tmp_img);
                    }
                else
                    imagejpeg($tmp_img,$SetFileName,$quality);

                imagedestroy($tmp_img);
            }
    }

// Initiate class
$ImageMaker =   new ImageFactory();

// Here is just a test landscape sized image
$thumb_target   =   'http://media1.santabanta.com/full6/Outdoors/Landscapes/landscapes-246a.jpg';

// 60px x 60px
$ImageMaker-&gt;MakeThumb($thumb_target,60,60,'image60px.jpg');

// Here is a portrait for testing
$thumb_target   =   'http://imgc.allpostersimages.com/images/P-488-488-90/55/5543/L6HLG00Z/posters/warning-you-are-entering-a-fart-zone.jpg';

// 150px x 150px
$ImageMaker-&gt;MakeThumb($thumb_target,150,150,'image150px.jpg');
</code></pre>
