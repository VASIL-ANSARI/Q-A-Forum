<p>This solution works on every version of android, including lollipop<br>
Use this broadcast reciever   </p>

<pre><code>class TeleListener extends PhoneStateListener {
        public void onCallStateChanged(int state, String incomingNumber) {
            super.onCallStateChanged(state, incomingNumber);
            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
                // CALL_STATE_IDLE;
                Toast.makeText(getApplicationContext(), "CALL_STATE_IDLE",
                        Toast.LENGTH_LONG).show();
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                // CALL_STATE_OFFHOOK;
                Toast.makeText(getApplicationContext(), "CALL_STATE_OFFHOOK",
                        Toast.LENGTH_LONG).show();
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                // CALL_STATE_RINGING, call intent here
                Intent i = null;
                i = new Intent(context,                  My_activity.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(i);
                break;
            default:
                break;
            }
        }
    }  
</code></pre>

<p>and register it like this in onCreate  </p>

<pre><code>TelephonyManager TelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        TelephonyMgr.listen(new TeleListener(), PhoneStateListener.LISTEN_CALL_STATE);  
</code></pre>

<p>And yes, please dont miss  </p>

<pre><code>&lt;uses-permission android:name="android.permission.READ_PHONE_STATE"/&gt;  
</code></pre>

<p>Cheers! Your problems is solved ;)</p>
