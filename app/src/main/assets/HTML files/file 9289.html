<p>I would collect all pageTracker items in an array</p>

<pre><code>foreach($query AS $banner_result){
    echo '&lt;div&gt;' .$banner_result-&gt;location .'&lt;/div&gt;';
    $googleAnalytics[] = "pageTracker._trackEvent('BannerImages','Impression','".$banner_result-&gt;yourBannerName."');";
}
</code></pre>

<p>And add them after you included the async Google Analytics code:</p>

<pre><code>echo '&lt;script&gt;'.implode("\n",$googleAnalytics).'&lt;/script&gt;';
</code></pre>
