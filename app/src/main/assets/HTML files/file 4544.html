<p>I rechecked and what you're doing wrong (and I've done this error a few times myself) is that atan2 accepts first the y coordinate, then the x coordinate.</p>

<p><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/atan2" rel="nofollow">MDC</a> says:</p>

<blockquote>
  <p>Note that the arguments to this function pass the y-coordinate first and the x-coordinate second.</p>
</blockquote>

<p>So </p>

<pre><code>a = Math.atan2(mouseX-canvas.width/2,mouseY-canvas.height/2);
</code></pre>

<p>should be</p>

<pre><code>a = Math.atan2(mouseY-canvas.height/2, mouseX-canvas.width/2);
</code></pre>

<p>Test updated: <a href="http://jsfiddle.net/79FaY/1/" rel="nofollow">http://jsfiddle.net/79FaY/1/</a></p>
