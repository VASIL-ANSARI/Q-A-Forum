<p>This is not possible, as the preprocessor only does a single pass over your file, and the <code>#endif</code> gets matched with the preceding <code>#if</code>. If you want to make an <code>#if</code>/<code>#endif</code> block conditional, then just nest it inside another <code>#if</code>/<code>#endif</code> block:</p>

<pre><code>#if CONDITION_A
#  if CONDITION_B
...
#  endif /* CONDITION_B */
#endif /* CONDITION_A */
</code></pre>

<p>Put another way, it's not possible to have preprocessing directives construct other preprocessing directives, as the output from the initial "construction" phase will not be reparsed by the preprocessor.</p>

<p>The (silly) example below wouldn't work either for example, even assuming the newlines wouldn't be an issue (which they would be here):</p>

<pre><code>#if DEFINE_X_TO_FIVE
#define X
#endif
#if DEFINE_X_TO_FIVE
5
#endif
</code></pre>
