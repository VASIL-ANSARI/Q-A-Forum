<p>It seems you are developing custom JNI bindings for Z3. Note that Z3 will come with it's own bindings in one of the next releases. This is already included in the `unstable' branch at <a href="http://z3.codeplex.com/SourceControl/BrowseLatest" rel="nofollow">Codeplex</a> and may serve as inspiration or even as a replacement. </p>

<p>Note that objects obtained from the z3.dll must be reference-counted correctly, which can be quite tricky depending on the kind of garbage collector that is used. My first suspicion would be that an object gets collected (by Z3) without your program being aware of it (e.g., because reference counts get out of sync), or that your garbage collector is trying to destroy objects in an order that Z3 doesn't anticipate (e.g., destroying contexts before all associated objects are destroyed). </p>

<p>The concurrency issues are perhaps not due to your own program, but because the garbage collector is concurrent (if I remember correctly, the later versions of Java actually come with 4 different ones and chose between them depending on the host system, which could be the source of the issue).</p>
