<p>You can check your database to ensure the proposal has not already been accepted with something along these lines. If you want to do it for both instances (accept, and reject), perhaps you could move the check into an additional function that checks to see if a proposal is already in an 'ending' state (i.e. Accepted or Rejected).</p>

<p>A sample addition to your <code>reject_job_proposal</code> method could be...</p>

<pre><code>public function reject_job_proposal ($job_id, $provider_id, $proposal_id) 
{
    $this-&gt;db-&gt;select('status');
    $this-&gt;db-&gt;from('job_proposal');
    $this-&gt;db-&gt;where('id', $proposal_id);
    $query  = $this-&gt;db-&gt;get();
    $result = $query-&gt;row();
    if ($result-&gt;status === 'Accepted') {
        // Throw error message, e.g. 'Sorry, this job has been accepted!'
        return;
    }

    ...
}
</code></pre>
