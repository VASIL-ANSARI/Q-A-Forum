<p>This should work:</p>

<pre><code>if (preg_match('/\.(md|markdown)$/', $file)) {
   // ...
} elseif (is_dir($file)) {
    $files = array_merge($files, getFilesFromDir($dir . '/' . $file));
}
</code></pre>

<p>Running the regex twice isn't so bad, and may be better than trying to hash something together across both lines. However you could achieve the same result with <code>preg_replace</code>:</p>

<pre><code>$title = trim(preg_replace('/^Title:(.+)/', '$1', $content[0]));
$description = trim(preg_replace('/^Description:(.+)/', '$1', $content[1]));
</code></pre>

<p>For outputting your array as per the example, this this:</p>

<pre><code>foreach ($filesArray as $directory =&gt; $files) {
    echo $directory . "\n\n";

    foreach ($files as $fileData) {
        echo '&lt;a href="' . $fileData['filepath'] . '"&gt;' . $fileData['title'] . "&lt;/a&gt;&lt;br /&gt;\n";
        echo $fileData['description'] . "\n\n";
    }
}
</code></pre>
