<p>The execution context inside <code>authenticate</code> callback function is not button object anymore. The simplest fix is to save reference proper <code>this</code> in local variable and use it like this:</p>

<pre><code>for (var i = 1; i &lt;= 3; i++) {
    document.getElementById('writeButton' + i).onclick = function () {
        var button = this;
        client.authenticate(function (error, client) {
            if (error) {
                alert('Error: ' + error);
            } else {
                doHelloWorld(button.id);
            }
        });
    }
}
</code></pre>
