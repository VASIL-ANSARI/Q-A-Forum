<p>You should check against failure all of <code>fopen</code>, <code>fprintf</code>, <code>fclose</code> (on failure, consider using <code>perror</code>). And you might want to call (sometimes) <code>fflush</code>.</p>

<p>Be sure to read the documentation of every function I am mentioning here.</p>

<p>BTW, you can generate some file path, e.g.</p>

<pre><code>char path[384];
int i = somenumber();
snprintf(path, sizeof(path), "/some/path/data_%d.txt", i);
FILE *f = fopen(path, "r");
if (!f) { perror(path); exit(EXIT_FAILURE); };
</code></pre>
