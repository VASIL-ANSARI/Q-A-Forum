<p>currently you are doing this</p>

<p><code>system "rake :send_mailing USER_INSTANCE=self &amp;"</code> </p>

<p>which is the same as going to the command line and typing</p>

<p><code>rake :send_mailing USER_INSTANCE=self &amp;</code> </p>

<p>self is just a literal string, I think what you are trying to do is this</p>

<p><code>system "rake :send_mailing USER_INSTANCE=#{self} &amp;"</code> </p>

<p>but that will end up being the equivalent of running this on the command line</p>

<p><code>rake :send_mailing USER_INSTANCE=&lt;User::xxxxx&gt;</code> </p>

<p>rake won't serialize this into your User ActiveRecord object;
when you shell out with system there is no relation to the calling code</p>

<p>an alternative - your rake task could take an integer - user_id and then access the record via User.find
but it gets more complicated as after_create is going to be running in a transaction so once your rake task runs it may or may not have finished that transaction</p>

<p>I would advise against trying to re-invent a way to do background processing in rails, there are already good tried and true solutions available</p>

<p>see <a href="http://railscasts.com/?tag_id=32" rel="nofollow">http://railscasts.com/?tag_id=32</a> for some options</p>
