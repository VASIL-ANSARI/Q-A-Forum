<p>I have this setup correctly in my tests and your setup looks right, except for a few things.</p>

<p>Make the following changes to your Karma config file:</p>

<pre><code>ngHtml2JsPreprocessor = {
  'moduleName': 'Templates',

  // Function that transforms the path to look exactly like 
  // you have it in templateUrl in your Angular code
  //
  // Mine looks like this
  cacheIdFromPath: function(filepath) {
    return filepath.match(/views\/.*/)[0]
  }
}
</code></pre>

<p>Then in your test's <code>beforeEach</code> include the <code>Templates</code> module that you specified in your Karma config above: <code>module('Templates')</code></p>

<pre><code>beforeEach(function() {
  module('Templates')
})
</code></pre>
