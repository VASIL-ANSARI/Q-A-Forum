<p>My first suggestion would be to look at changing the design to use a factory method to create <code>foo</code>. Either as a static member function or as a free function.</p>

<p>But in the very rare cases that this is not an option the following code illustrates how it can be done.</p>

<p><strong>bar.h</strong></p>

<pre><code>#include &lt;boost/shared_ptr.hpp&gt;

#ifndef BAR_H_
#define BAR_H_

class foo;

class bar {
private:
    boost::shared_ptr&lt;foo&gt; f;

public:
    bar();
};

#endif
</code></pre>

<p><strong>foo.h</strong></p>

<pre><code>#include "bar.h"

#ifndef FOO_H_
#define FOO_H_

class foo {
    friend bar::bar();
private:
    foo() {}
};

#endif
</code></pre>

<p><strong>bar.cpp</strong></p>

<pre><code>#include "bar.h"
#include "foo.h"

bar::bar() : f{ new foo() } 
{}
</code></pre>
