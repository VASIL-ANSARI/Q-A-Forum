<p>std::streamoff is a large (at least 64 bits) <strong>signed</strong> integer (often <code>long long</code> or <code>int64_t</code>, or <code>long</code> if that is 64 bits). The type used to express the size of objects and the length of arrays and containers is <code>size_t</code>, which is unsigned, often <code>unsigned long</code>. You need to <code>static_cast</code> your streamoff value to a size_t.</p>

<p>Note that <code>tellg()</code> may return -1. <code>static_cast</code>ing -1 to <code>size_t</code> will result in a huge positive value; trying to allocate that much memory will cause your program to fail. You need to explicitly check for -1 before casting.</p>

<p>Please do not use naked pointers and <code>new</code>. If you need a buffer, use the following:</p>

<pre><code>std::vector&lt;wchar_t&gt; buffer(static_cast&lt;size_t&gt;(responseLength));
// use &amp;buffer.front() if you need a pointer to the beginning of the buffer
</code></pre>
