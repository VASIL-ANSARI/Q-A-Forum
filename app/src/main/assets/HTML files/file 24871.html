<p>There's a template called <code>priority_queue</code> that handles the workload you described much better.  It's a max-heap, not a min-heap, but it allows you to pass a custom comparator as a template argument.  It's implemented by maintaining heap ordering on an underlying container that's usually a <code>vector</code>.</p>

<p><code>set</code> is implemented as a balanced binary tree.  That means every insertion and query does about log2(n) highly nonlocal memory accesses; think of it as log2(n) cache misses.  Heaps do much better.  These are particularly rough on modern processors and it's not uncommon to see a large constant-factor speedup when you tame your memory access patterns.</p>
