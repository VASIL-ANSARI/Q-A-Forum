<p>Your code is close to functional. Try this:</p>

<pre><code>if ($user-&gt;data['username'] == 'Anonymous')
{
    // User is not logged in/registered
    // Your redirect code can go here if you haven't output anything to the browser
}
</code></pre>

<p>The difference is that <code>'Anonymous'</code> is surrounded by quotes and not a constant, like your code has.</p>

<p>If you add an <code>else</code> block to this <code>if</code>, you can set your <code>$videochatusername</code> variable</p>

<pre><code>else
{
    $videochatusername = $user-&gt;data['username'];
}
</code></pre>
