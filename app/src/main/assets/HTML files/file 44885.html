<p>You forgot to surround your variables with quotes. When execution hits the line</p>

<pre><code>@accounts = Account.where("#{@criteria} LIKE ?", "%#{params[:search]}%").page(params[:page]).per(15)
</code></pre>

<p><code>@criteria</code> will still be <code>nil</code>. So the sql generated by activerecord will be <code>SELECT COUNT(*) FROM  accounts WHERE ( LIKE '%722586388%')</code> instead of <code>SELECT COUNT(*) FROM  accounts WHERE (id LIKE '%722586388%')</code>, for instance.</p>

<p>So inside your case you will have to something like:</p>

<pre><code>if params[:search]
    case (params[:search_criteria])
    when 1
      @criteria = 'id'
    when 2
      @criteria = 'customer_id'
    when 3 
      @criteria = 'customer.firstname'
    end
</code></pre>
