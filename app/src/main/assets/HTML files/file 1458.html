<p>One problem might be this:</p>

<pre><code>$r = $results-&gt;xpath('/question[$i]/answer[title=$answer]/responses');
</code></pre>

<p>Since you're using single quotes (the ' -character, is the actual English name "single quote"?), the variables in the XPath experssion aren't being evaluated, instead it's processed literally. Replace the single quotes with normal quotes (") and the variables will be processed normally.</p>

<p>See: <a href="http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single" rel="nofollow">http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single</a></p>
