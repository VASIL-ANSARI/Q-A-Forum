<p>You have to check for "undefined" on each property of the tree. As in:</p>

<p><code>if( typeof (element) == "undefined" ){
//set var to empty string
}</code></p>

<p>If you try to access a property of a javascript that is null or undefined, the script will fail at that line and not execute any lines after it.</p>

<p>To get around failing, you can wrap those blocks of code that may fail in a <code>try{}catch(e){}</code></p>
