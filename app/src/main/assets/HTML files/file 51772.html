<p>The problem with your device is that it probably lacks hardware encoder.
Software h264 encoder has significantly limited functionality - among other things it <a href="https://android.googlesource.com/platform/frameworks/av/+/e61f13d/media/libstagefright/codecs/avc/enc/SoftAVCEncoder.cpp#56" rel="nofollow">cuts out high quality profiles</a>, because these are likely to under-perform on low-end devices.</p>

<p>If you are working on your own, custom device, you may want to remove this limitation among with setting the <a href="https://android.googlesource.com/platform/frameworks/av/+/e61f13d/media/libstagefright/codecs/avc/enc/SoftAVCEncoder.cpp#179" rel="nofollow">encoder level</a> to <code>AVC_LEVEL5_1</code>. This will unlock your stagefright library and you'll be able to encode high quality videos using software codec.</p>
