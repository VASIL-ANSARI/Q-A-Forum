<p>A possible solution would be defining a wrapper that implements <code>IFoo</code> and the <code>getCode()</code> method, and your method would return the intended class in one of such wrappers.</p>

<p>If the wrapped instance has a <code>getCode</code> implemented, the wrapper would return its value, return it, otherwise return <code>null</code>.</p>
