<p>This behavior happens because the i variable used is the reference to the same variable. It means that is not the value that is kept for the onclick function, but its reference. So, the last value will always be used.</p>

<p>One way to fix it is to keep your value into the DOM element itself.</p>

<pre><code>newButton["data-i"] = i;
</code></pre>

<p>Here's my fiddle : 
<a href="https://jsfiddle.net/poggtfnx/5/" rel="nofollow">https://jsfiddle.net/poggtfnx/5/</a></p>
