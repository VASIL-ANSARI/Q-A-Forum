<p>The Segmentation Fault you are getting is because of the line:</p>

<pre><code>printf("%c",a[i]);
</code></pre>

<p>Since you didn't initialize the pointer <code>a</code>, it can point to any address, which may cause a Segmentation Fault when you dereference it.</p>

<p>I'm not sure what you are trying to print in the for loop so I removed it entirely from the code.</p>

<p>This is a cleaned version of the code:</p>

<pre><code>#include&lt;stdio.h&gt;
#include&lt;sys/utsname.h&gt;
#include&lt;utmp.h&gt;

int main(void)
{
  struct utmp *n;
  setutent();
  n=getutent();

  while(n) {
    if(n-&gt;ut_type==USER_PROCESS) {
      printf("%9s%12s (%s)\n", n-&gt;ut_user, n-&gt;ut_line, n-&gt;ut_host);
    }
    n=getutent();
  }
  return 0;
}
</code></pre>

<p>I replaced the number 7 by the proper macro <code>USER_PROCESS</code>. Also, you can place all the prints in a single <code>printf</code> call. </p>

<p>So what the program basically does is to get the utmp struct for each user and print it in a fancy way.</p>

<p>For more information about the functions used and the utmp struct you can take a look at the <a href="http://man7.org/linux/man-pages/man5/utmp.5.html" rel="nofollow" title="UTMP">utmp.h</a> reference.</p>
