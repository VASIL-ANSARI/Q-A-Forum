<p>The place I'd start is to:</p>

<ul>
<li>look at <a href="http://www.boost.org/doc/libs/1_48_0/libs/bimap/doc/html/index.html" rel="nofollow">Boost::bimap</a></li>
<li>create ordering from V -> K via a comparator function object which evaluates f(V&amp;) the way you suggested. (e.g. as in <a href="http://www.cplusplus.com/reference/stl/map/" rel="nofollow"><code>std::map&lt;K,V,C&gt;</code></a> where C is a comparator class)</li>
</ul>
