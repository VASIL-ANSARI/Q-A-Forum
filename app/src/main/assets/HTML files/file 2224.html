<p>Let's find out whether for some reason your code get's called twice within the same request/process or if two (not-so-) separate requests are handled.</p>

<pre><code>$output = "&lt;"."?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?"."&gt;\n\n";
$output .= print_r($events, 1);
$output .= "\nTotal Doctrine time: " . $time  . "\n";
$output .= "Peak Memory: " . memory_get_peak_usage() . "\n";
function dbgFoo() {
  static $a = 0;
  return ++$a;
}
$output .= 'debug counter: ' . dbgFoo() . "\n";
// edit: forgot the $return parameter for print_r
$output .= 'POST=' . print_r($_POST, 1);
$output .= 'GET=' . print_r($_GET, 1);
$output .= 'callstack: ' . print_r(debug_backtrace(), 1) . "\n\n\n";

file_put_contents(BASEPATH."/logs/doctrine_profiler.php", $output, FILE_APPEND);
</code></pre>

<p>If your code is called twice within the same php instance/request the debug counter output should be >1. And maybe the call stack can help you find the point where the application chooses to call your code ...again.<br>
Otherwise the output of _POST and _GET might indicate why there are two http requests. Maybe you have an add-on in your browser that causes a second request? There was e.g. an issue with ajax requests and older firebug versions.</p>
