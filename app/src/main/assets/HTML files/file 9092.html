<p><code>array_intersect()</code> <strong>does not compare associative keys</strong>, it only looks at the values, you will need to use <code>array_intersect_assoc()</code> <strong>to compare both key and value</strong>. However this function will only compare the base key not the keys of the nested arrays. </p>

<pre><code> array_intersect_assoc($expected, $result);
</code></pre>

<p>Perhaps the best solution is to use the following technique using <code>array_uintersect_assoc()</code>, where you can define the compare function.</p>

<pre><code>$intersect = array_uintersect_assoc($expected, $result, "comp"));

function comp($value1, $value2) {
  if (serialize($value1) == serialize($value2)) return 0;
  else return -1;
}

echo '&lt;pre&gt;';
print_r($intersect);
echo '&lt;/pre&gt;';
</code></pre>

<p>Further to your comments, the following code should return all elements in <code>$result</code> which have the expected structure set out in <code>$expected</code>. </p>

<pre><code>// get intersecting sections
$intersect = array_uintersect_assoc($expected, $results, "isStructureTheSame");
//print intersecting set
echo "&lt;pre&gt;";
print_r($intersect);
echo "&lt;/pre&gt;";
//print results that are in intersecting set (e.g. structure of $expected, value of $results
echo "&lt;pre&gt;";
print_r(array_uintersect_assoc($results, $intersect, "isStructureTheSame"));
echo "&lt;/pre&gt;";

function isStructureTheSame($x, $y) {
    if (!is_array($x) &amp;&amp; !is_array($y)) {
        return 0;
    }
    if (is_array($x) &amp;&amp; is_array($y)) {
        if (count($x) == count($y)) {
            foreach ($x as $key =&gt; $value) {
                if(array_key_exists($key,$y)) {
                    $x = isStructureTheSame($value, $y[$key]);
                    if ($x != 0) return -1;
                } else {
                    return -1;
                }
            }
        }
    } else {
        return -1;
    }
    return 0;
}
</code></pre>
