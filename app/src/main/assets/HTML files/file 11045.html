<p>You are not using <code>fread</code> and <code>fwrite</code> correctly.</p>

<pre><code>fread(&amp;p, MAX, 1, fil);
</code></pre>

<p>should be:</p>

<pre><code>fread(&amp;p[i], sizeof(person), 1, fil);
</code></pre>

<p>Similarly for the <code>fwrite</code> call.</p>

<p>An alternative to calling <code>fread</code> and <code>fwrite</code> in a loop is to read/write the entire array in one go, like so:</p>

<pre><code>fread(&amp;p, sizeof(person), MAX, fil);
</code></pre>
