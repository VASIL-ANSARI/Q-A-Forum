<p>The major problems are in these three lines:</p>

<pre><code>int ex = strtod(str1, sizeof(str1));
printf("%s\n", ex);
if (ex == "1")
</code></pre>

<p>The first convert a string to <code>double</code> value, which you then convert to an integer. That's okay, but you should probably be using <a href="http://en.cppreference.com/w/c/string/byte/strtol" rel="nofollow"><code>strtol</code></a> if you wanted an integer value.</p>

<p>The second and third line however are very flawed. In the second line you treat the integer as a <em>pointer</em>, namely a pointer to a character, a.k.a. a string. The integer value is not a pointer, treating it as a string will lead to <em>undefined behavior</em>, and it's probably here you have your crash.</p>

<p>Then the third line, it's not technically invalid but it will just never be true because you compare the value of the integer variable with a pointer to a string, and the chance of them being equal is slim to none.</p>

<hr>

<p>For correct (as far as I can see) behavior try something like this</p>

<pre><code>int ex;
scanf("%d", &amp;ex);    // Read an integer directly into the variablke
printf("%d\n", ex);  // Print the integer as an integer
if (ex == 1)         // Compare the integer variable to an integer literal
{
    ...
}
</code></pre>
