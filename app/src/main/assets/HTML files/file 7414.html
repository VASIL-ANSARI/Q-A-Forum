<p>Store your content as xml, in a format of your choosing. Something like the following</p>

<h2>Page.xml</h2>

<p>Must be parsed as PHP</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;?xml-stylesheet type="text/xsl" href="Layout-&lt;?php echo $_COOKIE['layout'] ?&gt;.xslt"?&gt;
&lt;page&gt;
    &lt;title&gt; ... &lt;/title&gt;
    &lt;main-content&gt; ... &lt;/main-content&gt;
    &lt;articles&gt;
        &lt;article&gt;
            &lt;title&gt; ... &lt;/title&gt;
            &lt;content&gt; ... &lt;/content&gt;
        &lt;/article&gt;
        &lt;article&gt; ... &lt;/article&gt;
        &lt;article&gt; ... &lt;/article&gt;
        &lt;article&gt; ... &lt;/article&gt;
    &lt;/articles&gt;
&lt;/page&gt;
</code></pre>

<h2>Layout-[name].xslt</h2>

<pre><code>&lt;?xml version="1.0"?&gt;

&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
    &lt;xsl:output method="html" encoding="utf-8" indent="yes" /&gt;
    &lt;xsl:template match="/page"&gt;
        &lt;xsl:text disable-output-escaping='yes'&gt;&amp;lt;!DOCTYPE html&gt;&lt;/xsl:text&gt;
        &lt;html&gt;
            &lt;head&gt;
                &lt;xsl:value-of select="title" /&gt;
            &lt;/head&gt;
            &lt;body&gt;
                ...
                &lt;!-- copy node as HTML --&gt;
                &lt;xsl:copy-of select="main-content/node()" /&gt;
                ...
                &lt;xsl:apply-templates match="articles/article" /&gt;
            &lt;/body&gt;
        &lt;/html&gt;
    &lt;/xsl:template&gt;
    &lt;xsl:template match="article"&gt;
        &lt;div&gt;
            &lt;h2&gt;&lt;xsl:copy-of select="title" /&gt;&lt;/h2&gt;

            &lt;!-- copy node as HTML --&gt;
            &lt;xsl:copy-of select="content/node()" /&gt;
        &lt;/div&gt;
    &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>

<p>You can just deliver the XML page to the client, and their browser will do the transformation!</p>
