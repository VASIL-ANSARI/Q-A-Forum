<p>I believe that the functions that you are looking for are part of JController and should be added to your controller. In your case, this would likely be the select.php controller based on the view name in your url.</p>

<p>You can see a good example of this in the categories component, specifically at administrator/components/com_categories/controllers/category.php.</p>

<p>The following is the code in com_categories. You would want to rename extension to 'category_id' and may want to grab the value from JInput instead of the current class:</p>

<pre><code>/**
 * Gets the URL arguments to append to an item redirect.
 *
 * @param   integer  $recordId  The primary key id for the item.
 * @param   string   $urlVar    The name of the URL variable for the id.
 *
 * @return  string  The arguments to append to the redirect URL.
 *
 * @since   1.6
 */
protected function getRedirectToItemAppend($recordId = null, $urlVar = 'id')
{
    $append = parent::getRedirectToItemAppend($recordId);
    $append .= '&amp;extension=' . $this-&gt;extension;

    return $append;
}

/**
 * Gets the URL arguments to append to a list redirect.
 *
 * @return  string  The arguments to append to the redirect URL.
 *
 * @since   1.6
 */
protected function getRedirectToListAppend()
{
    $append = parent::getRedirectToListAppend();
    $append .= '&amp;extension=' . $this-&gt;extension;

    return $append;
}
</code></pre>

<p>*EDIT:</p>

<p>You also have to add it as part of the form. This is the easy, but important part. Just make sure the form has a hidden input with the value or add it to the url in the action section of the form:</p>

<pre><code>&lt;form action="&lt;?php echo JRoute::_('index.php?option=com_component&amp;layout=edit&amp;id='.(int) $this-&gt;item-&gt;id . '&amp;category_id='.$this-&gt;category_id); ?&gt;" method="post" name="adminForm"&gt;
</code></pre>

<p>or use this:</p>

<pre><code>&lt;input type="hidden" name="category_id" value="&lt;?php echo $this-&gt;category_id; ?&gt;" /&gt;
</code></pre>

<p>To further explain what happens, when you click an item to go to the form, you likely add on the variable that you need. Then you add it to the form so that when one of the items is clicked, it will get submitted with the form. Joomla processes this form and either saves it or not depending on the toolbar button clicked. Then Joomla redirects, either back to the form or to the list view. Without the functions in your controller, your variable gets lost.</p>
