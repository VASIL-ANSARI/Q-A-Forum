<p>It looks good to me - but you could make your code a lot easier to read by 
changing it to look like this:</p>

<pre><code>if (check4contact == false)
{
    insert into contacts
}

if (check4role == false)
{
    INSERT INTO contact_event_role
}
else
{
    UPDATE contact_event_role
}
</code></pre>

<p>I worked this out by breaking it up into two separate checks. Instead of trying to just handle every possible case, I broke up the code into "what are you trying to do" chunks. The first one is just making sure that the contact exists. If they don't, we create them.</p>

<p>Then the second part is updating the contact_event_role table.</p>

<p>You could have also done this by moved out common code - eg, you were calling "INSERT INTO contacts" twice, and both times it was called because "check4contact" was false. So that's one way to clean up your logic.</p>
