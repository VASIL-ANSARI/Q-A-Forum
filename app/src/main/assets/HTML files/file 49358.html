<p>You need to use a separate table for storing slaves, for example have the columns: <code>uid slave bytime</code> (you also don't need to store both slaveby and master at the same time, that's redundant). When inserting a new record, check for the master's level to make sure the count is less than the number of slaves, otherwise don't insert a new record. I'm guessing you'd need an UNIQUE constraint in slave if a slave can only have one master at one time. </p>

<p>For fetching a master's slaves simply do:</p>

<pre><code>SELECT slave FROM slaves WHERE uid = {uid}
</code></pre>

<p>For fetching a slave's master simply do:</p>

<pre><code>SELECT uid FROM slaves WHERE slave = {slaveid}
</code></pre>

<p>EDIT: Forgot to mention one thing, you really should do some input escaping and validation if you aren't already and use a DB layer like PDO to avoid SQL injections.</p>
