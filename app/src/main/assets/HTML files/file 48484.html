<p>There are plenty of libraries available which solve this problem already, i.e., libunwind or the libc backtrace function: <a href="http://www.gnu.org/software/libc/manual/html_node/Backtraces.html" rel="nofollow">http://www.gnu.org/software/libc/manual/html_node/Backtraces.html</a></p>

<p>If you want to implement this yourself you could parse the ELF header of the executable. This way you can get the function names and start addresses / lengths. So you can check if you are already in a function called "main".</p>
