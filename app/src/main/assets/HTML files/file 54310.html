<p>There is no need to use <a href="https://docs.python.org/3/library/py_compile.html" rel="nofollow"><code>py_compile</code></a>. It's intended use is to <em>write a bytecode file</em> from the given source file. In fact it will fail if you don't have the permissions to write in the directory, and thus you could end up with some false negatives.</p>

<p>To just parse, and thus validate the syntax, you can use the <a href="https://docs.python.org/2/library/ast.html" rel="nofollow"><code>ast</code></a> module to <a href="https://docs.python.org/2/library/ast.html#ast.parse" rel="nofollow"><code>parse</code></a> the contents of the file, or directly call the <a href="https://docs.python.org/2/library/functions.html#compile" rel="nofollow"><code>compile</code></a> built-in function.</p>

<pre><code>import ast

def is_valid_python_file(fname):
    with open(fname) as f:
        contents = f.read()
    try:
        ast.parse(contents)
        #or compile(contents, fname, 'exec', ast.PyCF_ONLY_AST)
        return True
    except SyntaxError:
        return False
</code></pre>

<p>Be sure to <em>not</em> execute the file, since if you cannot trust its contents (and if you don't even know whether the file contains valid syntax I doubt you can actually trust the contents even if you generated them) you could end up executing malicious code.</p>
