<p>The maximum number of registration ids you can send is 1,000. You'll need to break it into multiple curl calls with groupings of 1k registration ids each.</p>

<pre><code>function _send_notification($registration_ids = '', $message = '') {
    $url = 'https://android.googleapis.com/gcm/send';
    $groups = array_chunk($registration_ids, 1000);

    foreach($groups as $group) {
        $fields = array(
            'registration_ids' =&gt; $group,
            'data' =&gt; $message,
        );
        // ...
        // rest of your curl code
    }
}
</code></pre>
