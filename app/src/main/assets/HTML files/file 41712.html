<p><strong>In dbc.php</strong></p>

<pre><code>$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");
$db = mysql_select_db(DB_NAME, $link) or die("Couldn't select database");
</code></pre>

<p><strong>In your code</strong></p>

<pre><code>try
{
    $stmt = $db-&gt;prepare($query);
    $stmt-&gt;execute();
}
catch(PDOException $ex)
{
    die("Failed to run query: " . $ex-&gt;getMessage());
}
</code></pre>

<p>You're mixing (deprecated) <code>mysql_*</code> functions with PDO; and besides, <code>mysql_select_db()</code> simply selects the database and returns a boolean so <code>$db-&gt;prepare()</code> equates to <code>true-&gt;prepare()</code> which is why you're getting an error about <code>$db</code> not being an object.</p>

<p>Try changing your connection settings in <strong>dbc.php</strong> to:</p>

<pre><code>try {
    $sDSN = "mysql:dbname=" . DB_NAME. ";host= " . DB_HOST;
    $db = new PDO($sDSN, DB_USER, DB_PASS);
}

catch(PDOException $e) {
    die($e-&gt;getMessage());
}
</code></pre>
