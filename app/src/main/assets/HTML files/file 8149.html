<p>This sounds along the lines of the <a href="http://en.wikipedia.org/wiki/Maximum_flow_problem" rel="nofollow">maximum flow problem</a>.</p>

<p>I think what would really help is to visualize the problem on a graph.  It sounds like only you have 4 edges (pipelines), but you don't mention how many stations you have.  </p>
