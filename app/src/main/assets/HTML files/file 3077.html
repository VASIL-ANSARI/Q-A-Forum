<p>You must set properly the allow_url_fopen value of your php.ini.</p>

<p><a href="http://ar.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen" rel="nofollow">http://ar.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen</a></p>

<p>Consider the CLI uses a different php.ini that the webserver (I assume you are using Apache).</p>

<p>Another option may be you are not including libnss_dns</p>

<p>Try adding to your httpd configuration (correct path as needed for you system):</p>

<pre><code>LoadFile /lib/libnss_dns.so
</code></pre>
