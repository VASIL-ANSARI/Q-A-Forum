<p>The problem you encounter is simply that your second view is constrained by the guideline -- as is the first view. The guideline itself is constrained to the container.</p>

<p>What that means is that it doesn't matter that you mark your first view as <code>GONE</code> -- yes, it will disappear, but this will not impact the layout at all:</p>

<ul>
<li>the guideline is constrained to the parent, so it doesn't care</li>
<li>the view that is visible is constrained to the parent and the guideline,
so doesn't care either.</li>
</ul>

<p>So it's perfectly normal that nothing changes other than the view disappearing.</p>

<p>To do what you want, you could instead do something like that:</p>

<pre><code>    final View viewA = findViewById(R.id.viewA);
    final View guideline = findViewById(R.id.guideline);
    Button button = (Button) findViewById(R.id.button);
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            ConstraintLayout.LayoutParams params = (ConstraintLayout.LayoutParams) guideline.getLayoutParams();
            if (viewA.getVisibility() == View.GONE) {
                viewA.setVisibility(View.VISIBLE);
                params.guidePercent = 0.5f;
            } else {
                viewA.setVisibility(View.GONE);
                params.guidePercent = 0;
            }
            guideline.setLayoutParams(params);
        }
    });
</code></pre>

<p>This will change the position of the guideline, which will make the layout react.</p>

<p>I'm pasting the XML just to be exhaustive, but it's pretty much what you had:</p>

<p>
</p>

<pre><code>&lt;android.support.constraint.Guideline
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/guideline"
    android:orientation="horizontal"
    tools:layout_editor_absoluteY="303dp"
    tools:layout_editor_absoluteX="0dp"
    app:layout_constraintGuide_percent="0.50248754" /&gt;

&lt;View
    android:id="@+id/viewA"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:background="@color/colorAccent"
    android:text="Button"
    app:layout_constraintBottom_toTopOf="@+id/guideline"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintRight_toRightOf="parent"
    app:layout_constraintTop_toTopOf="parent" /&gt;

&lt;View
    android:id="@+id/viewB"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_marginTop="8dp"
    android:background="@color/colorPrimary"
    android:text="Button"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintRight_toRightOf="parent"
    app:layout_constraintTop_toTopOf="@+id/guideline" /&gt;

&lt;Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="16dp"
    android:layout_marginEnd="24dp"
    android:layout_marginRight="24dp"
    android:text="Toggle"
    app:layout_constraintBottom_toBottomOf="@+id/viewB"
    app:layout_constraintRight_toRightOf="@+id/viewB" /&gt;
</code></pre>

<p></p>

<p><a href="http://i.stack.imgur.com/50V1p.png" rel="nofollow"><img src="http://i.stack.imgur.com/50V1p.png" alt="enter image description here"></a></p>
