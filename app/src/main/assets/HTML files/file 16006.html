<p>From <a href="http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Precision-Math-with-PHP/ba-p/8368" rel="nofollow">an article I wrote for Authorize.Net</a>:</p>

<p>One plus one equals two, right? How about .2 plus 1.4 times 10? That equals 16, right? Not if you're doing the math with PHP (or most other programming languages):</p>

<pre><code>echo floor((0.2 + 1.4) * 10); // Should be 16. But it's 15!
</code></pre>

<p>This is due to how floating point numbers are handled internally. They are represented with a fixed number of decimal places and can result in numbers that do not add up quite like you expect. Internally our .2 plus 1.4 times 10 example computes to roughly 15.9999999998 or so. This kind of math is fine when working with numbers that do not have to be precise like percentages. But when working with money precision matters as a penny or a dollar missing here or there adds up quickly and no one likes being on the short end of any missing money.</p>

<p><strong>The BC Math Solution</strong></p>

<p>Fortunately PHP offers the <a href="http://us2.php.net/manual/en/book.bc.php" rel="nofollow">BC Math extension</a> which is "for arbitrary precision mathematics PHP offers the Binary Calculator which supports numbers of any size and precision, represented as strings." In other words, you can do precise math with monetary values using this extension. The <a href="http://us2.php.net/manual/en/ref.bc.php" rel="nofollow">BC Math extension contains function</a>s that allow you to perform the most common operations with precision including <a href="http://us2.php.net/manual/en/function.bcadd.php" rel="nofollow">addition</a>, <a href="http://us2.php.net/manual/en/function.bcsub.php" rel="nofollow">subtraction</a>, <a href="http://us2.php.net/manual/en/function.bcmul.php" rel="nofollow">multiplication</a>, and <a href="http://us2.php.net/manual/en/function.bcdiv.php" rel="nofollow">division</a>.</p>

<p><strong>A Better Example</strong></p>

<p>Here's the same example as above but using the bcadd() function to do the math for us. It takes three parameters. The first two are the values we wish to add and the third is the number of decimal places we wish to be precise to. Since we're working with money we'll set the precision to be two decimal palces.</p>

<pre><code>echo floor(bcadd('0.2', '1.4', 2) * 10); // It's 16 like we would expect it to be.
</code></pre>
