<p>One approach might be to use a "materialized path" and compare those paths (i.e. the path might be <code>"1.1.1.2"</code> etc.). Depending on whether you know how many nodes per level you'd expect you could use fixed size part parts, e.g. <code>"001.001.001.002"</code> and then a simple string compare should do the trick.</p>

<p>That way when inserting/deleting a node you'd only have to update the materialized paths for the new node and the affected subtree. When changing node order you'd do the same for all nodes/subtrees whose order has been changed.</p>

<p>Another approach would be to use "nested sets", have a look here for a short tutorial on both: <a href="https://communities.bmc.com/docs/DOC-9902" rel="nofollow">https://communities.bmc.com/docs/DOC-9902</a></p>

<p>Basically your problem seems to be related to how to map a tree to a database table, i.e. convert a tree structure into a flat list and back.</p>
