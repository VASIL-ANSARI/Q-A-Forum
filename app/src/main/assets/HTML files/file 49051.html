<p>The problem is that you're storing pointers into <code>cstr</code> in <code>argv</code>, but then you're deleting <code>cstr</code> at the end of the <code>parse()</code> function. Get rid of:</p>

<pre><code>delete[] cstr;
</code></pre>

<p>Also, you should pass <code>argc</code> by reference. Otherwise, when you update it in the <code>parse()</code> function it won't update the caller's variable. So it should be:</p>

<pre><code>void parse(string str, int &amp;argc, char *argv[])
</code></pre>

<p>However, you also have a memory leak. You're creating a new <code>cstr</code> each time <code>parse</code> is called, but never deleting it. You should change the function to return <code>cstr</code>, and have the caller delete it when they're done with that parsed line.</p>

<pre><code>char *parse(str str, int &amp;argv, char *argv[]) {
    ...
    return cstr;
}
</code></pre>

<p>Then in your <code>main()</code> loop, do:</p>

<pre><code>int main( void ) 
{
    string theLine;

    while (true) 
        {
            cout &lt;&lt; "myshell&gt; ";
            getline(cin,theLine);
            cout &lt;&lt; "Command was: " &lt;&lt; theLine &lt;&lt; endl;
            if ((theLine == "exit") || (cin.eof()) || (theLine == "quit"))
                exit(0); 

            char *cstr = parse(theLine, argc, argv);
            cout &lt;&lt; "argv[0] " &lt;&lt; argv[0] &lt;&lt; "\n";
            delete[] cstr;
        }   
}
</code></pre>
