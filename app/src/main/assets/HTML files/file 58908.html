<p>I'm using <code>async</code> library for such cases <a href="https://github.com/caolan/async" rel="nofollow">https://github.com/caolan/async</a>
Docs: <a href="https://github.com/caolan/async/blob/v1.5.2/README.md" rel="nofollow">https://github.com/caolan/async/blob/v1.5.2/README.md</a></p>

<pre><code>var async = require("async");

/*use each, eachSeries or eachLimit - check docs for differences */
async.eachSeries(data.value, function (element, cb) {
    client.elementIdText(element.ELEMENT, function (result) {
      listings.push(result.value);
      // this job is done
      cb();
    });
}, function() {
    // Some of the sites have extra sections
    var diff = _.intersection(listings, expected);
    client.assert.ok(listings == diff);
});
</code></pre>
