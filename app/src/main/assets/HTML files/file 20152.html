<p>In strict mode, <code>this</code> will be undefined inside an immediate function like that, and not the global object (which it would be without strict mode). One way to make your code work is to create the global variables explicitly (if that's what you're looking for):</p>

<pre><code>window.run = function(casper) {
    // code test here
};
window.run(casper);
</code></pre>

<p>Or, if you're not looking for globals, just declare your method locally:</p>

<pre><code>var run = function(casper) {
    // code test here
};

run(casper);
</code></pre>
