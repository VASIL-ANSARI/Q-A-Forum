<p>You are calling getAllContacts() in which you have checked for the required permission and if permission is already granted you are getting the list of contacts. Issue with your code is when you do not have permission, you are asking for it. So now when user allow or deny, you again required to call same method getAllContacts() also from onRequestPermissionsResult(). Currently it is happening that user Allowed but you have yet not fetched the contact and going directly to read it. </p>

<p>Add your getAllContacts() call also inside onRequestPermissionsResult() i.e. </p>

<pre><code>@Override
public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults){
        switch (requestCode) {
            case MY_PERMISSIONS_REQUEST_READ_CONTACTS:
                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED)
                {
                     getAllContacts(ContactsDisplay.this.getContentResolver());
                    contactsdisplay();
                }else{
                   //Show a dialog with explanation why you want contacts permission and ask for permission again or else simply display appropriate error or alert message.
                }
                break;
        }
    }
</code></pre>

<p>So to explain firstly when you call getAllContacts() and you already have permission granted your Cursor phones will have values. But if you do not have permission, so you display an dialog requesting permission and when user allow you are directly calling contactsdisplay() which is wrong. You have to first getAllContacts() as user just granted you permission and then call contactsdisplay().</p>
