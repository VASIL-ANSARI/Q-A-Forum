<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>function datasetBarChosen(group, process) {//this can be refactored more
  var ds = [];
  d3.csv("https://raw.githubusercontent.com/openmundi/world.csv/master/countries(204)_olympics.csv")
    .row(d =&gt; d["Code"] === group ? d : false)//get only items with code===group
    .get(process);

}

function doThisWithResult(error, rows) {
  console.log(rows);
  //write all your logic to do with returned data here;
  //or call other functions from here passing data
}

datasetBarChosen("ZIM", doThisWithResult);</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>

<p>Converted to es5 using <a href="https://babeljs.io/repl/#?babili=false&amp;evaluate=true&amp;lineWrap=false&amp;presets=es2015%2Creact%2Cstage-2&amp;code=function%20datasetBarChosen(group%2C%20process)%20%7B%2F%2Fthis%20can%20be%20refactored%20more%0A%20%20var%20ds%20%3D%20%5B%5D%3B%0A%20%20d3.csv(%22https%3A%2F%2Fraw.githubusercontent.com%2Fopenmundi%2Fworld.csv%2Fmaster%2Fcountries(204)_olympics.csv%22)%0A%20%20%20%20.row(d%20%3D%3E%20d%5B%22Code%22%5D%20%3D%3D%3D%20group%20%3F%20d%20%3A%20false)%2F%2Fget%20only%20items%20with%20code%3D%3D%3Dgroup%0A%20%20%20%20.get(process)%3B%0A%0A%7D%0A%0Afunction%20doThisWithResult(error%2C%20rows)%20%7B%0A%20%20console.log(rows)%3B%0A%7D%0A%0AdatasetBarChosen(%22ZIM%22%2C%20doThisWithResult)%3B" rel="nofollow">Babel</a></p>

<pre><code>"use strict";

function datasetBarChosen(group, callbackFunction) {
  //this can be refactored more
  var ds = [];
  d3.csv("https://raw.githubusercontent.com/openmundi/world.csv/master/countries(204)_olympics.csv").row(function (d) {
    return d["Code"] === group ? d : false;
  }) //get only items with code===group
  .get(callbackFunction);
}

function doThisWithResult(error, rows) {
  console.log(rows);
}

datasetBarChosen("ZIM", doThisWithResult);
//dataBarChosen takes a filter string to filter result
//and a function to be called with resulting rows
</code></pre>
