<p>The problem with your code is that the block that you are passing expects a single parameter of type <code>CGContextRef</code>, while the calling code is passing two arguments - <code>args</code> and <code>UIGraphicsGetCurrentContext()</code>.</p>

<p>Since Objective-C does not check the cast, your blocks end up running with a wrong graphic context, causing undefined behavior.</p>

<p>To fix this problem you need to make sure that the "signature" of the block matches the signature of the block type to which you cast it, i.e. <code>DrawTaskBlock</code>. The signature must include the proper type of the <code>args</code> parameter, even if none of your blocks is using it.</p>
