<p>I assume you want to test if all of the strings in str1 appear as substrings in strings in <code>keywords['has']</code>.</p>

<p>In that case, you could use:</p>

<pre><code>for colour, keywords in dict_colour.items():
    if all(any(keystring in kw for keystring in keywords['has']) for kw in str1 ) and not any(kw in keywords['hasnt'] for kw in str1):
        return colour
</code></pre>
