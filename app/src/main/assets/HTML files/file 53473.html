<p>Here's how I've handled this before:</p>

<p>When your application/service starts, have it try to open a socket on a specific port and listen. If it successfully opens the port, it is the first instance and should run normally. If it is the second instance (the one with the <code>--stop</code> flag), it will not be able to bind the port. In this case, the second instance should send a stop command to the first over the socket and then shut itself down.</p>
