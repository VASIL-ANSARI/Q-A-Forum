<p>First of all, your <code>node_update</code> is actually a <a href="http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/NodeSet" rel="nofollow"><code>NodeSet</code></a>, not the <a href="http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node" rel="nofollow"><code>Node</code></a> that you probably think it is. You need a <code>Node</code> if you want to call <code>inner_html=</code> on it:</p>

<pre><code>node_update[0].inner_html = 'true'
</code></pre>

<p>Then writing out the updated XML is just a bit of standard file manipulating combined with a <code>to_xml</code> call:</p>

<pre><code>File.open('whatever.xml', 'w') { |f| f.print(doc.to_xml) }
</code></pre>

<hr>

<p>As an aside, your input isn't valid XML. You have a <code>&lt;/details&gt;</code> but no <code>&lt;details&gt;</code>.</p>
