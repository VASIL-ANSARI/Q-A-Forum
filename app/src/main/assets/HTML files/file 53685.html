<p><code>ComponentThree</code> would be simpler if you just calculate the styles in render, rather than saving them in state. Currently you're doing bookkeeping on mount and when new props come, but the end result is that you have the styles that you need for when <code>render</code> is called. Instead, just calculate them in <code>render</code> and most of your code disappears. I suspect that your bug is a silly mistake somewhere, and by refactoring you'll likely end up removing the code causing your bug.</p>
