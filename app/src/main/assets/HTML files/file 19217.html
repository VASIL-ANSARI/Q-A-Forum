<p>The argument to Hash.new is used as the default value, in your case {}.</p>

<p>Every access to an unknown key uses that exact same object (ruby isn't magically duping it for you), so in your case the value for each key is the exact same hash. You can accomplish what I think you intended with the block form</p>

<pre><code>Hash.new {|hash, key| hash[key] ={} }
</code></pre>

<p>In this case a different empty hash is used for each missing key.</p>
