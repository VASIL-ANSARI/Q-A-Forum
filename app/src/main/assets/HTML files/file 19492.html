<p>One full answer :)</p>

<pre><code>using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace zielonka.co.uk.stackoverflow.StringParse
{
    class Program
    {
        static void Main(string[] args)
        {
            string a = "A:001,002,003|B999|C:002,003";
            StringBuilder b = new StringBuilder();
            //seperate out the |'s
            IList&lt;string&gt; main = a.Split('|');
            foreach (var VARIABLE in main)
            {
                //If there are multiple items
                if (VARIABLE.Contains(':'))
                {
                    //take the first letter
                    string initial = VARIABLE.Substring(0, 1);
                    string getNumberString = VARIABLE.Substring(2, VARIABLE.Length-2);//-2 = offset from start
                    //separate out the numbers
                    IList&lt;string&gt; numbers = getNumberString.Split(',');
                    foreach (var number in numbers)
                    {
                        if(b.Length==0)//first set
                            b.Append(initial + number);
                        else
                        {//Not first
                            b.Append("|" + initial + number);
                        }
                    }
                }
                else//This is a single entry
                {
                    if (b.Length != 0)
                    {
                        b.Append("|");
                    }
                    b.Append(VARIABLE);
                }
            }
            Console.WriteLine(b);
            Console.ReadKey();

        }
    }
}
</code></pre>
