<p>This can be done with the C library <a href="http://curl.haxx.se/" rel="nofollow">cURL</a>. A <a href="http://curb.rubyforge.org/" rel="nofollow">ruby binding</a> for that library exists, but it doesn't seem to support this functionality out of the box. However, it looks like there is <a href="http://www.idle-hacking.com/2008/07/updated-curb-multi-interface-patch/" rel="nofollow">a patch</a> adding/fixing it (example code is available on the page). I know this doesn't sound great, but it might be worth a try if there aren't any better suggestions.</p>
