<p>In your second foreach, you are overwriting your <code>$TimelineID</code> variable:</p>

<pre><code>foreach (array_combine($TimelineID, $UserTimelines) as $TimelineID=&gt;$timeline){
</code></pre>

<p>Just use something else like:</p>

<pre><code>foreach (array_combine($TimelineID, $UserTimelines) as $temp_TimelineID=&gt;$timeline){
</code></pre>
