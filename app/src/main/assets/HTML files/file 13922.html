<p>First of all - it's not the HTML that is not being displayed incorrectly, but your JavaScript seems to have some flaws here and there.</p>

<p>I think you're making things a bit more complex than necessary. There's a lot of challenges that others have already solved for you. It might be good to take a look at knockoutjs, which allows you to populate templates with an elegant JavaScript solution. Take a look at it, you might like it <a href="http://knockoutjs.com/" rel="nofollow">http://knockoutjs.com/</a></p>

<p>Good luck!</p>
