<p>I got it. It turns out that the code that I originally adopted put a single NULL character after the newlines following the handshake-response headers, and I hadn't noticed this. It looks like a) the browser moves all of the received websocket messages through a character buffer that leaves the single NULL character at the front once the authentication-response is processed, and b) it wasn't a problem until the -next- message was received.</p>

<p>Flow:</p>

<p>1) Browser (Chrome and Firefox) receives a handshake-response with an extra NULL on the end.<br>
2) Browser approves handshake response.<br>
3) Browser sends a message (in this case, with a "text" opcode, not that it necessarily matters) to the server.<br>
4) Server correctly decodes frames.<br>
5) Server sends a message back through established websocket session.<br>
6) Client complains about having an unexpected continuation frame.<br></p>

<p>Under some conditions, I believe that I was able to manipulate the message to suppress an error from the browser, but still did not receive the server-message in the browser.</p>

<p>As an example of the above, I believe that, originally, the server was sending an automatic text response of "response", and got the message above. I later changed this to "1234", and still got the message above. However, I changed this to "123", and no longer got the error, but still did not get a message event in the Javascript.</p>

<p>Dustin Oprea</p>
