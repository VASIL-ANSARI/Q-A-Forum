<p><code>store.filter</code> doesn't actually load the records, it will only return records that are already in the store. What you probably want to do is something like...</p>

<pre><code>App.BooksRoute = Ember.Route.extend({
  model: function() {
    var id = 1;

    // note: filters "books" properly but doesn't work in qunit
    return Ember.RSVP.hash({
      books: this.store.find('books').then(function(books){
        return books.filterBy('libraryId', id)
      }),
      library: this.store.find('library', id)
    });
  }
});
</code></pre>

<p>(disclaimer: the code above is untested but thats the idea)</p>
