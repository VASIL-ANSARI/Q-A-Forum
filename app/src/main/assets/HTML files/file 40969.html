<p>The id should be unique in the page. When you try to find multiple elements with the same id, you will only get the first element.</p>

<p>Use a class for the checkboxes instead:</p>

<pre><code>&lt;input type="checkbox" class="checkstate" name="diritems[]" value=".snap" onclick="javascript:Toggle(this);"&gt;
</code></pre>

<p>Now you can find all of them:</p>

<pre><code>$('.checkstate').change(function(){
  ...
</code></pre>
