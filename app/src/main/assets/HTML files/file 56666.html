<p>This is a common mistake with the <code>!(...)</code> syntax. Imagine something like this:</p>

<p><code>ls *!(.png|.jpg)</code></p>

<p>This doesn't do what we want because the <code>.png</code> and <code>.jpg</code> are matched by the <code>*</code>. So once we get to <code>!(.png|.jpg)</code>, the string is null.</p>

<p>To fix it, we can do:</p>

<p><code>ls !(*.png|*.jpg)</code></p>

<p>Thus, to fix your example:</p>

<p><code>const glob = 'src/js/!(*test|*stub).js'</code></p>

<p>Here's <a href="https://jsbin.com/pulacav/edit?js,console">a working example</a></p>
