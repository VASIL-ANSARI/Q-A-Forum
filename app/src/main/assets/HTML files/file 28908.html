<p>First of all you need to replace visibility and opacity with <code>display:none;</code> because display:none hides elements, and it will not take up any space. The element will be hidden, and the page will be displayed as if the element is not there.</p>

<p>I recommend you to use jQuery instead of CSS3 <code>transition</code> property because it is not supported by Internet Explorer 9, and earlier versions and Chrome 25, and earlier versions, requires the prefix <code>-webkit-</code> and other browsers like Opera Mini doesn't support transition.
[Source: <a href="http://caniuse.com/css-transitions" rel="nofollow">http://caniuse.com/css-transitions</a> ]</p>

<p>You have to use jquery <code>.slideToggle()</code> method to animate the drop down menu.</p>

<pre><code>function deactivateAll(item) {
    $("li").not(item).each(function(index, elem) {
        if ($(elem).hasClass("active")) {
            toggle(elem);
        }
    });
}

function toggle(elem) {
    $(elem).find("ul.submenu").stop(true, true).slideToggle("fast");
    $(elem).toggleClass("active");
} 

$(".container li").on("hover", function(e) {
    deactivateAll(this);
    toggle(this);
});
</code></pre>

<p><a href="http://jsfiddle.net/bK9mF/6/" rel="nofollow"><strong>jsFiddle</strong></a>.</p>
