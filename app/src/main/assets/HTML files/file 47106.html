<p>Handle an error condition, e.g.</p>

<pre><code>    if($run){
        // whatever
    } else {
        echo "&lt;script&gt;alert('SQL error: " 
           . htmlspecialchars(mysqli_error($link))
           . "');&lt;/script&gt;"
    }
</code></pre>

<p>As to figuring out why the statement isn't working, for debugging, emit the SQL text and test that in a different client.</p>

<hr>

<p>You're calling <code>mysqli_real_escape_string</code> function on some values, but not on others. So, your SQL <code>INSERT</code> statement is still vulnerable to SQL Injection.</p>

<p>A better pattern is to use a <strong>prepared statement</strong> with <strong>bind placeholders</strong>. It's really not that hard.</p>
