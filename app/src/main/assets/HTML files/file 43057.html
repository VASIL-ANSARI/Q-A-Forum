<p>You should write unit tests for your comparator to discover bugs. You should also factor your code better, because your function is very hard to understand. First, classify the product code into the "0" case, the year-included case, and the no-year case. If the two codes are not in the same class, return the appropriate result.</p>

<p>If they are in the same class, factor out the specific comparisons into separate functions, or even separate Comparators. Having separate Comparators makes them easier to test; separate functions would be harder to justify making public.</p>

<p>I found one bug by looking at the code: for <code>c.compare("0", "0")</code> it returns <code>-1</code> when it should return <code>0</code>. Beyond that, it's really hard to tell.</p>
