<p>You can use this function that gets the browser to encode it for you:</p>

<pre><code>function encodeWithPageEncoding(str) {
    var pathString = "http://a.b?";
    var el = document.createElement('a');
    el.href = pathString + str;
    return el.href.slice(pathString.length +1);
}
</code></pre>
