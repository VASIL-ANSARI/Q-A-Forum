<p>I tried to simplify your problem, this worked for me:</p>

<pre><code>#include &lt;cstdio&gt;
#include &lt;cv.h&gt;
#include &lt;highgui.h&gt;

using namespace cv;

void changeColor(int pos) {}

int main() {
    int value;

    cvNamedWindow("ColorSelector", 0);  //area for selecting colour of input
    cvCreateTrackbar("Red", "ColorSelector", &amp;value, 255, &amp;changeColor);

    char key = 0;
    Mat original = imread("/path/to/fileimage.png");
    while ((int)key != 27) {
        Mat temp = original.clone();
        for (int i = 0; i &lt; temp.rows; ++i) {
            for (int j = 0; j &lt; temp.cols; ++j) {
                temp.at&lt;uchar&gt;(i, j, 0) = value * (float)temp.at&lt;uchar&gt;(i, j, 0) / 255;
            }
        }

        imshow("ColorSelector", temp);
        key = waitKey(1);
    }
}
</code></pre>
