<p>You cannot overload macros in C99 -- you will need two different macros. With C11, there is some hope using <code>_Generic</code>.</p>

<p>I had developed something very similar -- a custom warning generator snippet for Visual Studio -- using macros. GNU GCC has some similar settings for compatibility with MSVS.</p>

<pre><code>#define STR2(x) #x
#define STR1(x) STR2(x)
#define LOC __FILE__ â(âSTR1(__LINE__)â) : Warning Msg: â
#define ERROR_BUILDER(x) printf(__FILE__ " (âSTR1(__LINE__)â) : Error Msg: â __FUNCTION__ â requires â #x)
</code></pre>

<p>The above lines take care of your arguments 1 to 3. Adding support for 4 would require inserting a <code>exit()</code> call within the macro. Also, create two different macro wrappers should you require to two different argument lists (the one with the default argument can delegate to the other macro). </p>

<pre><code>#define ERROR_AND_EXIT(msg, cond, errorcode) ERROR_BUILDER(msg) if (cond) exit(errorcode)
#define ERROR_AND_CONT(msg) ERROR_BUILDER(msg)
</code></pre>

<p>I had put up a detailed description <a href="http://mostlybuggy.wordpress.com/2012/04/17/visual-studio-custom-warnings-for-todos-code-reviews-etc/" rel="nofollow">here</a> (warning: that's my blog -- so consider it to be a shameless plug).</p>
