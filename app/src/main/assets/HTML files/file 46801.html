<p>You can use <code>GROUP BY UNIX_TIMESTAMP(sub1.sdate) DIV (30*60)</code> to group by 30 minute slot.</p>

<p>To show the slot start time you can use <code>FROM_UNIXTIME((UNIX_TIMESTAMP(sub1.sdate) DIV (30*60)) *30*60)</code></p>

<p>EDIT due the edited question:</p>

<p>Here is the matching code:</p>

<pre><code>SELECT * FROM  calls
RIGHT JOIN (
SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(@start)+(v1.v+v2.v+v3.v+v4.v+v5.v)*30*60) vv from
 (select 0 v union select 1) v1
 CROSS JOIN (select 0 v union select 2) v2
 CROSS JOIN (select 0 v union select 4) v3
 CROSS JOIN (select 0 v union select 8) v4
 CROSS JOIN (select 0 v union select 16) v5
) tx ON (FROM_UNIXTIME(UNIX_TIMESTAMP(time_of_call) DIV (30*60)*30*60)=vv)
WHERE  
 calls.calling_agent=@userid 
 AND calls.time_of_call IS NULL
 AND FROM_UNIXTIME(UNIX_TIMESTAMP(@start)+(v1.v+v2.v+v3.v+v4.v+v5.v)*30*60) &lt; @end;
</code></pre>
