<p>Return a <a href="https://firebase.google.com/docs/reference/js/firebase.Promise" rel="nofollow">Promise</a> from get listing. Consume the Promise using resolve and reject functions.</p>

<pre><code>var getListings = function () {
    return listingsRef.once("value");
};
</code></pre>

<hr>

<pre><code>var currentSnapshot;

function loadListing(){
    getListings().then(setListing, showError);
}

function setListing(snapshot){
    currentSnapshot = snapshot.val()
}

function showError(e){
    console.log(e);
}

function init(){
    loadListing();
}
</code></pre>

<hr>

<p>The other solution is the older way of using callbacks. This is not recommended as it can lead to unmanageable code if there are multiple nested async calls. Promises are a solution to the mess created by callbacks.</p>

<pre><code>var currentSnapshot;
function getListings() {
    listingsRef.once("value", setListing, showError);
};

function setListing(snapshot){
    currentSnapshot = snapshot.val()
}

function showError(e){
    console.log(e);
}

function init(){
    getListings();
}
</code></pre>
