<p>Build a list of strings to return; printing writes to <code>stdout</code> and that is not returned to the browser. </p>

<pre><code>db = sqlite3.connect('/root/example.db')
db.row_factory = sqlite3.Row
cursor = db.cursor()
cursor.execute('''SELECT id, message,date FROM table''')

results = []
for row in cursor:
    results.append('{0} : {1}, {2}'.format(row['id'], row['message'], row['date']))
db.close()


headers = [
    ('Content-Type', 'text/html; charset=utf-8'),
    ('Content-Length', str(sum(len(line) for line in results)))
]

start_response('200 OK', headers)

return results
</code></pre>
