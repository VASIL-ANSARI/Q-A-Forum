<p>If extract_content_type doesn't need any information contained in your Http_server class, it doesn't have to belong to that class. Really, it looks like you need a class for the request itself which can return its own content type. Then that request class could be tested.</p>
