<p>The code <em>has</em> changed.</p>

<p>In Python 2.7, the cache is a simple dictionary; if more than <code>_MAXCACHE</code> items are stored in it, the whole the cache is cleared before storing a new item. A cache lookup only takes building a simple key and testing the dictionary, see the <a href="http://hg.python.org/cpython/file/2.7/Lib/re.py#l226">2.7 implementation of <code>_compile()</code></a></p>

<p>In Python 3.x, the cache has been replaced by the <a href="http://docs.python.org/3/library/functools.html#functools.lru_cache"><code>@functools.lru_cache(maxsize=500, typed=True)</code> decorator</a>. This decorator does <em>much</em> more work and includes a thread-lock, adjusting the cache LRU queue and maintaining the cache statistics (accessible via <code>re._compile.cache_info()</code>). See the <a href="http://hg.python.org/cpython/file/3.3/Lib/re.py#l264">3.3 implementation of <code>_compile()</code></a> and of <a href="http://hg.python.org/cpython/file/3.3/Lib/functools.py#l174"><code>functools.lru_cache()</code></a>.</p>

<p>Others have noticed the same slowdown, and filed <a href="http://bugs.python.org/issue16389">issue 16389</a> in the Python bugtracker. I'd expect 3.4 to be a lot faster again; either the <code>lru_cache</code> implementation is improved or the <code>re</code> module will move to a custom cache again.</p>

<p>Update: With <a href="http://hg.python.org/cpython/rev/4b4dddd670d0">revision 4b4dddd670d0</a> the cache change has been reverted back to the simple version found in 3.1. Python versions 3.2.4 and 3.3.1 include that revision.</p>
