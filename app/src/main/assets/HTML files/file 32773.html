<p>On the line <code>if (*v&gt;*(v+1))</code>,  <code>v</code> is pointing to the <code>end</code> so you can't dereference it.</p>

<p>I guess you meant <code>it</code> rather than <code>v</code>, however that still needs work as <code>*(it+1)</code> will be invalid if <code>it</code> is pointing to one-before-the-end. </p>

<p>Also you should checkthe size of <code>ret</code> before just doing <code>ret[4]</code>. Or do <code>ret.at(4)</code> so at least you get an exception instead of a segfault.</p>
