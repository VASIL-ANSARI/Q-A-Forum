<p>Mask the hash value with <code>&amp;</code>:</p>

<pre><code>def hash_string(str, _width=2**32-1):
    hash = 3151
    for c in str:
        hash = ((hash &lt;&lt; 3) + (ord(c) &lt;&lt; 2) * 3)
    return hash &amp; _width
</code></pre>

<p>This manually cuts the hash back to size. You only need to limit the result once; it's not as if those higher bits make a difference for the final result.</p>

<p>Demo:</p>

<pre><code>&gt;&gt;&gt; hash_string("foo bar spam")
3355459964
</code></pre>
