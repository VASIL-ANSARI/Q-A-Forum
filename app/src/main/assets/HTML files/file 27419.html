<p>If you want to modify the tree, what you want is probably more a custom translation than a renderer actually. Renderes receive events in a streemed way so it's not always easy to do somthing depending on following events even if doable.</p>

<p>For transformations you can look at <a href="http://rendering.xwiki.org/xwiki/bin/view/Main/Extending#HAddinganewTransformation" rel="nofollow">http://rendering.xwiki.org/xwiki/bin/view/Main/Extending#HAddinganewTransformation</a>. You can also simply use the parser modify the generated XDOM and then render it, creating a translation is generally needed when you don't write yourself the code that parser and renderer.</p>

<p>If you still want to do it as a custom renderer the simplest it probably to extend the XHTML renderer and add you stuff, you have an example of extended XHTML renderer in <a href="https://github.com/xwiki/xwiki-rendering/tree/master/xwiki-rendering-syntaxes/xwiki-rendering-syntax-annotatedxhtml" rel="nofollow">https://github.com/xwiki/xwiki-rendering/tree/master/xwiki-rendering-syntaxes/xwiki-rendering-syntax-annotatedxhtml</a> (add annotation in the generated XHTML content using XML comments).</p>
