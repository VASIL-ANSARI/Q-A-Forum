<p>Why don't you try the following</p>

<p>Thread background = new Thread() {
            public void run() {</p>

<pre><code>            try{
                for(int s=0;s&lt;=100;s++)
                {

                    s=s+20;
                    sleep(1000);
                    progressbar.setProgress(s);
                }
            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
               //do some thing after you finish thread
            }
        }
    };
    background.start(); 
</code></pre>
