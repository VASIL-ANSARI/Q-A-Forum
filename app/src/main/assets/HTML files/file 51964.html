<p>Let me explain with your question :</p>

<blockquote>
  <p>Check IF user is logged in</p>
</blockquote>

<p>You need to set some value in session when user logs in your system,so that you can check that session value in each new request like you have said in your may be . i.e. <code>if(isset($_SESSION['email'])</code></p>

<blockquote>
  <blockquote>
    <p>Check WHAT user is logged in. ???? </p>
  </blockquote>
</blockquote>

<p>If you want to find out which user had logged in then also you have to set all the user info
 (id,username/first or last name etc) in you session same as you had saved
user email in session. </p>

<blockquote>
  <blockquote>
    <p>Retrieve logged in users randomString </p>
  </blockquote>
</blockquote>

<p>To retrieve logged in users randomString, you can query the database with the users info that you had kept in session when user logged in first time. i .e .</p>

<pre><code>Select randromString from users_table where id='$_SESSION['id']'; //i had suppose you had kept id of logged in user in session here . 
</code></pre>

<blockquote>
  <p>Display the random string</p>
</blockquote>

<p>To display the random string, yes now you simply echo the value of <code>$randomString</code> that you have retrieve from database using the query above. </p>
