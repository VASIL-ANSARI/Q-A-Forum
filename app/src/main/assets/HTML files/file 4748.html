<p>Since you're looping over all of the checkboxes every time, just empty the array at the beginning and only put checked items back in:</p>

<pre><code>ids = [];

if (this.checked) {    
    ids.push(this.id);
}
</code></pre>
