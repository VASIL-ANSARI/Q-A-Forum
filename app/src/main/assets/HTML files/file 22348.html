<p>If you have several statements and want to be sure that either all of them complete, or none of them, then you should use a transaction. There are many reasons an insert or update statement can fail, so it is a good idea to check.</p>

<p>use <code>BEGIN TRANSACTION</code> before your statements, and <code>COMMIT TRANSACTION</code> after them. In the case that you want to cancel any work done in the batch so far, you can also call <code>ROLLBACK TRANSACTION</code>. </p>

<p>Wrap these statements in <code>TRY/CATCH</code> blocks to try to gracefully handle any errors.</p>

<pre><code>BEGIN TRY
    BEGIN TRANSACTION
        --insert/update statements go here
    COMMIT TRANSACTION
END TRY

BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber
        ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState
        ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine
        ,ERROR_MESSAGE() AS ErrorMessage;

    IF @@TRANCOUNT &gt; 0
        ROLLBACK TRANSACTION;    
END CATCH
</code></pre>
