<p>What you are trying to do cannot work. From the <a href="https://www.gnu.org/software/make/manual/html_node/Conditionals.html" rel="nofollow">documentation</a>: </p>

<blockquote>
  <p>Conditionals control what 'make' actually "sees" in the makefile, so they <em>cannot</em> be used to control recipes at the time of execution.</p>
</blockquote>

<p>The way I put it is that conditionals are evaluated at the time the Makefile is read. So <code>make</code> reads your Makefile, your conditional is false and it is removed.</p>
