<p>Your $con isn't set inside your function, so mysqli won't work. Additionally you're using backticks around the value you're searching for <code>$_SESSION['user_id']</code> backticks are for column names, you should use <code>'</code> around values.</p>

<p>try it like this:</p>

<pre><code>&lt;?php
include 'connection.php';
function getusername($con){
   $query = "SELECT `username` FROM `members` WHERE `ID`='".$_SESSION['user_id']."'";
   if($result = mysqli_query($con, $query)){
       $row = mysqli_fetch_assoc($result);
       mysqli_free_result($result);
       return $row['username'];
   }
}
?&gt;
</code></pre>

<p>Then call it passing <code>$con</code> to the function:</p>

<pre><code> $username=getusername($con);
</code></pre>

<p>On a side note your <code>mysqli_free_result</code> doesn't work if there are results as the <code>return</code> will stop the function. I updated the function a bit for it to work as you expect.</p>
