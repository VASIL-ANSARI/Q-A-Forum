<p>The reason you're getting undefined references is because you're linking your libraries in the wrong way. A linker works in an incremental order - it looks at the first file you provided and gathers a list of things that file references but can't be found. Then the linker moves onto the next library and does the same thing, but also looks for opportunities to fix the undefined references from the previous libraries.</p>

<p>The reason that <code>ld</code> can't find <code>function_in_lib</code> is because it links <code>file.o</code> after the libraries and therefore doesn't get a chance to fill in the references that <code>file.o</code> requires. If you're looking for more specifics about linking and why you're running into this problem, <a href="http://www.lurklurk.org/linkers/linkers.html" rel="nofollow">this</a> is a pretty good introduction. </p>

<p>If you just want to fix your problem, move the library files to after <code>file.o</code> in your command, i.e.</p>

<pre><code>ld -o linked file.o lib1.a lib2.a -lc
</code></pre>
