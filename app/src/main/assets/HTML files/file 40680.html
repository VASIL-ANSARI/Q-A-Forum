<pre><code>//DECLARE  price_1 and 2 first 

SELECT SUM(`price`) INTO price_1  from data where sale = 14 ;
SELECT MAX(price_others) INTO max_price FROM 
( 
  SELECT SUM(`price`) as price_others, sale  FROM data 
  where sale != 14 GROUP BY sale 
) TMP ;

IF price_1 &gt; max_price THEN 
  SET New.price=1.99;
END IF ;
</code></pre>
