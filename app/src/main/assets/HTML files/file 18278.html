<p><code>strtok</code> operates by modifying the string that you pass; this is easy to miss when using some man pages. Each command in your array is a literal string: attempts to modify them will cause problems. So you'll need to make a <em>copy</em> of each command before using it with <code>strtok</code>.</p>

<p>Furthermore, this is an invalid initialization for an array:</p>

<pre><code>char str[] = arrayOfCommands[i];
</code></pre>

<p>Declare <code>str</code> as an array of some fixed size, then use <code>strncpy</code> to make copies of each command before tokenizing them using <code>strtok</code>:</p>

<pre><code>char str[MAX_COMMAND_LEN + 1];
strncpy(str, arrayOfCommands[i], MAX_COMMAND_LEN);

// ...
</code></pre>
