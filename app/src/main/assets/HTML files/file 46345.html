<p>You are not checking if fopen is actually returning a file pointer resource or a false result. It is likely returning false and throwing the warning that a boolean is provided.</p>

<p>Also, you could use:</p>

<pre><code>$line = str_replace("village", "village/", fgets($source));
</code></pre>
