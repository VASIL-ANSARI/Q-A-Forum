<p>I'm unsure how does one use YAML fixtures these days. Have you tried <a href="https://github.com/thoughtbot/factory_girl" rel="nofollow">FactoryGirl</a> for creating db object instances while testing? It does pretty much the same as fixtures, in a much sophisticated way though.</p>

<p>The following passages assumes you are using <code>rspec</code> as a testing framework.</p>

<p>After including <code>factory_girl-rails</code> in your <code>Gemfile</code> and updating <code>spec/spec_helper.rb</code> accordingly to the <code>factory_girl</code>s README, create the following files:</p>

<pre><code># spec/factories/company_factories.rb
FactoryGirl.define do
  factory :company do
    title { |n| "Test Company #{n}" }

    # whatever else fields

    after_create { |company| company.regions &lt;&lt; FactoryGirl.create(:region) }
  end
end

# spec/factories/region_factories.rb
FactoryGirl.define do
  factory :region do
    # whatever fields here
  end
end

# spec/factories/request_factories.rb
FactoryGirl.define do
  factory :request do        
    # whatever fields here
  end
end
</code></pre>

<p>Now the real question is - what's the actual test code you're doing?</p>
