<p>This looks for files in a directory that were modified less than 5 seconds ago - there is NO error checking.</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;time.h&gt;
#include &lt;dirent.h&gt;

void dirchk(const char *arg)  // arg=name of directory
{
    time_t when = time(NULL) -5; // 5 secs ago
    struct stat st;
    DIR *dirp=opendir(arg);
    struct dirent *d=readdir(dirp);
    while (d != NULL)
    {
        if ((d = readdir(dirp)) != NULL) 
        {
            stat(d-&gt;d_name, &amp;st);
            if( when - st.st_mtime  &lt;=5 )
               printf("%s\n", d-&gt;d_name);
        }
    } 
    closedir(dirp);
    return;
}

int main()
{
   dirchk(".");
   return 0;
}
</code></pre>

<p>"." is the current working directory.</p>
