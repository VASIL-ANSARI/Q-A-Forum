<p>I think you have to mention user field in where clause, Can you try below code</p>

<pre><code>cust.each do |c|
      if c.contracts.where(user: users.find(session[:login]))
        @customers &lt;&lt; c
      end
end
</code></pre>
