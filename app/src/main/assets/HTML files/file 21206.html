<blockquote>
  <p>The code does not reach there when the client close the window, why?</p>
</blockquote>

<p>Because this event is not supposed to be invoked when the client closes his browser. This event (as its name suggests) is intended to be invoked when the session expires. The default session expiration timeout is 20 minutes so this event will be invoked 20 minutes after the client has closed his browser.</p>

<p>Oh and there's a very important gotcha you should be aware of: if you are using an out-of-process session state mode (such as StateServer or SqlServer) this event will <strong>never</strong> be invoked.</p>
