<p>each time you print a line you override the previous one. Also you're using jsonencode with a nonarray I think thats why it gives you false, try this:</p>

<pre><code>$file = fopen('food.csv', 'r');
$allfile = [];
while (($line = fgetcsv($file)) !== FALSE) {
  print_r($line);
  $allfile[] = $line;
}
fclose($file);
?&gt;

&lt;script type="text/javascript"&gt;
var data = &lt;?php echo json_encode($allfile); ?&gt;;
document.write(data);
&lt;/script&gt;
</code></pre>
