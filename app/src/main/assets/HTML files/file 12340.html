<blockquote>
  <p><em>I noticed one more thing when we do <code>session.getId();</code> and <code>pageContext.getSession().getId();</code> both of them are returning different Id's? Is this expected to me they should be same anyone differ on that?</em></p>
</blockquote>

<p>No, they should definitely not differ. I however assume that you have examined them within the <strong>same</strong> request. If you examined them in <em>different</em> requests, then the difference can be explained by the absence of the proper JSESSIONID cookie. Cookies are domain and context specific. You're apparently sending the ajax request to a different domain/context. The leading slash <code>/</code> in the ajax URL also confirms this less or more. Make sure that you're sending it to the <strong>same</strong> domain/context. Use a context-relative URL, something like as <code>url: "AjaxXML.jsp"</code> and move the code to the same domain/context, or turn on session sharing between different contexts at server level.</p>

<hr>

<p><strong>Unrelated</strong> to the concrete problem, doing the Ajax response handling in a JSP is a bad idea. Rather do it in a servlet. </p>

<p>Replace</p>

<pre><code>url: "/com/tp/AjaxXML.jsp",
</code></pre>

<p>by</p>

<pre><code>url: "/com/tp/AjaxXML",
</code></pre>

<p>and put the code in <code>doPost()</code> method of the servlet which is mapped on that URL pattern.</p>

<h3>See also:</h3>

<ul>
<li><a href="http://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax">How to use Servlets and Ajax?</a></li>
</ul>
