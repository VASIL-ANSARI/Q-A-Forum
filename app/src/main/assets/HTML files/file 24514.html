<p>My guess: You don't check the return code from <code>read</code>.</p>

<p>Could it be that <code>read</code> returns nothing the second and third times round the loop but the buffer still contains the old data?</p>
