<p>The second method you posted will work if the userdata already has a metatable with a table assigned to the __index field. A metatable cannot be assigned to a userdata from Lua for safety reasons. So, you must assign the userdata a metatable from your Java binding code. </p>

<pre><code>lua_newuserdata(L, SOME_SIZE);
luaL_newmetatable(L, "userData.mt");
lua_setmetatable(L, -2);
</code></pre>

<p>If the metatable does not already have an __index table, then create one.</p>

<pre><code>local mt = getmetatable(userData)
mt.__index = {
    newMethod = function()
        print('It works!')
    end
}
</code></pre>
