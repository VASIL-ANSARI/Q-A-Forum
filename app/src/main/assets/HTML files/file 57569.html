<p>Your problem is very similar to <a href="http://stackoverflow.com/questions/13261502/parse-int-or-double-using-boost-spirit-longest-d">this question</a>.</p>

<p>When the integer parser occurs first in your grammar, it is preferred. For the input <code>"12.9"</code> the parser will parse the integer part of <code>"12.9</code> which is <code>12</code> and will stop at the <code>.</code>. <kbd><a href="http://coliru.stacked-crooked.com/a/580ba878885ce97c">live example</a></kbd></p>

<p>You have to reverse the order so the double parser is preferred over the integer one:</p>

<pre><code>const auto double_or_int =  boost::spirit::x3::double_ | boost::spirit::x3::int32;
</code></pre>

<p>This will now work for <code>"12.9"</code>: <kbd><a href="http://coliru.stacked-crooked.com/a/56acdb965ae4f0a6">live example</a></kbd></p>

<p>However, since a double parser also parses an integer, you will always get a double, even if the input is <code>"12"</code>:  <kbd><a href="http://coliru.stacked-crooked.com/a/0cae3a6ce2a5dc3c">live example</a></kbd></p>

<p>In order to prevent this, you need a strict double parser:</p>

<pre><code>boost::spirit::x3::real_parser&lt;double, boost::spirit::x3::strict_real_policies&lt;double&gt; &gt; const double_ = {};
</code></pre>

<p><kbd><a href="http://coliru.stacked-crooked.com/a/859581a2f4392796">live example</a></kbd></p>
