<blockquote>
  <p>I know I can add pragma warning push and pop in main.cpp but this
  approach will only work for windows.</p>
</blockquote>

<p>GCC has <a href="https://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html" rel="nofollow">diagnostic pragmas</a>, MSVC <a href="https://msdn.microsoft.com/en-us/library/2c8f766e.aspx" rel="nofollow">warning pragmas</a>. Just check for the compiler: MSVC has <strong>_MSC_VER</strong>, GCC has <strong>__GNUC__</strong> predefined.</p>

<blockquote>
  <p>Is there a way I can set different warning levels for different files
  in CMake?</p>
</blockquote>

<p><a href="https://cmake.org/cmake/help/v2.8.12/cmake.html#command:set_source_files_properties" rel="nofollow">set_source_files_properties</a> allows you to add compile flags to specific source files to override previous options.</p>

<hr>

<p>You just want to isolate warnings of these (bad written) headers, not of your whole source file, so using pragmas for these includes is the safer way.</p>
