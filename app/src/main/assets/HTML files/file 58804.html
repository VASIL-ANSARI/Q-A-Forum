<p>OK, this was probably the dumbest problem I've faced (my fault). My <code>equals(Object o)</code> method in the <code>MyEntity</code> class, which I had overridden, wasn't working properly, so Java couldn't actually tell one entity from another. Fixed that part, fixed the whole problem.</p>

<p>So, just in case this helps anybody else, please check your <code>equals(Object o)</code> methods if you are getting duplicates in HQL.</p>
