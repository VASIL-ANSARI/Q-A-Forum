<p>Your <code>foreach</code> is misplaced.  You want to bind the template foreach of the widgets.</p>

<pre><code>&lt;div class="row" data-bind="template: { name: getTemplate,
                                        foreach: widgets,
                                        afterRender: $root.afterAddWidget }"&gt;&lt;/div&gt;
</code></pre>

<p>The way you have it set up, you're telling knockout to render your mapping as the items for the template.</p>
