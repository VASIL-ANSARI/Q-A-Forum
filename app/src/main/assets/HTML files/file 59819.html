<p>Just using ruby (untested, I may have forgot something there):</p>

<pre><code>ruby_block 'wait for tomcat' do
  block do
    iter=0
    until ::File.exists?('/usr/share/tomcat/webapps/system/WEB-INF') || iter &gt; 5 do
      sleep 6
      iter++
    end
    raise "Timeout waiting for tomcat startup" unless iter &lt;= 5
  end
end
</code></pre>

<p>But this kind of construct usually means you're falling into the converge  vs compile problem. and thus you're probably trying to solve an XY problem. As the tomcat may not start before the end of the run anyway.</p>

<p>TL;DR: you're trying to code a state change instead of describing a resulting state, this goes against Configuration Management philosophy.</p>
