<p>When you run <code>exec expression</code>, it executes the code contained in <code>expression</code> in the current scope (see <a href="http://docs.python.org/2/reference/simple_stmts.html#exec" rel="nofollow">here</a>). Apparently inside a class, the function in your expression are dropping out of scope before <code>main</code> is run. I honestly have no idea why (it seems to me like it should work) but maybe someone can add a complete explanation in a comment.</p>

<p>Anyway, if you specifically provide a scope for the expression to be evaluated in, (which is good practice anyway so that you don't pollute your namespace), it works fine inside the class.</p>

<p>So, replace the line:</p>

<pre><code>    exec source
</code></pre>

<p>with</p>

<pre><code>    exec source in {}
</code></pre>

<p>and you should be right!</p>

<p>Here we provide an empty dictionary as a the globals() and locals() dctionaries during the evaluation of your expression. You can keep this dictionary if you want, or let it be garbage collected immediately as I have demonstrated in my code. This is all explained in the exec documentation in the link above.</p>
