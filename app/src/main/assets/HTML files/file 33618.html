<p><code>Document.setTimeout</code> is not a standard function. If you are looking for a delayed function, as it seems that you are, <code>window.setTimeout</code> is correct. </p>

<p>All references that do not resolve to the local scope rising to the parent scope and likewise to its parent's parent's scope. The topmost scope is <code>window</code> which is why <code>setTimeout === window.setTimeout</code> if the function is not declared elsewhere in usable scopes. </p>

<p>Your error is probably not in using the timeout function. I do note that you have references like <code>ctx</code> that is not defined in this block. Please post more code for more help. </p>
