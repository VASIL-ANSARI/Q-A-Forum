<p>You can use this simpler regex:</p>

<pre><code>str = str.replaceFirst("_(%\\S*|[^_\\s]+)\\b", "");
</code></pre>

<p>i.e. match an underscore followed by 2 alternations:</p>

<ul>
<li><code>%</code> and 0 or more non-space chars</li>
<li>1 or more of non-underscore and non-space chars</li>
</ul>

<p>This all should be followed by a word boundary.</p>

<p><a href="https://regex101.com/r/zO6gC2/1" rel="nofollow">RegEx Demo</a></p>
