<p>The idea of a generic sanitation function is a broken concept.</p>

<p>There is <strong>one</strong> right sanitation method for every purpose. Running them all indiscriminately on a string will often break it - escaping a piece of HTML code for a SQL query will break it for use in a web page, and vice versa.  Sanitation should be applied <strong>right before</strong> using the data:</p>

<ul>
<li><p>before running a database query. The right sanitation method depends on the library you use; they are listed in <a href="http://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php">How can I prevent SQL injection in PHP?</a> </p></li>
<li><p><code>htmlspecialchars()</code> for safe HTML output</p></li>
<li><p><code>preg_quote()</code> for use in a regular expression</p></li>
<li><p><code>escapeshellarg()</code> / <code>escapeshellcmd()</code> for use in an external command</p></li>
<li><p>etc. etc.</p></li>
</ul>

<p>Using a "one size fits all" sanitation function is like using five kinds of highly toxic insecticide on a plant that can by definition only contain one kind of bug - only to find out that your plants are infested by a sixth kind, on which none of the insecticides work.</p>

<p>Always use that one right method, ideally straight before passing the data to the function. <em>Never</em> mix methods unless you need to.</p>
