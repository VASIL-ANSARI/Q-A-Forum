<p>Any specific reason why you are using floating point images? If not, try adjusting the image initialization to:</p>

<pre><code>IplImage *img = cvCreateImage(cvSize(600, 300), IPL_DEPTH_8U, 3);
</code></pre>

<p>The use of a 3-channel 8-bit image seems to fix the problem. </p>

<p>Just a note - when assigning color to floating point images the value should be in the range [0, 1], not [0, 255]. Also, the C++ api is much nicer!</p>
