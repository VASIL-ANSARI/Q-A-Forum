<p>On <a href="http://cometd.org" rel="nofollow">http://cometd.org</a> there is everything you need.</p>

<p>In order to build a very simple example (web application with Javascript client) you need to read in particular:</p>

<ul>
<li><a href="http://cometd.org/documentation/2.x/cometd-javascript" rel="nofollow">This</a> for the client side</li>
<li><a href="http://cometd.org/documentation/2.x/cometd-java/server/configuration" rel="nofollow">This</a> for the server side (configuration)</li>
<li><a href="http://cometd.org/documentation/2.x/cometd-java/server/services" rel="nofollow">This</a> for the server side (code). From this menu you may want to start with using the first and third bullet points: Inherited Services for the code that echoes the inputed message, and Server Services Integration for the setup of the Bayeux Server through a configuration servlet.</li>
</ul>

<p>In the pages that I have linked there is all the code necessary, just copy and paste it. In case, come back with more specific questions.</p>

<hr>

<p>EDITED</p>

<p>After looking at your code, I see that for the service configuration you need to copy the code for ConfigurationServlet class from <a href="http://cometd.org/documentation/2.x/cometd-java/server/services/integration" rel="nofollow">here</a> and for the EchoService class you need to modify the processEcho method as follows:</p>

<pre><code>remote.deliver(getServerSession(), "/echo", data, null);
</code></pre>

<p>with <code>data</code> being an HashMap defined as explained <a href="http://cometd.org/documentation/2.x/cometd-java/server/services/inherited" rel="nofollow">here</a> (first example).</p>

<p>On the client side, I'd subscribe to the channel before publishing your request (I am not sure if it works in your way either)</p>
