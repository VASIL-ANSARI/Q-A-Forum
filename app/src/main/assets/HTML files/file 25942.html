<p>The System Configuration framework is a C api, so it's a little bit messy, but this <em>should</em> work ok without leaking:</p>

<pre><code>#import &lt;SystemConfiguration/SCNetworkConfiguration.h&gt;

SCDynamicStoreRef storeRef = SCDynamicStoreCreate(NULL, (CFStringRef)@"GetWorkgroup", NULL, NULL);
CFPropertyListRef global = SCDynamicStoreCopyValue (storeRef,CFSTR("State:/Network/Global/SMB"));
id workgroup = [(__bridge NSDictionary *)global valueForKey:@"Workgroup"];
NSLog(@"Workgroup: %@", workgroup);
CFRelease(global);
CFRelease(storeRef);
</code></pre>
