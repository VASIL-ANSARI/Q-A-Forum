<p><strong>Use the <code>toArray</code> method which takes an array as an argument.</strong></p>

<p>This uses the array you specify to fill the data, and maintains the typing so you don't need to typecast.  Additionally, you should keep the generic <code>&lt;Object&gt;</code> in the definition.</p>

<pre><code>ArrayList&lt;Object&gt;[] values =
     sharedLocks.values().toArray(new ArrayList&lt;Object&gt;[sharedLocks.size()]);
</code></pre>

<p>One more thing to consider is if multiple threads can modify this <code>HashMap</code>.  In this case, you will want to synchronize this line of code to the <code>HashMap</code> and make sure all modifications are also synchronized.  This will make sure that other threads won't modify the contents between the <code>.size()</code> call and the <code>.toArray()</code> call, which is possible.</p>
