<p>Try this query which uses CASE to count only those rows we need.</p>

<pre><code>SELECT nb_lines,nb_val_1,nb_val_0, nb_val_1/nb_val_0 FROM
 (SELECT COUNT (t1.ID) nb_lines, 
        COUNT (CASE
                WHEN t1.val = 1
                  THEN 1
                ELSE NULL
               END) nb_val_1, 
        COUNT (CASE
                WHEN t1.val = 0
                  THEN 1
                ELSE NULL
               END) nb_val_0
   FROM tabless t1);
</code></pre>
