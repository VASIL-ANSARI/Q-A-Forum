<p>Note that you can pass a <em>function</em> as the <code>repl</code> argument to <a href="https://docs.python.org/2/library/re.html#re.sub" rel="nofollow"><code>re.sub</code></a>, which will be passed a single <code>match</code> object <em>"for every non-overlapping occurrence of <code>pattern</code>"</em>:</p>

<pre><code>def decrement(match):
    """Decrement the number in the match."""
    return str(int(match.group()) - 1)
</code></pre>

<p>Note that this is expecting <code>match.group()</code> to represent an integer; to only capture the number, and not include the <code>&gt;</code> and <code>&lt;</code>, use lookarounds (see <a href="https://regex101.com/r/hD2tT3/1" rel="nofollow">demo</a>):</p>

<pre><code>page_num = re.compile(r'''
    (?&lt;=&gt;) # a &gt; before the group
    \d+    # followed by one or more digits
    (?=&lt;)  # and a &lt; after the group
''', re.VERBOSE)
</code></pre>

<p>This works as you require:</p>

<pre><code>&gt;&gt;&gt; page_num.sub(decrement, line)
'&lt;p class="index"&gt;breakeven volume (BEV), &lt;a href="ch02.xhtml#page28"&gt;27&lt;/a&gt;&lt;/p&gt;'
</code></pre>

<p>and can be applied similarly for <code>'#page28"'</code>.</p>

<p>However, note that you should generally use <em>an actual HTML parser</em>, not regular expressions, for parsing HTML (which <strong>isn't</strong> a regular language).</p>
