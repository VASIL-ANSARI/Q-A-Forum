<p>It was easier than I thought.
I'm using the new UIViewPropertyAnimator and when pan .ended I just check whether the targets y-position should snap to the top, bottom or middle by comparing it to the height of the UIScreen.</p>

<pre><code>        animator!.addAnimations({
            print(target.frame.origin.y)

            if (target.frame.origin.y &gt; UIScreen.main.bounds.height / 2) {
                if (target.frame.origin.y &gt; (UIScreen.main.bounds.height - 50)) {
                    target.frame = CGRect(x: 0, y: UIScreen.main.bounds.height - 25, width: self.view.frame.width, height: self.view.frame.height)
                } else {
                target.frame = CGRect(x: 0, y: UIScreen.main.bounds.height - 95, width: self.view.frame.width, height: self.view.frame.height)
                }
            } else {
                target.frame = CGRect(x: 0, y: 120, width: self.view.frame.width, height: self.view.frame.height)
            }
        })
        animator!.startAnimation()
</code></pre>
