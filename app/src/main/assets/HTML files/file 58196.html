<p>You have to store current minimum and current maximum profit:</p>

<pre><code>auto min = v.begin();
auto max_profit = 0;
for (auto it = v.begin(); it != v.end(); ++it) {
    if (*it &lt; *min) {
        it = min;
    }
    max_profit = std::max(max_profit, *it - *min);
}
</code></pre>

<p>so for <code>{65, 50, 100, 150, 0, 42}</code>, <code>max_profit</code> would be <code>100</code>.</p>
