<ol>
<li>HTTP request is made</li>
<li>Error response comes back</li>
<li>Interval 1 is created calling checkConnection every 10 seconds</li>
<li>HTTP request is made</li>
<li>Error response comes back</li>
<li>Interval 2 is created calling checkConnection every 10 seconds</li>
<li>HTTP request is made</li>
<li>Success response comes back</li>
<li>Interval 2 is cancelled</li>
</ol>

<p>â¦ but interval 1 is still running.</p>

<hr>

<p>Don't start the interval inside the error response. Either do it as the means by which you start the very first run of checkConnection or use <code>setTimeout</code> instead.</p>

<p><code>setTimeout</code> is probably better as it will avoid race conditions in which the request takes more than 10 seconds to get a response.</p>
