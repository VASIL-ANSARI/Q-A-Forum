<p>you could use 2 separate locations for your static files</p>

<p>Here's some express code:</p>

<pre><code>if (process.env.MODE === "production") {
  app.use(express['static'](__dirname + '/min'));
} else {
  app.use(express['static'](__dirname + '/normal'));
}
</code></pre>

<p>and start node with</p>

<pre><code>MODE=production node app.js
</code></pre>

<p>Furthermore, if you don't want to duplicate all your files, you could take advantage of the fact that express static router stops at the first file, and do something like this instead:</p>

<pre><code>if (process.env.MODE === "production") {
  app.use(express['static'](__dirname + '/min'));  // if minized version exists, serves it
}
app.use(express['static'](__dirname + '/normal'));  // fallback to regular files
</code></pre>

<p>Using the same name for minimized or not is going to cause problem with browser caching, though.</p>
