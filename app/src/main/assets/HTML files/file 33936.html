<p>After two days of googling and trying all kind of combinations I finally found out how to do this. Here is an example using a <code>QComboBox</code> putting an item and getting it back. <code>IDataContainer *</code> is an arbitrary class which is not related to Qt.</p>

<pre><code>Q_DECLARE_METATYPE(IDataContainer *)

void MainFrame::initContainerBox(QComboBox *oBox)
{
    IDataContainer *idc = new CSVContainer();
    QVariant v;
    v.setValue(idc);

    oBox-&gt;addItem(idc-&gt;getContainername(), v);
    QVariant v2 = oBox-&gt;itemData(oBox-&gt;currentIndex());

    IDataContainer *idc1 = v2.value&lt;IDataContainer *&gt;();
    if(idc1 == idc)
        printf("Test\n");
}
</code></pre>

<p>So with my first approach of using <code>value()</code> I was on the right track, the only missing bits were how to set the value and using the macro <code>Q_DECLARE_METATYPE(IDataContainer *)</code>.</p>

<p>Apparently using the constructor doesn't work, so one has to call <code>setValue()</code> instead. If somebody knows how to use the constructor it would be nice to show it.</p>
