<p>I have experienced this problem many of times when using AJAX so here are my initial thoughts:</p>

<p>Is "ip" defined? <strong>url: ip + "php/insert_img.php"</strong></p>

<p>Also I found removing some of the extra AJAX options fixed the issue. Amended code below:</p>

<pre><code>$(document).on('change', 'input[name="photo"]', function(){

    var file = this.files[0];
    var formData = new FormData();
    var user = localStorage.getItem("user");

    formData.append('_file', file);
    formData.append('_user', user);

    $.ajax({
        type: "POST",
        url: ip + "php/insert_img.php",
        data: formData,
        success: function (e) {
            // do something
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(textStatus, errorThrown);
        }
    });

});
</code></pre>

<p>Hope this helps.</p>

<p><strong>---------- EDIT ----------</strong></p>

<p>After a bit of searching around, I believe the issue is where you're appending the <code>_file</code> and <code>_user</code> data. If the values of this data is an array you will have to "stringify" it:</p>

<pre><code>formData.append('_file', JSON.stringify(file));
formData.append('_user', JSON.stringify(user));
</code></pre>
