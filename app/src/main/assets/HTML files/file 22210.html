<p>From the <a href="http://www.php.net/manual/en/function.eregi.php" rel="nofollow">PHP documentation</a>:</p>

<blockquote>
  <p>eregi() is deprecated as of PHP 5.3.0. preg_match() with the i (PCRE_CASELESS) modifier is the suggested alternative. </p>
</blockquote>

<p>So replace your <code>eregi</code> calls:</p>

<pre><code>if ($file != "." &amp;&amp; $file != ".." &amp;&amp; !eregi(".jpg".$thumbext."$",$file) &amp;&amp; eregi(".jpg$",$file)){
</code></pre>

<p>by <a href="http://www.php.net/manual/en/function.preg-match.php" rel="nofollow"><code>preg_match()</code></a> :</p>

<pre><code>if ($file != "." &amp;&amp; $file != ".." 
    &amp;&amp; !preg_match("/\.jpg". preg_quote($thumbext)."$/i",$file) 
    &amp;&amp; preg_match("/\.jpg$/i",$file)){
</code></pre>

<p>Note that I'm using <a href="http://www.php.net/manual/en/function.preg-quote.php" rel="nofollow"><code>preg_quote()</code></a> to prepare <code>$thumbext</code> for usage in a regular expression.</p>
