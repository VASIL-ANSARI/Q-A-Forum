<p>You can calculate N and M like this</p>

<pre><code>N=max(foo)+1
M=max(max(x) for x in foo.values())+1
fooarray = numpy.zeros((N, M))
for key1, row in foo.iteritems():
   for key2, value in row.iteritems():
       fooarray[key1, key2] = value 
</code></pre>

<p>There are <a href="http://docs.scipy.org/doc/scipy-0.14.0/reference/sparse.html" rel="nofollow">various options</a> for sparse arrays. Eg,</p>

<pre><code>import scipy.sparse
foosparse = scipy.sparse.lil_matrix((N, M))
for key1, row in foo.iteritems():
   for key2, value in row.iteritems():
       foosparse[(key1, key2)] = value 
</code></pre>
