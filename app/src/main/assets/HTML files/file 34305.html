<p>I'd stick to raw system calls. Forget <code>freopen()</code> and use <code>open()</code>. The stdio routines work with <code>FILE*</code> streams while the syscalls work with integer file descriptors. Mixing the two guarantees serious trouble. ;-)</p>

<p>Redirection goes in 4 steps</p>

<ul>
<li><code>open()</code> file to redirect to/from, returns an <code>fd</code></li>
<li><code>close()</code> file to redirect, 0 for stdin, 1 for stdout</li>
<li><code>dup(fd)</code> fd was returned by <code>open()</code> in the 1st step</li>
<li><code>close(fd)</code> you don't need it enymore</li>
</ul>

<p>The trick is that <code>dup()</code> returns the lowest available integer for a new file descriptor. If you've just closed stdout <code>1</code>, it will return <code>1</code>, and suddenly your stdout is pointing to the previously opened file.</p>
