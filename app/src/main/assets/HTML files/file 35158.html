<p>Your question is not clear, and the code you posted is too broad.</p>

<p>I can't debug regular expressions with the power of my sight, but there's a number of things you can do to simplify the code. Simple code means less errors, and an easier time debugging.</p>

<p>To locate your target files, use <a href="https://docs.python.org/2/library/glob.html" rel="nofollow"><code>glob.glob</code></a>:</p>

<pre><code>files = glob.glob('dir/*.xml')
</code></pre>

<p>To parse them, ditch regular expressions and use the <a href="https://docs.python.org/2/library/xml.etree.elementtree.html" rel="nofollow"><code>ElementTree</code></a> API.</p>

<pre><code>import xml.etree.ElementTree as ET
tree = ET.parse('target.xml')
root = tree.getroot()
</code></pre>

<p>There's also modules to navigate XML files with CSS notation and XPATH. Extracting fields form the filename using regex is okay, but check out <a href="https://docs.python.org/2/library/re.html" rel="nofollow">named groups</a>.</p>
