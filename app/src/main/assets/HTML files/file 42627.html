<p>change:</p>

<pre><code>$sql="SELECT  message,timestamp from pm WHERE (from_user='".$_SESSION["username"]."' OR from_user='$touser') AND (to_user='$touser' OR to_user='".$_SESSION["username"]."') ORDER BY timestamp";
</code></pre>

<p>to</p>

<pre><code>$sql="SELECT  message,timestamp,from_user  from pm WHERE (from_user='".$_SESSION["username"]."' OR from_user='$touser') AND (to_user='$touser' OR to_user='".$_SESSION["username"]."') ORDER BY timestamp";
</code></pre>

<p>and then check during while specific class depending on who was a sender:</p>

<pre><code>if ($result['from_user'] == $_SESSION["username"])
    echo '&lt;div class="message-view-sender" style="background-color: yellow;"&gt;';
else
    echo "&lt;div class='message-view'&gt;";
</code></pre>
