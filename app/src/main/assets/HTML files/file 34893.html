<p>The regular expression <code>/".*?"/</code> is matching the quotes in <code>&lt;span style="color:#f92772;"&gt;</code> that were created in the <code>for</code> loop, so that replacement is turning that into <code>&lt;span style=&lt;span style="color:red;"&gt;"color:#f92772;"&lt;/span&gt;&gt;</code>. This isn't valid HTML.</p>

<p>You presumably need to restrict your replacement to text nodes, not HTML tags.</p>
