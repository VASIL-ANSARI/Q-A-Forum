<p>You can do this by putting your code inside a function and then call it from the other scripts as per your need.</p>

<p>Main script:</p>

<pre><code> &lt;?php

// get_records.php

function execute()
{
    // get_records.php

    include_once("connect2db.php");

    if (empty($_GET)) {
        $artists = json_encode(mysqli_fetch_all($mysqli-&gt;query("SELECT artist from `artists`"), MYSQLI_ASSOC));
        $response = $artists;
    } else {
        if (isset($_GET["artist"])) {
            $artist = test_input($_GET["artist"]);
            if (isset($_GET["album"])) {
                // ...
                $response = $songs;
            } else {
                // ...
                $response = $albums;
            }
        }
    }

    $mysqli-&gt;close();

    return $response;
}
</code></pre>

<p>Ajax Script:</p>

<pre><code>&lt;?php
// ajax_script.php

include_once("get_records.php");

echo execute();
</code></pre>

<p>Form Script</p>

<pre><code>&lt;?php

// Form File - form_file.php
include_once("get_records.php");

$content = execute();

$response = "&lt;script&gt; var artists = $content ; &lt;/script&gt;";

echo $response;
</code></pre>
