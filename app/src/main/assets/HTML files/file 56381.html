<p>updated foreach loop</p>

<pre><code>$body = '';    
foreach($selectarray as $cid)
{
    $query = "SELECT a.name as forumname,b.name as discussion,c.message,c.userid,d.firstname,d.email,d.phone1 from mdl_forum as a inner join mdl_forum_discussions b on a.id=b.forum inner join mdl_forum_posts c on b.id=c.discussion inner join mdl_user d on c.userid=d.id where a.course=".$cid['id']." and a.category=1 and from_unixtime(c.modified,'%Y-%m-%d')=CURDATE()";
    $selectmsg = outerjoin($query);
    foreach($selectoutter as $fmsg)
    {
        $body .=  '&lt;p&gt;&lt;b&gt;Forum Name:&lt;/b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;'.$fmsg['forumname'].'&lt;/p&gt;';   
        $body .= '&lt;p&gt;&lt;b&gt;Discussion Name:&lt;/b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;'.$fmsg['discussion'].'&lt;/p&gt;'; 
        $body .= '&lt;p&gt;&lt;b&gt;Message:&lt;/b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;'.$fmsg['message'].'&lt;/p&gt;';    
    }

}

$mail-&gt;Body = $body;
</code></pre>
