<p>This is probably what you need:</p>

<pre><code>$name ='myimage.png';
// make sure you create a folder called **images** in the directory where the script is and give it write permissions.
$save_path = realpath(dirname(__FILE__).'/images/'.$name); 
// I assume that you want to use the image in a website.
$imageurl = "http://www.mysite.com/images/$name"; 
imagejpeg($im, $save_path); // saves the image to **this_dir/images/myimage.png**
imagedestroy($im); 
</code></pre>

<p>in regards to store the filename in a db, you'll need to set the the database first and then use something like this:</p>

<pre><code>$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

mysqli_query($con,"INSERT INTO Photos(save_path, imageurl)
VALUES ("$save_path", "$imageurl")");

mysqli_close($con);
</code></pre>
