<p>No UI updates are visible while a Javascript code block is running. You have to return control to the browser before the change is displayed. You can do this using a <code>setTimeout</code> call with a zero time, so that the browser draws the update and then starts the rest of the code:</p>

<pre><code>$(function () {
  $('#offer_discount').keyup(function () {

    //here i try to show my hidden div with action indicator
    $('#mask').show();

    window.setTimeout(function() {

       $('#search-result').find('tr').each(function (index) {
            // do some calc
       });

       // here i try to hide my div with action indicator
       $('#mask').hide();

    }, 0);

  });
});
</code></pre>
