<p>Bertho, you should look into XQuery as an option for restructuring XML documents.  There are also several software vendors offering SQL applications, some free some paid, which have XML handlers.  Unless you're trying to avoid using a querying language, I think that you should use a querying language rather than PHP.  I struggled to edit XML in PHP for a long time, and I've found that creating code that's as well made as the query language code via PHP isn't worth the effort.  You're going to be troubleshooting errors and adding routines to handle errors and exceptions and struggling to optimize for months if you use PHP, I think; on the other hand, you could use a query language for a day or two and be through with it.  XQuery is very easy to learn, it's web standards, and it supports XPath 2.0.  You'll definitely be happier with that than you are with XPath or SimpleXML.  You also might consider XSLT.  Some people prefer that because it requires less administration, but I like XQuery better for its simplicity.</p>

<p>If you're willing to work with XQuery, I think I can post the code necessary.</p>
