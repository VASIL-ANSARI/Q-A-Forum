<p>In the end I used session state to get around this.</p>

<p>I stored a bool in session to track whether the panel was visible or not, then in the page load method set the Visible property of the panel to the opposite of what was stored in session.</p>
