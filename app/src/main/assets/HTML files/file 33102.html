<p>I think the problem could be related to this part of the dependency:tree:</p>

<pre><code>[INFO]    cglib:cglib:jar:3.1:compile
[INFO]    cglib:cglib-nodep:jar:2.1_3:test
</code></pre>

<p>In the test scope (so when running tests), there are two versions of cglib in the classpath, one more recent 3.1 and cglib-nodep, which is a version of cglib without it's dependencies.</p>

<p>Try to either upgrade cglib-nodep in test scope or remove it altogether if not needed, or keep cglib only. Either way having multiple version of the same classes in different jars  is a common cause of <code>NoClassDefFoundError</code>.</p>
