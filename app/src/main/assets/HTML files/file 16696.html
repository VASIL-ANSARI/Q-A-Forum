<p>I just ran into the same problem when trying to use a <a href="http://stackoverflow.com/a/10854060/404597">custom preference screen</a> from a library project for the AccountManager account settings. No matter how I tried to tweak the targetPackage and targetClass attributes, it would throw an exception (except, since it's an account, it crashes the phone). </p>

<p>I think we'll just have to assume this is an Android limitation. It's clumsy, but all you really need to do is declare a wrapper class for the activity within your application's namespace:</p>

<pre><code>public class MyPreferences extends ActualPreferences {
}
</code></pre>

<p>Declare it in your AndroidManifest.xml</p>

<pre><code>&lt;activity android:name=".MyPreferences"/&gt;
</code></pre>

<p>Then you can specify the class in your intent</p>

<pre><code>&lt;intent android:targetPackage="com.my.package"
        android:targetClass="com.my.package.MyPreferences" /&gt;
</code></pre>

<p>By the way, <strong>the syntax is extremely fussy</strong>, at least for account preferences. All these variations fail:</p>

<pre><code>&lt;!-- fails --&gt; &lt;intent android:targetClass="com.my.package.MyPreferences" /&gt;
&lt;!-- fails --&gt; &lt;intent android:targetClass="MyPreferences" 
                       android:targetPackage="com.my.package"/&gt;
&lt;!-- fails --&gt; &lt;intent android:targetClass=".MyPreferences"
                       android:targetPackage="com.my.package"/&gt;
&lt;!-- fails --&gt; &lt;intent android:targetClass="settings.MyPreferences"
                       android:targetPackage="com.my.package"/&gt;
&lt;!-- fails --&gt; &lt;intent android:targetClass=".settings.MyPreferences"
                       android:targetPackage="com.my.package"/&gt;
&lt;!-- fails --&gt; &lt;intent android:targetClass="com.my.other.package.MyPreferences"
                       android:targetPackage="com.my.package"/&gt;
</code></pre>

<p>The critical factor is apparently that the <code>android:targetPackage</code> attribute matches the application package. If you want, you can put the activity in a sub-package. This works:</p>

<pre><code>&lt;intent android:targetPackage="com.my.package"
        android:targetClass="com.my.package.settings.MyPreferences" /&gt;
</code></pre>
