<p>In your <code>getView</code> you have to something like this (this code is give you an idea how it will work in your case):</p>

<pre><code>ListView lv = ((ListActivity)context).getListView();
// Containing all check states
SparseBooleanArray sba = lv.getCheckedItemPositions();

btnIsSending = (ToggleButton) convertView.findViewById(R.id.btnIsSending);
btnIsSending.setFocusableInTouchMode(false);
btnIsSending.setFocusable(false);
btnIsSending.setTag(entry);

btnIsSending.setChecked(false);

// Cursor is passed as an argument.
if(sba != null)
  if(sba.get(cursor.getPosition()))
     btnIsSending.setChecked(true);
</code></pre>

<p>That said this what you need on the Activity side.</p>

<p>You have make your ListView to multi-selection mode by android:choiceMode in xml or using setChoiceMode.</p>

<p>You have to remove your <code>onClick</code> listener on buttons. Whatever you doing in <code>onClick</code> of button, you have to add that logic to the <code>onListItemClick</code> of <code>ListActivtiy</code>.</p>
