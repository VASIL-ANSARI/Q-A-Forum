<p>The problem you are having is that your function is returning before all the http requests have been completed.</p>

<p>Consider promisifying <code>me.request</code> via <code>bluebird</code> and then return a <code>Promise.all</code>. Here's an example: <a href="http://bluebirdjs.com/docs/api/promise.all.html" rel="nofollow">http://bluebirdjs.com/docs/api/promise.all.html</a></p>
