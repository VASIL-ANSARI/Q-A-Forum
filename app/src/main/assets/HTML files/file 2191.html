<p>Look at <a href="http://google-app-engine-samples.googlecode.com/files/shell_20091112.tar.gz" rel="nofollow">shell.appspot.com's source</a> -- it actually even uses the datastore (for session persistence).  At the core it's basically just doing a simple <code>exec</code> just like you are -- there are other refinements, but nothing special relative to "lockdown" of the untrusted code.  Presumably the Google engineers (in the App Engine team) who released this sample code feel pretty good about its security against untrusted code.</p>

<p>The one feasible "attack" that I can think of is a "denial of service" attack that repeatedly sucks up resources and cause your account to be charged (if enabled for charging for beyond-the-free-quota usage) -- as long as you've stored somewhere safe (in a different app) the identity of whoever's uploaded a given piece of code, I don't see why a student should try such a prank and risk expulsion or something.</p>
