<p>outleft should be the size of the output buffer (e.g. 1000 bytes), not the size of the incoming string.</p>

<p>When converting, the string length usually changes in the process and you cannot know how long it is going to be until afterwards. E2BIG means that the output buffer wasn't large enough, in which case you need to give it more output buffer space (notice that it has already converted some of the data and adjusted the four variables passed to it accordingly).</p>
