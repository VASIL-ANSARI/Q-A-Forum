<p>I recommend having a look into Oracle's JVM Flight Recorder, which is not free, but exactly for this scenario.</p>

<p><a href="http://www.oracle.com/technetwork/java/javaseproducts/mission-control/java-mission-control-1998576.html" rel="nofollow">http://www.oracle.com/technetwork/java/javaseproducts/mission-control/java-mission-control-1998576.html</a></p>
