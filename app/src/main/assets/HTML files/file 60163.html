<p>To enable this custom message on email notification for complete order status and <strong>just for 'customer' user role</strong>, you have to get the user data related to the order, to get the user role. Then you will use it in your conditional.</p>

<p>Here is the code:</p>

<pre><code>add_action( 'woocommerce_email_before_order_table', 'completed_order_mail_message', 20 );
function completed_order_mail_message( $order ) {

    // Getting order user data to get the user roles
    $user_data = get_userdata($order-&gt;customer_user);

    if ( empty( $order-&gt;get_used_coupons() ) &amp;&amp; $order-&gt;post_status == 'wc-completed' &amp;&amp; in_array('customer', $user_data-&gt;roles) )
        echo '&lt;h2 id="h2thanks"&gt;Get 20% off&lt;/h2&gt;&lt;p id="pthanks"&gt;Thank you for making this purchase! Come back and use the code "&lt;strong&gt;Back4More&lt;/strong&gt;" to receive a 20% discount on your next purchase! Click here to continue shopping.&lt;/p&gt;';
}
</code></pre>

<p><em>This code goes in function.php file of your active child theme (or theme) or also in any plugin file.</em></p>

<p>This code is tested and fully functional.</p>
