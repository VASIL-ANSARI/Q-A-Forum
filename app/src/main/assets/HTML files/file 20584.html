<p>You can play with rewrite rules as you wish : </p>

<pre><code>add_filter( 'rewrite_rules_array','my_insert_rewrite_rules', 99 );
add_action( 'wp_loaded','my_flush_rules' );

function my_flush_rules() {
    global $wp_rewrite;
    $wp_rewrite-&gt;flush_rules();
}

function my_insert_rewrite_rules( $rules ) {
    //do whatever you want !
    print_r( $rules );
    return $rules;
}
</code></pre>

<p>You'll only have to make sure site url is updated in db.</p>
