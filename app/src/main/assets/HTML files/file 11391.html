<p>If that is returning 0, then the user is not logged into Facebook. The authentication just sends the user to the URL, if they don't grant the requested permissions (that is, don't login), then you won't be able to get the user ID.</p>

<p>You should also make sure you are using the latest PHP library (3.1). Older versions aren't compatible with the cookie structure Facebook currently uses, in which case the getUser call will always return 0.</p>

<p>You can also <a href="https://developers.facebook.com/docs/reference/javascript/FB.login/" rel="nofollow">use JavaScript for authentication/request permissions</a> which performs everything inline rather than redirecting to URLs. </p>
