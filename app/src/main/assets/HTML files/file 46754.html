<p>That is <strong>not</strong> an error message from <code>rake test</code>. It is the result of the test case you just ran using <code>bundle exec rake test</code>. In this case your test case failed because it is expecting a <code>User</code> object with <code>id=762146111</code> but got <code>nil</code> instead. </p>

<p>Based on the name of your test case <em>"test_current_user_returns_right_user_when_session_is_nil"</em>, I believe you will need to change your <code>current_user</code> method to return a <code>User</code> even when the session is <code>nil</code>. </p>

<p>You may find more information about Rails testing here <a href="http://edgeguides.rubyonrails.org/testing.html" rel="nofollow">http://edgeguides.rubyonrails.org/testing.html</a></p>
