<p>I am not sure why this may be coming, but I think you can avoid this and an extra query to sql while accessing <code>user_role</code> by using <code>include</code> in your query. This will eager load <code>user_role</code> in the first query itself and will not make extra query in each loop.</p>

<p>Code will be something like following:</p>

<pre><code>  u = User.where(:active =&gt;true).includes(:user_roles).each{|u|
    //some code
     u.user_role #error will raise in this line 
     }
</code></pre>

<p>More details on include is here: <a href="http://apidock.com/rails/ActiveRecord/QueryMethods/includes" rel="nofollow">http://apidock.com/rails/ActiveRecord/QueryMethods/includes</a></p>
