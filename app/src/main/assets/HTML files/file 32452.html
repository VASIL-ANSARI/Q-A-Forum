<p>All the input validation and anti-SQL injection has been subject to <em>soo many misconceptions</em>. In fact, all this boils down to one single thing:</p>

<h2>Ensure correct SQL query syntax</h2>

<p>If you are able ensure correct SQL syntax for any input data, you are safe and you don't need to read or study anything about validation or sql injection at all. Because all these vulnerabilites are only possible in situations where you allow incorrect SQL syntax.</p>

<p>To ensure correct SQL query syntax in your case, you have to make sure your <code>$input</code> is escaped in the query correct way. Look at the PHP docs: <a href="http://php.net/mysql_real_escape_string" rel="nofollow">http://php.net/mysql_real_escape_string</a>:</p>

<blockquote>
  <p>caution Security: the default character set</p>
  
  <p>The character set must be set either at the server level, or with the
  API function mysql_set_charset() for it to affect
  mysql_real_escape_string(). See the concepts section on character sets
  for more information.</p>
</blockquote>

<p>So, <code>mysql_real_escape_string</code> has to be informed correctly on your character set to be able to escape properly. So, instead of your <code>mysql_query("SET NAMES utf8mb4");</code>, you should do:</p>

<pre><code>mysql_set_charset("utf8mb4");
</code></pre>
