<p>I manipulated your code a bit. Do you use jquery? I assumend that you are not using jquery.Here jsfiddle :     </p>

<ul>
<li><p><a href="http://jsfiddle.net/9fpf07mt/" rel="nofollow">http://jsfiddle.net/9fpf07mt/</a></p>

<pre><code>window.onclick = function (e) {
    console.log(e);
    if (!itemIsOpened) {
        if (e.target == link) {
            itemIsOpened = true;
            addClass(item, theClass);
        }
    } else {
        if (!isChild(e.target, item)) {
            itemIsOpened = false;
            removeClass(item, theClass);
        }
    }
};
</code></pre></li>
</ul>

<p>edit for last request:</p>

<pre><code>link.addEventListener('click', function (event) {
                event.preventDefault();
            });
</code></pre>
