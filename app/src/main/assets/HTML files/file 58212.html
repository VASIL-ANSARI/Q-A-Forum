<p>You allocate 8 bytes for the array, but you store 8 <code>int</code>, each of which is at least 2 bytes (probably 4), so you are writing past the end of the allocated memory.  Doing so invokes undefined behavior.</p>

<p>When you invoke undefined behavior, anything can happen.  Your program can crash, it can show unexpected results, or it can appear to work properly.  A seemingly unrelated change can change which of the above actions occur.</p>

<p>Fix the memory allocation, and you code will work as expected.</p>

<pre><code>int *result = malloc(sizeof(int) * n);
</code></pre>
