<p>Your query should work with most databases.  However, Oracle and earlier versions of Postgres put the CTE next to the <code>select</code>.  So, if you are using Oracle, earlier versions of Postgres or Postgres-derived databases:</p>

<pre><code>insert into table2 (col1, col2)
    with A as (select col1, col2 from table1) 
    select col1, col2 from A;
</code></pre>

<p>Also, there is no need for parentheses around the <code>select</code> query.  It isn't a subquery.</p>
