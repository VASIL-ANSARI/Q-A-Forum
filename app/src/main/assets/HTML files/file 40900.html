<ol>
<li><p>The usage</p>

<pre><code>byte[] fileByteArray = new byte[fileInputStream.available()];
</code></pre>

<p>is <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html#available--" rel="nofollow">specifically warned against in the Javadoc</a>: " It is never correct to use the return value of this method to allocate a buffer intended to hold all data in this stream."</p>

<p>Files should be processed a record or a buffer at a time.</p></li>
<li><p>The line:</p>

<pre><code>fileInputStream.read(fileByteArray);
</code></pre>

<p>isn't guaranteed to fill the buffer. You have to check the return value: for -1, meaning end of file, or > 0, meaning the number of bytes that were actually transferred. See the Javadoc.</p></li>
<li><p>Similarly</p>

<pre><code>while (objectInputStream.available() != 0) {
</code></pre>

<p>is not a valid test for end of stream. You should call <code>readObject()</code> until it throws <code>EOFException.</code></p></li>
</ol>
