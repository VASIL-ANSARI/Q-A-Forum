<p>You need to set the event handler for <code>onbeforeunload</code> directly on the <code>window</code> object:</p>

<pre><code>var dirty = false;
$("form#add_item :input").change(function() {
    //alert("form changed!")
    dirty = true;
});

window.onbeforeunload = function() {
    if (dirty) {
        return 'You have unsaved changes! If you leave this page, your changes will be lost.';
    }
};â
</code></pre>

<p><strong>Working example: <a href="http://jsfiddle.net/M9tnP/20/" rel="nofollow">http://jsfiddle.net/M9tnP/20/</a></strong></p>
