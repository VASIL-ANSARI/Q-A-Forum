<p>You can do with a conditional sum something as</p>

<pre><code>select
year,
count(*) as total,
sum(gender='Male') as male_count,
( sum(gender='Male') / count(*)  ) as proportions
from table 
GROUP BY year
</code></pre>

<p>For your output format its</p>

<pre><code>select
year,
( sum(gender='Male') / count(*)  ) as prop
from table 
GROUP BY year
</code></pre>
