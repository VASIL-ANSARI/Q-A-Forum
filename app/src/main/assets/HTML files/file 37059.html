<p>The compile function is executes once for a directive. I think you want to use the link function because that is called for each use of the directive instead only once when the directives is compiled.</p>
