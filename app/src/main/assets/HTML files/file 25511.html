<p>What you basically want is to add an alpha channel to the uploaded image and create a PNG file.</p>

<p>The alpha channel should represent the opacity of the printed color. To generate it, you have several options:</p>

<ol>
<li><p>Take a copy of the image, convert it to grayscale, invert it and use it as alpha channel.</p></li>
<li><p>Create an alpha channel compute the alpha value of each pixel derived from the original image as: <em>alpha = 1.0 - min(red, green, blue)</em> (use 255 instead of 1.0 depending on whether you're using integer or floating point numbers).</p></li>
<li><p>Convert the original image to CMYK (using a color profile and not the poor formulas youn find all over the internet) and use it as the basis to create the alpha channel for the original RGB image: <em>alpha = max(cyan, magenta, yellow, black)</em>.</p></li>
<li><p>Come up with an even better formula to compute the transparency of each pixel such as: alpha = min(0.2 * cyan + 0.5 * magenta + 0.1 * yellow + 0.7 * black, 1.0)</p></li>
</ol>

<p>The last one is just a guess of the relative opacity of each color. You can certainly improve it.</p>
