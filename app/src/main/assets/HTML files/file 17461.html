<p>Generally speaking (as you did not provide code): if multiple threads are using a single resource in a configure-then-use manner then you should put the data into an object (<code>new MailSendRequest(smtpconfig, message)</code>Â´and put these into a queue. A different <code>Thread</code> should be watching this queue and process the <code>MailSendRequests</code> one-by-one bypassing the concurrency problem. (In this specific case sending out the mails should be delayed anyway because sending a bulk of them at once is not considered a good practice by ISP-s. They usually send out smaller batches of mails periodically.)</p>
