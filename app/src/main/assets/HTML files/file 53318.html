<p>Here's what I tried out :</p>

<pre><code>public static void main(String[] args) {
    AnIdentifier id = AnIdentifier.builder().mandatoryIdPart("added")
                       .optionalIdPart1(Optional.of("abs")).build(); //line 1
    id.optionalIdPart2.isPresent(); //line2
}
</code></pre>

<p>Firstly line2 generated a NPE so optionalIdPart2 was set to null not Optional.empty() <br/>
Secondly from line1, setting the optional value required putting the string in an Optional, lombok doesn't take care of that.</p>

<p>So use a constructor such as this with the annotation:</p>

<pre><code>@Builder
public AnIdentifier(@NonNull String mandatoryIdPart, String optionalIdPart1, String optionalIdPart2) {
    this.mandatoryIdPart = mandatoryIdPart;
    this.optionalIdPart1 = Optional.ofNullable(optionalIdPart1);
    this.optionalIdPart2 = Optional.ofNullable(optionalIdPart2);
}
</code></pre>
