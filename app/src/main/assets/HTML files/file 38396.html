<p>You need to provide a promise array to <code>$q.all</code> to have it wait for the underlying promise(s) to be fulfilled, use the <code>$promise</code> property returned by the resource.</p>

<pre><code>$q.all(companies.map(function(company) {
  return Person.query({
    companyId: company.id
  }).$promise; //&lt;-- Here
})).then(function(people) {
  console.log(people);
});
</code></pre>

<p><strong><a href="http://plnkr.co/edit/PEjwrRjQtYlCBcwYdzZ9?p=preview" rel="nofollow">Demo</a></strong></p>
