<p>This does look like a simple scope issue.  You're declaring your variables inside userInfo() and then trying to access them inside the login function.  </p>

<p>Your next problem will be that these calls are most likely asynchronous.  So, as you stated, you can use the alert function within the api functions and see the data.  Anything you want to do with the response data will have to be done within those success functions, so you'll want something like this:</p>

<pre><code>FB.api(
    '/me', function (response) {
        doSomethingWithUsername(response.name);
});
FB.api(
    '/me/picture',
    {
        "redirect": false,
        "type": "square"
    },
    function (response) {
        doSomethingWithProfilePic(response.data.url);
});
</code></pre>
