<p>You have to return a double on your converter, you are returning a boolean, which cause the invalid cast.</p>

<p>EDIT: You are having Binding problems, you have to set the "PlacementTarget" of your popup in order the get the Width property.</p>

<p>EDIT 2: try this:</p>

<pre><code>&lt;Window x:Class="WpfApplication7.MainWindow"
        Name="myWindow"
    ............

&lt;Setter Property="PlacementTarget" Value="{Binding ElementName=myWindow}"/&gt;
</code></pre>
