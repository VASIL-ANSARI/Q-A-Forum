<p>Try changing the order so that the form login configuration comes first:</p>

<pre><code>protected void configure(HttpSecurity http) throws Exception {
  http
    .formLogin()
        .loginPage("/login") 
        .permitAll()
        .and()
    .authorizeRequests()
        .anyRequest()
        .authenticated();
}
</code></pre>

<p>EDIT: changed ".and" to ".and()"</p>
