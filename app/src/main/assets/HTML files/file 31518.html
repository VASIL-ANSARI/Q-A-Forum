<p>Option 1: Try to rewrite the code in a vectorized way. You could convolve with a 3x3 mask like this:</p>

<pre><code>import numpy as np
from scipy.signal import convolve2d

image = np.random.random((100,100))
nbCameras = np.abs(np.random.normal(size=(100,100)).round())

maskWidth = 3
mask = np.ones((maskWidth, maskWidth))

visibilityMask = (nbCameras&gt;1).astype(np.float)
visibilityMask = convolve2d(visibilityMask, mask, mode="same").astype(np.bool)

imgFinal = image.copy()
imgFinal[~visibilityMask] *= 0

import matplotlib.pyplot as plt
for i, (im, title) in enumerate([(image, "image"), 
                                 (nbCameras, "nbCameras"), 
                                 (visibilityMask, "visibilityMask"), 
                                 (imgFinal, "imgFinal")]):
    plt.subplot(2,2,i+1)
    plt.title(title)
    plt.imshow(im, cmap=plt.cm.gray)

plt.show()
</code></pre>

<p>This will result in this plot:
<img src="http://i.stack.imgur.com/tX3xx.png" alt="Result"></p>

<p>Option 2: Use <a href="http://numba.pydata.org/" rel="nofollow">Numba</a>. This uses an advanced just-in-time optimization technique and is specifically useful for speeding up loops.</p>
