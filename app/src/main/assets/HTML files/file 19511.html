<p>One easy way to debug this is to look at the tests of the <a href="https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/api/AddCommand.java" rel="nofollow">AddCommand</a> in the <a href="https://github.com/eclipse/jgit" rel="nofollow">JGit repo</a>: <a href="https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/AddCommandTest.java" rel="nofollow"><code>AddCommandTest.java</code></a></p>

<p>You will see that in order to add all files the pattern "<code>*</code>" is never used, but "<code>.</code>" is.<br>
And it is used in the test function named... <a href="https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/AddCommandTest.java#L436-L456" rel="nofollow"><code>testAddWholeRepo()</code></a>(!)</p>

<pre><code>git.add().addFilepattern(".").call();
</code></pre>

<p>The Exception:</p>

<pre><code>Exception in thread "main" org.eclipse.jgit.errors.NoWorkTreeException: 
Bare Repository has neither a working tree, nor an index
</code></pre>

<p>is quite explicit: you need to add file in a non-bare repo.</p>

<p>See <a href="https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/api/CloneCommandTest.java#L106-132" rel="nofollow">test method <code>testCloneRepository()</code></a> to compare with your own clone, and see if there is any difference.</p>
