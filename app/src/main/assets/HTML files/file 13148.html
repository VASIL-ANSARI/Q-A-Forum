<p>Here is the <code>createImage()</code> method of <a href="http://pscode.org/gifanim/" rel="nofollow">GIFanim</a>.  Perhaps that will give you a start.</p>

<pre><code>public byte[] createImage() throws Exception {

    ImageWriter iw = ImageIO.getImageWritersByFormatName("gif").next();

    ByteArrayOutputStream os = new ByteArrayOutputStream();
    ImageOutputStream ios = ImageIO.createImageOutputStream(os);
    iw.setOutput(ios);
    iw.prepareWriteSequence(null);
    int i = 0;

    for (AnimationFrame animationFrame : frameCollection) {

        BufferedImage src = animationFrame.getImage();
        ImageWriteParam iwp = iw.getDefaultWriteParam();
        IIOMetadata metadata = iw.getDefaultImageMetadata(
            new ImageTypeSpecifier(src), iwp);

        configure(metadata, "" + animationFrame.getDelay(), i);

        IIOImage ii = new IIOImage(src, null, metadata);
        iw.writeToSequence(ii, null);
        i++;
    }

    iw.endWriteSequence();
    ios.close();
    return os.toByteArray();
}
</code></pre>

<p>Note that this is a very naÃ¯ve implementation, that produces images that are significantly larger than can be made with a library that compresses the color palette and performs other optimizations.  Implementing a library like that would be a significant task.</p>
