<p>I think the error is your quoting but the logic appears flawed too. This isn't a pretty solution but it should get you on the right track.</p>

<pre><code>&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
  &lt;xsl:output method="xml" /&gt;
  &lt;xsl:key name="categories" match="Category" use="." /&gt;
    &lt;xsl:template match="/"&gt;
      &lt;xsl:for-each select="/Promotions/Promotion/Category[
        generate-id(.) = generate-id(key('categories', .)[1])
      ]"&gt;
      &lt;xsl:variable name="cname" select="." /&gt;
      &lt;Category title="{.}"&gt;
        &lt;xsl:for-each select="/Promotions/Promotion[Category=$cname]"&gt;
          &lt;Title&gt;
            &lt;xsl:value-of select="Title" /&gt;
          &lt;/Title&gt;
        &lt;/xsl:for-each&gt;
      &lt;/Category&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre>

<p>gives you this:</p>

<pre><code>&lt;Category title="Arts &amp;amp; Entertainment"&gt;
  &lt;Title&gt;Get your Free 2&lt;/Title&gt;
  &lt;Title&gt;Get your Free 4&lt;/Title&gt;
  &lt;Title&gt;Get your Free 5&lt;/Title&gt;
&lt;/Category&gt;
&lt;Category title="Community &amp;amp; Neighborhood"&gt;
  &lt;Title&gt;Get your Free 1&lt;/Title&gt;
&lt;/Category&gt;
&lt;Category title="Education"&gt;
  &lt;Title&gt;Get Your Free 3&lt;/Title&gt;
&lt;/Category&gt;
</code></pre>
