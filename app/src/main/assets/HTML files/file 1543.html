<p>Have you already looked up the topic on the facebook wiki? <a href="http://wiki.developers.facebook.com/index.php/Stream.publish" rel="nofollow">http://wiki.developers.facebook.com/index.php/Stream.publish</a></p>

<p>There's a nice example which should help you out. If not, you'll have to describe your problem more accurate.</p>

<p>EDIT: You can check and request for the permissions like this (and also request them)</p>

<pre><code>function check_perms() {

    global $facebook, $uid;

    $data = $facebook-&gt;api_client-&gt;fql_query( "SELECT uid, publish_stream FROM permissions WHERE uid = " . $uid );
    if( $data[0]['publish_stream'] != true ) {
        echo '&lt;br /&gt;&lt;p&gt;No \'publish_stream\' permissons found!&lt;br /&gt;';
        echo '&lt;fb:prompt-permission perms="publish_stream"&gt; Allow me to publish to your wall (*click*) &lt;/fb:prompt-permission&gt;';
        echo '&lt;br /&gt;You\'ll have to refresh the page to continue.&lt;/p&gt;';
        die();
    }

}
</code></pre>
