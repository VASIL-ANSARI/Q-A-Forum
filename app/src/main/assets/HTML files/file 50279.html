<p><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#482" rel="nofollow"><strong>CWG #482</strong></a> is relevant:</p>

<blockquote>
  <p>According to 8.3 [dcl.meaning] paragraph 1, [â¦] <br>
  This restriction prohibits examples like the following:</p>

<pre><code>void f();
void ::f();        // error: qualified declarator

namespace N {
  void f();
  void N::f() { }  // error: qualified declarator
}
</code></pre>
  
  <p>There doesn't seem to be any good reason for disallowing such
  declarations, and a number of implementations accept them in spite of
  the Standard's prohibition. Should the Standard be changed to allow
  them?</p>
  
  <p>Notes from the April, 2006 meeting:</p>
  
  <p><strong>In discussing <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#548" rel="nofollow">issue 548</a>, the CWG agreed that the prohibition of
  qualified declarators inside their namespace should be removed.</strong></p>
</blockquote>

<p>So your code is valid if the first declaration of <code>foo</code> is present (as of about 2012; GCC has an <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64267" rel="nofollow">open bug report</a>). If not, however, your quoted wording still applies and renders the qualified declaration ill-formed. I see no reason to permit that case; it intuitively implies that the name has been declared already, since qualified name lookup must determine what it refers to.</p>
