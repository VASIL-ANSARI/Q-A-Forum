<h3>Using WSDL2Java</h3>

<p>If you have used the Axis2 WSDL2Java tool you're kind of stuck with what it generates for you.  However you can try to change the skeleton in this section:</p>

<pre><code>   // create SOAP envelope with that payload
   org.apache.axiom.soap.SOAPEnvelope env = null;
   env = toEnvelope(
       getFactory(_operationClient.getOptions().getSoapVersionURI()),
       methodName,
       optimizeContent(new javax.xml.namespace.QName
       ("http://tempuri.org/","methodName")));

//adding SOAP soap_headers
_serviceClient.addHeadersToEnvelope(env);
</code></pre>

<p>To add the namespace to the envelope add these lines somewhere in there:</p>

<pre><code>OMNamespace xsi = getFactory(_operationClient.getOptions().getSoapVersionURI()).
    createOMNamespace("http://www.w3.org/2001/XMLSchema-instance", "xsi");

env.declareNamespace(xsi);
</code></pre>

<h3>Hand-coded</h3>

<p>If you are "hand-coding" the service you might do something like this:</p>

<pre><code>SOAPFactory fac = OMAbstractFactory.getSOAP11Factory();   
SOAPEnvelope envelope = fac.getDefaultEnvelope();
OMNamespace xsi = fac.createOMNamespace("http://www.w3.org/2001/XMLSchema-instance", "xsi");

envelope.declareNamespace(xsi);
OMNamespace methodNs = fac.createOMNamespace("http://somedomain.com/wsinterface", "ns1");

OMElement method = fac.createOMElement("CreateEntityTypesResponse", methodNs);

//add the newkeys and errors as OMElements here...
</code></pre>

<h3>Exposing service in aar</h3>

<p>If you are creating a service inside an aar you may be able to influence the SOAP message produced by using the target namespace or schema namespace properties (see <a href="http://wso2.org/library/2060">this article</a>).</p>

<p>Hope that helps.</p>
