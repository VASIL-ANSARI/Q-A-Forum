<p>Okay, there are a few issues with your query as it stands:</p>

<ul>
<li>you need to add an alias name to your inner query, the one that starts "SELECT COALESCE...", i.e. put a letter, say X, after "bto.TaskId = 13)".</li>
<li>you can't set your variable to the results of this sub-query the way you have, if you remove the "@OwnerUserIDs = " bit then your query should compile;</li>
<li>I don't understand what your OUTER APPLY is trying to achieve, surely it will just return the same results for every row returned, i.e. where TaskId = 13?  Maybe this should be referring to the main query in some way?</li>
<li>If you want to set the @OwnerUserIDs to be the concatenated results of the OwnerUserIDs then you need to use a different mechanism, either a recursive CTE or XML PATH query would work.</li>
</ul>

<p>I would try to rewrite your query for you but I am not sure what you are trying to achieve here.  I guess you want to end up with a list of User Ids in @OwnerUserIDs but I'm not sure what the rules should be...</p>
