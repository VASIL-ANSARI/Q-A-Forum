<p>Try this:</p>

<pre><code>require 'json'

s = '[{"tipo":"1","dia":"02/10/2012","empresa_id":"17","horas":"0:15","tempo":"900"}, {"tipo":"2","dia":"02/10/2012","empresa_id":"17","horas":"0:12","tempo":"720"}]'
j = JSON.parse(s)
r = j.inject({}) do |f,c|
    key = c.delete('empresa_id')
    (f[key]||=[]) &lt;&lt; c
    f
end
p r
</code></pre>

<p>resulting in </p>

<pre><code>{"17"=&gt;[{"tipo"=&gt;"1", "dia"=&gt;"02/10/2012", "horas"=&gt;"0:15", "tempo"=&gt;"900"}, {"tipo"=&gt;"2", "dia"=&gt;"02/10/2012", "horas"=&gt;"0:12", "tempo"=&gt;"720"}]}
</code></pre>

<h2>See <a href="http://cibox.org/slivu/stackoverflow?lang=ruby&amp;file=how-to-group-a-json-from-a-sql-result.rb&amp;run=true" rel="nofollow">live demo here</a></h2>
