<p>There are two answers. </p>

<p>First,  malabar-mode is stuck at maven 3.0.4 so try that version. Also do not set the lib dir. It should be set automatically. </p>

<p>Second, in order to get around the maven version I am rewriting malabar-mode from scratch. Follow the instructions at <a href="https://github.com/m0smith/malabar-mode/blob/develop/doc/2.0/INSTALL.md" rel="nofollow">https://github.com/m0smith/malabar-mode/blob/develop/doc/2.0/INSTALL.md</a>. This version should work for all versions of maven after 3.0.4.  It is a work in progress and not all the features are there yet.<br>
If you have problems or suggestions create an issue in the GitHub repo as now is a good time to get your wishes known </p>

<p>EDIT:  2.0 of malabar has been released to MELPA.  To install now:</p>

<p>```</p>

<pre><code>(load-file "~/projects/cedet/cedet-devel-load.el")
(add-hook 'after-init-hook (lambda ()
             (message "activate-malabar-mode")
             (activate-malabar-mode)))

(add-hook 'malabar-java-mode-hook 'flycheck-mode)
(add-hook 'malabar-groovy-mode-hook 'flycheck-mode)
</code></pre>

<p>```</p>
