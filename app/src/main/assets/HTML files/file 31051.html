<p>I have a similar controls which works as expected. Please have a look.</p>

<pre><code>&lt;ListBox ItemsSource="{Binding AccentColors}"
                SelectedItem="{Binding SelectedAccentColor, Mode=TwoWay}"
                Margin="0,0,0,16"&gt;
    &lt;ListBox.ItemsPanel&gt;
        &lt;ItemsPanelTemplate&gt;
            &lt;WrapPanel MaxWidth="{Binding ActualWidth, ElementName=Panel}" /&gt;
        &lt;/ItemsPanelTemplate&gt;
    &lt;/ListBox.ItemsPanel&gt;
    &lt;ListBox.ItemContainerStyle&gt;
        &lt;Style TargetType="ListBoxItem" BasedOn="{StaticResource FlatListBoxItem}"&gt;
            &lt;Setter Property="BorderThickness" Value="0"/&gt;
        &lt;/Style&gt;
    &lt;/ListBox.ItemContainerStyle&gt;
    &lt;ListBox.ItemTemplate&gt;
        &lt;DataTemplate&gt;
            &lt;Rectangle Width="40" Height="40" Margin="2" &gt;
                &lt;Rectangle.Fill&gt;
                    &lt;SolidColorBrush x:Name="Brush" Color="{Binding}" /&gt;
                &lt;/Rectangle.Fill&gt;
            &lt;/Rectangle&gt;
        &lt;/DataTemplate&gt;
    &lt;/ListBox.ItemTemplate&gt;
&lt;/ListBox&gt;
</code></pre>
