<p><strong>tl;dr:</strong> Drop hashbang support and opt for <a href="https://github.com/defunkt/jquery-pjax" rel="nofollow">PJAX</a> like behavior if you care about SEO.</p>

<p>Are you making an App or a Website? If website you need to return <code>404</code> so that you don't confuse google. It needs be a real <code>404</code> not just show a message of page not found (ie <code>200</code> with message "page not found" is very bad). Also what browsers do you care to support?</p>

<p>My opinion is that the whole hashbang server side rendering should be avoided (ie the nasty Google SEO <code>#!</code> hack). Either use real pushstate or re-render the whole page if the URL changes for browsers that don't support pushstate (not a hash change).</p>

<p>Now the reason this matters is that a <code>#!</code> should never return a <code>404</code> because it doesn't make sense and its impossible to mimic server side because the server never gets whats after the <code>#!</code> with out running Javascript.</p>

<p>Thus if you really care about SEO I would do something like PJAX and only use true pushstate for routing and then just fail to old web 1.0. Consequently the links I recommend you share that can truly be a <code>404</code> should not have <code>#!</code> (traditional <code>#</code> being fine so long as the contents of the page don't change drastically). </p>

<p>Finally the <code>404</code> is mostly not a problem but rather <code>30X</code> ie redirect responses. Thats because the browser will automatically handle redirects so your Javascript AJAX calls will never see a <code>30X</code> (they will get the redirect response instead... ie 200). To handle <code>30X</code> responses you will have to send a header back for every request to indicate what the redirected URL is/was (ie what you were redirected to) so that you don't mess up the Pushstate History.</p>

<p>Of course if you need to support hashbang like Twitter used too (<a href="http://www.digitaltrends.com/social-media/twitter-kills-the-hashbang-promises-5x-faster-page-loads/" rel="nofollow">and they are the ones that even killed hashbang</a>), you can leverage Google Sitemaps and the <a href="http://support.google.com/webmasters/bin/answer.py?hl=en&amp;answer=96569" rel="nofollow"><code>rel=nofollow</code></a> to try to mitigate bad SEO.</p>
