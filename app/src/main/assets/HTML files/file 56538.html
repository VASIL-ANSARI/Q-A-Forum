<p>Technically you can use <code>UseWhen</code> like this:</p>

<pre><code>app.UseWhen(context =&gt; context.Request.Headers.ContainsKey("Basic"), appBuilder =&gt;
{
    // use basic middleware
} 
app.UseWhen(context =&gt; context.Request.Headers.ContainsKey("Authorization"), appBuilder =&gt;
{
    // use oauth authentication
} 
</code></pre>

<p><strong>But</strong> for your case, the authentication middlewares should handle these conditions inside own authentication handler and if does not match condition then it skips. You shouldn't need to handle conditions. So you can just use these authentication middlewares:</p>

<pre><code>app.UseBasicAuthentication();

app.UseOauthAuthentication();
</code></pre>
