<p>Posting as a <a href="http://meta.stackexchange.com/questions/11740/what-are-community-wiki-posts">community wiki</a>.</p>

<pre><code>printf ("New Record has id %d.\n", mysqli_insert_id($mysqli));
</code></pre>

<p>You didn't pass your db connection to it.</p>

<p>Reference:</p>

<ul>
<li><a href="http://php.net/manual/en/mysqli.insert-id.php" rel="nofollow">http://php.net/manual/en/mysqli.insert-id.php</a> </li>
</ul>

<p>Object oriented style</p>

<blockquote>
  <p>mixed $mysqli->insert_id;</p>
</blockquote>

<p>Procedural style</p>

<blockquote>
  <p>mixed mysqli_insert_id ( mysqli $link )</p>
</blockquote>
