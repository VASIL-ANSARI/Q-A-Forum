<pre><code>SELECT ROUND(geography::Point(Lat, Long, 4326).STDistance(geography::Point("&amp;SearchLat&amp;",
"&amp;SearchLong&amp;", 4326))/1000,0) as Distance FROM users

WHERE Lat IS NOT NULL AND Long IS NOT NULL
</code></pre>
