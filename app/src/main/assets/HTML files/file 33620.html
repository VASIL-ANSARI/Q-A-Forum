<p>The problem caused by this line:</p>

<pre><code>ArrayAdapter adapter = new ArrayAdapter(this,R.layout.activity_main,titles);
</code></pre>

<p>The second parameter of ArrayAdapter's constructor is a view (TextView by default) which you populate with your data. When you're trying to populate <code>R.layout.activity_main</code> that is a RelativeLayout per se, you get <code>ClassCastException</code>. If you're not going to use more complex layout than TextView, use a preserved Android layout. Change the mentioned line to this one:</p>

<pre><code>ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.select_dialog_item,titles);
</code></pre>
