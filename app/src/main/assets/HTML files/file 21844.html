<p>You can save selection in variable as folowing:</p>

<pre><code>  var sel = window.getSelection().getRangeAt(0);   //get cursor position
  sel = [[sel.startContainer,sel.startOffset],  
         [sel.endContainer,sel.endOffset]
  ];   //save cursor position (start and end);
  /*Do whatever, let the user change selected element*/
</code></pre>

<p>Now when you have selection in variable, you can do whatever you want. But the nodes involved in selection must not be changed, or the selection will point on invalid range.<br>
Now you can select the text again:</p>

<pre><code>  var range = document.createRange();  //Creade range object. This is not IE compatible!
  range.setStart(sel[0][0], sel[0][1]);  //Load start from our variable
  range.setEnd(sel[1][0], sel[1][1]);    //Load end too
  var s = window.getSelection();
  s.removeAllRanges();  //I'm not sure this is necessary
  s.addRange(range);
</code></pre>

<p>Then you can get the text:</p>

<pre><code>  alert("Selected: "+s.toString());
</code></pre>
