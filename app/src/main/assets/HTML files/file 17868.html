<p>In the first case Ruby thinks block belongs to <code>puts</code>, not to <code>merge</code>, use <code>{}</code>: </p>

<pre><code>p h1.merge(h2) { |key, old, new|
  if old &lt; new
   old
  else
   new
  end
}
</code></pre>

<p><strong>UPDATE</strong>: You can find details in the <a href="http://phrogz.net/ProgrammingRuby/language.html#blocksclosuresandprocobjects" rel="nofollow">Programming Ruby</a> book.</p>
