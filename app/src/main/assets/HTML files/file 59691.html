<p>less looping, should a little more efficient</p>

<pre><code>&lt;?php 


$file_name = "test.csv";
$infos = array();
if (($handle = fopen($file_name, "r")) !== FALSE) {

    $fp = fopen('write.csv', 'w');

    while (($data = fgetcsv($handle, 0, ",")) !== FALSE) {

        $data[17] = cleanUrl($data[6]);
        fputcsv($fp, array($data), ',', ' ');

    fclose($handle);
}

}

function cleanUrl($str, $replace = array(), $delimiter = '-') {
    setlocale(LC_ALL, 'en_US.UTF8');
    if (!empty($replace)) {
        $str = str_replace((array) $replace, ' ', $str);
    }

    $clean = iconv('UTF-8', 'ASCII//TRANSLIT', $str);
    $clean = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $clean);
    $clean = strtolower(trim($clean, '-'));
    $clean = preg_replace("/[\/_|+ -]+/", $delimiter, $clean);

    return $clean;
}
</code></pre>
