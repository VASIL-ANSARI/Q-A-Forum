<p>C arrays indexes are zero based, then you should use</p>

<pre><code>str2[0],str2[1]
</code></pre>

<p>instead of </p>

<pre><code>str2[1],str2[2]
</code></pre>

<p>In this fragment</p>

<pre><code>for(i=0;i&lt;len;i++)
{
  str[i]=str[i]^str2[2];
  str[++i]=str[i]^str2[1];
  break;
}
</code></pre>

<p>break statement stop loop after first iteration. You should remove it. Then you get</p>

<pre><code>for(i=0;i&lt;len;i++)
{
  str[i]^=str2[1];
  str[++i]^=str2[0];
}
</code></pre>

<p>In line</p>

<pre><code>while((fgets(str,1024,finp)!=NULL)&amp;(fgets(str2,2,keyFile)!=NULL))
</code></pre>

<p>you need logical AND instead of bitwise</p>

<pre><code>while((fgets(str,1024,finp)!=NULL)&amp;&amp;(fgets(str2,2,keyFile)!=NULL))
</code></pre>

<p>And if your input.txt file contain more the 1024 byte to show all results you need to move printf("%s\n", str); into the while loop</p>

<pre><code>while((fgets(str,1024,finp)!=NULL)&amp;&amp;(fgets(str2,2,keyFile)!=NULL))
{
    ...
    printf("%s\n", str);
}
</code></pre>
