<p>You may just be missing the behavior wrappers. try wrapping the text in the behaviors and behaviors attach code:</p>

<pre><code>(function ($) {
  Drupal.behaviors.ajax_example = {
    attach:function (context) {

      // If the site name is present set it to the username.
      if ($('#site-name', context).length) {
        $.ajax({
          url: '/ajax/username',
          success: function(data) {

            // Change site name to current user name.
            $('#site-name a span').html(data + '.com');
         }
        });
      }
    }
  }
})(jQuery);
</code></pre>

<p>I wrote a full blog post for my company blog on doing ajax in Drupal 6 &amp; 7 that may be of some help as well: <a href="http://clikfocus.com/blog/simple-ajax-example-drupal-6-and-7" rel="nofollow">http://clikfocus.com/blog/simple-ajax-example-drupal-6-and-7</a></p>
