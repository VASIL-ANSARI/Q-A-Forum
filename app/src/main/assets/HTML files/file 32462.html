<p>I already expected that this was a problem with <code>onnegotiationneeded</code> and yes. When you change  line 37 to <code>console.trace</code>, you can see which code called your function <code>createOffer()</code>:</p>

<p><img src="http://i.stack.imgur.com/nm0HG.png" alt="console.trace"></p>

<p>What you want to do is create and set an offer first, and then add the onnegotiationneeded. This will prevent any errors.
<a href="http://jsfiddle.net/MarijnS95/P567K/" rel="nofollow">As you are following a tutorial, see this working example</a></p>
