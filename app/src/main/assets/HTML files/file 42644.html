<p>The call</p>

<pre><code>std::unique_ptr&lt;char[]&gt; result1(new char[test_size]);
</code></pre>

<p>is correct. The tricky part is NOT to write <code>std::unique_ptr&lt;char&gt;</code>, which also compiles and can cause a memory leak (<code>unique_ptr</code> calls <code>delete</code> to release resource. When initialized with <code>new[]</code>, we need to instruct <code>unique_ptr</code> to call the correct <code>delete[]</code>).</p>

<p>The <code>std::string</code> constructor call is also OK and it's very unlikely there's a memory leak. The <code>std::string</code> can be initialized from a C-style pointer in the same way.</p>

<p>I don't see any memory leak in your code snippet. How do you know it's a memory leak?</p>
