<p>Unlike your <code>$expectedArray</code>, this creates structure where leaves are keys with empty array as value:</p>

<pre><code>$result = [];
foreach($flatLists as $list) {
  $target = &amp;$result;
  foreach($list as $element) {
    if(!isset($target[$element])) {
      $target[$element] = [];
    }
    $target = &amp;$target[$element];
  }
}
</code></pre>
