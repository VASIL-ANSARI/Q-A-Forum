<p>I don't see a declaration for btnswitch</p>

<p>replace</p>

<pre><code>btnSwitch = (ImageButton) findViewById(R.id.btnSwitch);
</code></pre>

<p>with</p>

<pre><code>ImageButton btnSwitch = (ImageButton) findViewById(R.id.btnSwitch);.
</code></pre>

<p>Or if you have declared btnswitch but not included that part in code here try checking the functioning on switch and remove flash functions and add a toast alert to check button</p>

<p>Replace </p>

<pre><code> btnSwitch.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        if (isFlashOn) {
            // turn off flash
            turnOffFlash();
        } else {
            // turn on flash
            turnOnFlash();
        }
    }
});
</code></pre>

<p>with </p>

<pre><code>btnSwitch.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        if (isFlashOn) {
Toast toast = Toast.makeText(getApplicationContext(),"ON", Toast.LENGTH_LONG).show();
            //turnOffFlash();


} 
else {

 Toast toast = Toast.makeText(getApplicationContext(),"OFF", Toast.LENGTH_LONG).show();
           // turnOnFlash();

             }
    }
});
</code></pre>

<p>This will help you check if the problem is in click listener or turnOnFlash() function.</p>
