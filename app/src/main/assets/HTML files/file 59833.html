<pre><code>root = malloc(sizeof(node));
</code></pre>

<p>This gives a chunk of uninitialized memory.</p>

<pre><code>if (current_node-&gt;children[index] == NULL)
</code></pre>

<p>Here you assume that the memory has been initialized, while it is actually garbage.</p>

<p>You need to initialize the contents of <code>root</code> before using them, or alternatively use calloc to set them all to zero.</p>
