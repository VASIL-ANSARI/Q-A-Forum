<p>The JVMTI option sounds like it wouldn't be a bad choice. The big issue would be ensuring you wrap everything that may open a file handle: you would basically have to go through the JDK source code and find every native function that did a file open (littered throughout java.io.<em>, java.nio.</em>, I'd think java.net.* as well if you consider sockets as file handles, and just about everywhere else that a file handle may be opened by a native function) and then wrap them all with the <a href="http://download.oracle.com/javase/6/docs/platform/jvmti/jvmti.html#SetNativeMethodPrefix" rel="nofollow">SetNativeMethodPrefix</a> call.</p>

<p>I'm assuming that is what some of the profiling folks do: however if you're not required to do this listing in real time then I'd think it would be WAY easier to use <code>lsof</code> or <code>handle</code> (on Windows platforms) and filter for your JVM's process id.</p>
