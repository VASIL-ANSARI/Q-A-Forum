<p>There is a nice solution my colleague found in actor.im.  <a href="https://github.com/actorapp/actor-platform/blob/master/actor-sdk/sdk-core-ios/ActorSDK/Sources/Controllers/Content/Conversation/Cell/AABubbleTextCell.swift#L312" rel="nofollow">https://github.com/actorapp/actor-platform/blob/master/actor-sdk/sdk-core-ios/ActorSDK/Sources/Controllers/Content/Conversation/Cell/AABubbleTextCell.swift#L312</a></p>

<pre><code>    let container = YYTextContainer(size: CGSizeMake(maxTextWidth, CGFloat.max))

    textLayout = YYTextLayout(container: container, text: attributedText)!

    // print("Text Layouted")

    // Measuring text and padded text heights
    let textSize = textLayout.textBoundingSize

    if textLayout.lines.count == 1 {
        if textLayout.textBoundingSize.width &lt; maxTextWidth - timeWidth {
            //
            // &lt;line_0&gt; &lt;date&gt;
            //
            bubbleSize = CGSize(width: textSize.width + timeWidth, height: textSize.height)
        } else {

            //
            // &lt;line_________0&gt;
            //           &lt;date&gt;
            //
            bubbleSize = CGSize(width: textSize.width, height: textSize.height + 16)
        }
    } else {
        let maxWidth = textSize.width
        let lastLine = textLayout.lines.last!.width
        if lastLine + timeWidth &lt; maxWidth {
            //
            // &lt;line_________0&gt;
            // &lt;line_________1&gt;
            // ..
            // &lt;line_n&gt;  &lt;date&gt;
            //
            bubbleSize = textSize
        } else if lastLine + timeWidth &lt; maxTextWidth {
            //
            // |------------------|
            // &lt;line______0&gt;
            // &lt;line______1&gt;
            // ..
            // &lt;line______n&gt; &lt;date&gt;
            //
            bubbleSize = CGSize(width: max(lastLine + timeWidth, maxWidth), height: textSize.height)
        } else {
            //
            // &lt;line_________0&gt;
            // &lt;line_________1&gt;
            // ..
            // &lt;line_________n&gt;
            //           &lt;date&gt;
            //
            bubbleSize = CGSize(width: max(timeWidth, maxWidth), height: textSize.height + 16)
        }
    }
</code></pre>
