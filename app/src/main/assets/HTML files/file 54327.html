<p>This works to get around it - it looks like the capture rules get a bit stretched for long expressions.</p>

<pre><code>    Collection&lt;? extends A&gt; result = new ArrayList&lt;&gt;();
    B&lt;Collection&lt;? extends A&gt;&gt; when = when(method());
    when.thenReturn(result);
</code></pre>
