<p>Sorry, it might be not an answer for your question, but instead of creating your own solution I recommend to use gem: <a href="https://github.com/bouchard/thumbs_up" rel="nofollow">https://github.com/bouchard/thumbs_up</a>
which already optimized. In your situation it may save a lot of time.
So you need to install gem and then import existing votes to it.</p>
