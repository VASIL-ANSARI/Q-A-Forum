<p>I don't see any checks against <code>end()</code> so I'm going to take a guess that your <code>find</code> calls didn't actually find the key and returned the <code>end</code> iterator. Once you start dereferencing that, all bets on behavior are off. You should either use <code>operator[]</code> to always create the element or check the results of your <code>find</code> against <code>end</code>.</p>
