<blockquote>
  <p>Is my understanding of the templates and translation units wrong?</p>
</blockquote>

<p>Yes. It's wrong.<br>
A copy of template function is created <strong>per type</strong> and <strong>not per translation unit</strong>.</p>

<p>In your case, for <code>test&lt;int&gt;</code> only 1 copy is created and same is used across all the TUs.</p>
