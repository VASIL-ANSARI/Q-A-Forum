<p><a href="http://www.boost.org/doc/libs/release/libs/filesystem/index.html" rel="nofollow">Boost.Filesystem</a> does this portably. Its <a href="http://www.boost.org/doc/libs/1_44_0/libs/filesystem/v3/doc/tutorial.html#Directory-iteration" rel="nofollow">tutorial</a> explains how to perform this exact task. In short:</p>

<pre><code>#include &lt;algorithm&gt;
#include &lt;boost/filesystem.hpp&gt;
#include &lt;iostream&gt;

namespace fs = boost::filesystem;
using namespace std;

int main(int argc, char *argv[])
{
    fs::path p(argv[1]);

    if (fs::exists(p) &amp;&amp; fs::is_directory(p))
        copy(fs::directory_iterator(p), fs::directory_iterator(),
             ostream_iterator&lt;fs::directory_entry&gt;(cout, "\n"));

    return 0;
}
</code></pre>

<p>If you do want to use <code>dirent.h</code>, include it as:</p>

<pre><code>#include &lt;sys/types.h&gt;    /* required before including sys/dirent.h! */
#include &lt;sys/dirent.h&gt;
</code></pre>
