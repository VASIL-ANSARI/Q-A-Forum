<p>Please see the PHP manual page for header(), here: <a href="http://php.net/manual/en/function.header.php" rel="nofollow">http://php.net/manual/en/function.header.php</a></p>

<blockquote>
  <p>Remember that header() must be called before any actual output is
  sent, either by normal HTML tags, blank lines in a file, or from PHP.</p>
</blockquote>

<p>Also, really your insert should be happening only when all of the validation has passed. In your script there is really no reason for it to be happening before this, unless you eventually intend to pass $as_id into renderForm() -- for example, to allow peripheral forms to save relational data before the core record is populated, but this is a bad pattern to follow.</p>

<p>As your code stands, your insert happens BEFORE the form is rendered, and again AFTER the form is submitted. And again every time the user fails validation and re-submits the form.</p>

<p>That said, you could probably get the result you need by swapping out this:</p>

<pre><code>printf ($as_id);
</code></pre>

<p>With something like this:</p>

<pre><code>header('Location: view.php?id='.$as_id);
</code></pre>

<p>Though, realise that doing this, you would never hit the <code>if(isset($_POST['submit']))</code> -- I'm assuming you have this code block duplicated outside of your "NEW RECORD" condition, perhaps in an "EDIT RECORD" condition or similar.</p>

<p>Ideally you'd want to abandon this approach altogether though, in favour of an MVC-style architecture with RESTful routes...</p>
