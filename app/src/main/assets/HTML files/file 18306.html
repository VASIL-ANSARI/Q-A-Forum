<p>Solution:  close <code>fd[0]</code> and <code>fd[1]</code> in the parent.</p>

<p>In the twin fork model, which you want, your parent process (the shell) is keeping its copy of <code>fd[1]</code> open.  With this open, the child <code>pid2</code> will never see EOF on its standard input fd.</p>

<p>Comments:</p>

<ol>
<li>both children should close their pipe fds after dup2'ing</li>
<li>the code after <code>execvp</code>, both above and in your <em>pastie</em> suggests that you think that <code>execvp</code> will return control under ordinary circumstances.  It does not.  For this code, at most you probably want to follow the <code>execvp</code> with a <code>perror</code> and <code>exit</code>.</li>
</ol>
