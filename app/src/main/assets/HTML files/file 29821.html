<p>You have to make a listView to get list of users and try this code</p>

<pre><code> public static  ArrayList&lt;HashMap&lt;String, String&gt;&gt; usersList=new ArrayList&lt;HashMap&lt;String, String&gt;&gt;();


            Presence presence = new Presence(Presence.Type.available);
            Constants.connection.sendPacket(presence);
            setConnection(Constants.connection);

            final Roster roster = Constants.connection.getRoster();
            Collection&lt;RosterEntry&gt; entries = roster.getEntries();

            for (RosterEntry entry : entries) {

                    HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
                    Presence entryPresence = roster.getPresence(entry.getUser());

                    Presence.Type type = entryPresence.getType();       

                    map.put("USER", entry.getName().toString());
                    map.put("STATUS", type.toString());
                    Log.e("USER", entry.getName().toString());

                    usersList.add(map);

            }
</code></pre>

<p>And then add your userList to your ListAdapter and check STATUS is equals to 'avialable' then the user is online otherwise user is Offline.</p>
