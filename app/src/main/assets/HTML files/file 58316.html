<p>Just give the image a <code>width:100%;</code> <strong>without</strong> <code>height: 100%;</code>. This way, it will fit perfectly into the containers width while keeping its aspect ratio, even while resizing the viewport. Just giving <code>height: 100%;</code> will force an image with landscape orientation to overlap the container horizontally.</p>

<p>If there is no text in the container, you can also give the <code>.container</code> a <code>font-size: 0;</code> to <a href="https://css-tricks.com/fighting-the-space-between-inline-block-elements/" rel="nofollow">avoid the white margin</a> below.</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-css lang-css prettyprint-override"><code>#box {
  display: flex;
  flex-direction: column;
}
#container {
  flex: 0 1 auto;
  border: 1px solid red;
  font-size: 0;
}
img {
  width: 100%;
}
header,
footer {
  flex: 0 0 20px;
  background-color: #aaa;
}</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div id="box"&gt;
  &lt;header&gt;
    this is the header text
  &lt;/header&gt;
  &lt;div id="container"&gt;
    &lt;img src="http://cimus.eu/editions/(mi)chile/webcimus/hd/001.jpg" /&gt;
  &lt;/div&gt;
  &lt;footer&gt;
    this is the footer text
  &lt;/footer&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>
