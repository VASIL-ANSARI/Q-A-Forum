<p>Your <code>methodToTest</code> calls <code>a.getSomeField()</code>, but the setup part of your test doesn't expect that call. You want something like:</p>

<pre><code>Foo foo = new Foo();
EasyMock.expect(mock.getSomeField()).andReturn(foo);
</code></pre>

<p>Or to stub the call:</p>

<pre><code>Foo foo = new Foo();
EasyMock.expect(mock.getSomeField()).andStubReturn(foo);
</code></pre>

<p>(before your call to <code>mock.getSomething()</code>).</p>

<p>See <a href="http://stackoverflow.com/questions/3740376/easymock-andreturn-vs-andstubreturn">this question</a> for the differences between <code>andReturn</code> and <code>andStubReturn</code>.</p>
