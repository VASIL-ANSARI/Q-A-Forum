<p>I think the following would work:</p>

<pre><code>class Advertisement
    scope :service_active, joins(:service =&gt; :service_provider)
                           .where(:services =&gt; { :active =&gt; true })
                           .where(:service_providers =&gt; { :active =&gt; true })
end
</code></pre>

<p>Then you should be able to call</p>

<pre><code>Advertisement.ranked.current.service_active
</code></pre>

<p>and get the expected result.</p>
