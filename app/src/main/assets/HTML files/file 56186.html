<p>If <code>image_uploader.rb</code> is a module, call it in your <code>User.rb</code> model using a callback (e.g. <code>after_create</code>) passing the user object and setting the image based on the user's gender.</p>

<p>Something like this:</p>

<pre><code>class User &lt; ActiveRecord::Base
  after_create :set_default_url!

  def set_default_url!
    url = ImageUploader.default_url(gender)
    update!(url: url)
  end
end
</code></pre>

<p>Then, in your module:</p>

<pre><code>class ImageUploader &lt; CarrierWave::Uploader::Base
  def self.default_url(gender)
    ActionController::Base.helpers.asset_path("fallback/" + [version_name, "#{gender.downcase}.PNG"].compact.join('_'))
  end
end
</code></pre>

<p>Some code was obviously omitted for brevity.</p>
