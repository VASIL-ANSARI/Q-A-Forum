<p>It turns out that there was a part of the string that was causing the rendering of the html to choke. Because cucumber syntax pass variables to Scenario steps using &lt; >, there were places that <code>&lt;style&gt;</code> was written.  Because  is a valid open html tag, the html stopped rendering.  I found this out by looking at the page source (where I was using the inspect element on the developer tools before).  I saw that the whole html that I was expecting was in the source.  I parsed through the text and used gsub to replace the <code>&lt;style&gt;</code> tag and all is working now.</p>
