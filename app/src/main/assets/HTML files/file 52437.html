<p>I had this in the past: xml's coming in with each time totally different structures.</p>

<p>So I build something that first analyzed the structure and stored this structure in database tables, to be able to also know the delta's and have some history (and diff-ing) on it. Since sometimes manual intervention is needed (can't predict everything).</p>

<p>After the analysis phase, then a query can be done on the new structure based on the structure analysis.</p>

<p>So I took a two step approach, maybe this is also applicable for you.</p>
