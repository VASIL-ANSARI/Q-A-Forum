<p>Stop watching for the PID file to go away.  Start using <code>flock</code> so the operating system will clean up the lock if you exit prematurely.</p>

<p>Example code from <a href="http://tuxradar.com/practicalphp/8/11/undefined" rel="nofollow">http://tuxradar.com/practicalphp/8/11/undefined</a>:</p>

<pre><code>&lt;?php
    $fp = fopen("foo.txt", "w");
    if (flock($fp, LOCK_EX)) {
        print "Got lock!\n";
        sleep(10);
        flock($fp, LOCK_UN);
    }
?&gt;
</code></pre>

<p>Also, <a href="http://php.net/manual/en/function.flock.php" rel="nofollow">http://php.net/manual/en/function.flock.php</a>.</p>
