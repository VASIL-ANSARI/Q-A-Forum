<p>The problem is you are appending and appending the path. This means that each time you call <code>stroke()</code> the new line together with all the old lines are stroked. You won't see this clearly as the old lines are drawn on top in the same location. And as more and more lines are added the more time it takes to stroke them..</p>

<p>To prevent this you need to break the path. Do this with <code>beginPath()</code>.</p>

<p>If you activate your out-commented line it should work fine:</p>

<pre><code>function line(pt1,pt2,color){
    ctx.beginPath(); //&lt;-- activate this
    ctx.moveTo(pt1.x,pt1.y);
    ctx.lineTo(pt2.x,pt2.y);
    ctx.strokeStyle=color;
    ctx.lineWidth=2;
    ctx.stroke();
}
</code></pre>
