<p>This is a proposal in plain Javascript with an object as hash table for the wanted groups for the average calculation.</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>var data = [{ month: 'Jan', day: 1, cat: 'A', type: 'val', val: 20 }, { month: 'Jan', day: 1, cat: 'B', type: 'val', val: 5 }, { month: 'Jan', day: 2, cat: 'A', type: 'val', val: 10 }, { month: 'Jan', day: 2, cat: 'B', type: 'val', val: 10 }, { month: 'Feb', day: 1, cat: 'A', type: 'val', val: 30 }, { month: 'Feb', day: 1, cat: 'B', type: 'val', val: 10 }, { month: 'Feb', day: 2, cat: 'A', type: 'val', val: 20 }, { month: 'Feb', day: 2, cat: 'B', type: 'val', val: 20 }],
    hash = Object.create(null),
    result = data.map(function (a, i) {
        var key = a.day + '|' + a.cat;
        this[key] = this[key] || { indices: [], sum: 0 };
        this[key].indices.push(i);
        this[key].sum += a.val;
        return { month: a.month, day: a.day, cat: a.cat, type: 'avg' };
    }, hash);

Object.keys(hash).forEach(function (k) {
    hash[k].indices.forEach(function (i) {
        result[i].val = hash[k].sum / hash[k].indices.length;
    });
});

console.log(result);</code></pre>
</div>
</div>
</p>
