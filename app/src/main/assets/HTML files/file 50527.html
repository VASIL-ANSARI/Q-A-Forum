<p>You need to escape the '?' sign in your regexp using a backslash ( '\?' instead of '?').</p>

<p>But your code can be easily refactored to use preg_replace_callback instead:</p>

<pre><code>$params = array(1, 3);
$str = '? bla ?';
echo preg_replace_callback('#\?#', function() use (&amp;$params) {
    return array_pop($params);
}, $str);
</code></pre>
