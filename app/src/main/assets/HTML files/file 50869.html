<p>This proposal features for the given array for iterating
 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" rel="nofollow"><code>Array.prototype.forEach()</code></a></p>

<blockquote>
  <p>The <code>forEach()</code> method executes a provided function once per array element.</p>
</blockquote>

<p>and for splitting the strings <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match" rel="nofollow"><code>String.prototype.match()</code></a></p>

<blockquote>
  <p>The <code>match()</code> method retrieves the matches when matching a string against a regular expression.</p>
</blockquote>

<p>and for the look up  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some" rel="nofollow"><code>Array.prototype.some()</code></a></p>

<blockquote>
  <p>The <code>some()</code> method tests whether some element in the array passes the test implemented by the provided function.</p>
</blockquote>

<p>If a <code>code</code> is found then the reference of <code>sub</code> is used for the next level.</p>

<p>If not, then a new object is pushed to the actual array.</p>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>var data = ['AABBCC', 'AABBDD', 'BBBBTT', 'BBVVDD'],
    obj = [];

data.forEach(function (a) {
    var o = obj, keys = a.match(/.{1,2}/g);
    keys.forEach(function (k) {
        var oo = { code: k, sub: [] };
        if (!o.some(function (b) {
            if (b.code === k) {
                o = b.sub;
                return true;
            }
        })) {
            o.push(oo);
            o = oo.sub;
        }
    });
});

document.write('&lt;pre&gt;' + JSON.stringify(obj, 0, 4) + '&lt;/pre&gt;');</code></pre>
</div>
</div>
</p>
