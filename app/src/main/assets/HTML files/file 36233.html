<p>Instead of comparison with EOF, you should use the <a href="http://www.cplusplus.com/reference/cstdio/feof/?kw=feof" rel="nofollow">feof</a> function while reading from file. EOF is just an error code returned by some functions, not an actual character in the file.</p>

<p>Also, I notice that the thing with the character 3 seems a way to signal the end of the file. You should consider normalizing the data transfer. You could send at the beginning of the communication the size of the file, and the client reads exactly the size of the file, to avoid having problems with files that contain that character (3 is still a valid character).</p>

<p>For inspiration, take a look at an <a href="https://github.com/Paul92/FileTransfer" rel="nofollow">old project</a> of mine that implements this behavior (although it's linux only).</p>
