<p>I've been struggling with similar problems recently and what was really helpful is the Moles framework from Microsoft Research - <a href="http://research.microsoft.com/en-us/projects/moles/" rel="nofollow">http://research.microsoft.com/en-us/projects/moles/</a>. It allows you to fake anything from BCL including HttpContext.Current.</p>
