<p>Just replace</p>

<pre><code>if(!path.lastIndexOf('.htm') &gt;= 0)
</code></pre>

<p>To</p>

<pre><code>if(!(path.lastIndexOf('.htm') &gt;= 0))
</code></pre>

<p>It fires every time because js engine firstly calculate !path.lastIndexOf('.htm') and then compares result with 0</p>

<p>For example index of .htm is 10</p>

<p>First calculation is !10 and it gives false as result (here is !10 casts to bool)</p>

<p>Second operation: false >= 0 (false casts to 0 and condition is true)</p>
