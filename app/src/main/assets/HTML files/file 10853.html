<p>Your approach does not and cannot work. You cannot deduce a "container based on an element"!</p>

<p>For a simple argument, consider this thought experiment:</p>

<pre><code>struct Foo { typedef int type; }
struct Bar { typedef int type; }

template &lt;typename T&gt; void deduce_me(typename T::type n) { }
</code></pre>

<p>Now if I call <code>deduce_me(5)</code>, how are we supposed to deduce either <code>Foo</code> or <code>Bar</code>?</p>
