<p>Well, in fact <code>gdb.execute</code> with the third argument is actually supported in gdb 7.3 which is dated 2011, so I guess using it is fine. So I decided to go with this command</p>

<pre><code>import gdb
import sys


class ConcatCommand(gdb.Command):
    """Executes a command and print concatenated results with a prefix."""

def __init__(self):
    super(ConcatCommand, self).__init__("concat", gdb.COMMAND_USER)

def invoke(self, arg, from_tty):
    pair = arg.partition(' ')
    sys.stdout.write(pair[0] + gdb.execute(pair[2], False, True))
    sys.stdout.flush()

ConcatCommand()
</code></pre>

<p>Execute it like <code>-interpreter-exec console "concat token info variables"</code>. Then I just take the contents of console record that starts with a token.</p>
