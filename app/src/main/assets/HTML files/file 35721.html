<p>What you register is the base type without any references.</p>

<pre><code>qRegisterMetaType&lt;QQueue&lt;double&gt;&gt;();
</code></pre>

<p>You must also declare the metatype in every compilation unit where it will be used - thus ideally you should have a typedef in its own header file:</p>

<pre><code>// DoubleQueue.h
#ifndef DOUBLEQUEUE_H
#define DOUBLEQUEUE_H

#include &lt;QQueue&gt;

typedef QQueue&lt;double&gt; DoubleQueue;
Q_DECLARE_METATYPE(DoubleQueue)

#endif
</code></pre>

<p>Then you must consistently use and register <code>DoubleQueue</code> only - remember that for <code>moc</code>, a type is a chunk of text. After the references are stripped, it must match exactly.</p>

<pre><code>qRegisterMetaType&lt;DoubleQueue&gt;();
</code></pre>
