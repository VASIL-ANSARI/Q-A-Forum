<p>I created a new project and pasted your code and it works for me. Make sure you have done a full rebuild before running. Also, with this line:</p>

<pre><code>dialog.FileName = DateTime.Now.ToString(format) + "." + ext;
</code></pre>

<p>The dialog box will have a file name to begin with. Therefore, only hitting the cancel button (assuming you don't clear the save dialog first) will trigger the message box. Either way, I got the message box to pop up by failing your IF test either way. Your code looks alright.</p>
