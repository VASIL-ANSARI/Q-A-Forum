<p>Well, compiler's barking: "Encountered "SIZE" at character 31, but expected: ["AVG", "COUNT", "KEY", "MAX", "MIN", "SUM", "VALUE", ]." while parsing JPQL...."</p>

<p>SIZE is a function that doesn't conform to the specification of the ORDER BY clause:</p>

<blockquote>
  <p>The ORDER BY clause allows the objects or values that are returned by the query to be ordered. The syntax of the ORDER BY clause is
  orderby_clause ::= ORDER BY orderby_item {, orderby_item}*
  orderby_item ::= state_field_path_expression [ASC | DESC]
  It is legal to specify DISTINCT with MAX or MIN, but it does not affect the result.
  When the ORDER BY clause is used in a query, each element of the SELECT clause of the query must be one of the following: an identification variable x, optionally denoted as OBJECT(x), a single_valued_association_path_expression, or a state_field_path_expression.</p>
</blockquote>

<p>Furthermore: </p>

<blockquote>
  <p>The SIZE function returns an integer value, the number of elements of the collection. If the collection is empty, the SIZE function evaluates to zero.</p>
</blockquote>

<hr>

<p>Try this:</p>

<pre><code>public List&lt;Post&gt; getMostCommentedPosts(int page, int postsPerPage){

        CriteriaBuilder cb = em.getCriteriaBuilder();
        CriteriaQuery&lt;Post&gt; cq = cb.createQuery(Post.class);
        Root&lt;Post&gt; p = cq.from(Post.class);
        cq.select(p).where(cb.isNotEmpty(p.get("comments")));
        List list = em.createQuery(cq).getResultList();
        for(Set each : list)
        {
            System.out.println(each.size());
        }

}
</code></pre>
