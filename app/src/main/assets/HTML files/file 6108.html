<p>Trying using a <code>dispatch_sempahore</code>. It should look something like this:</p>

<pre><code>dispatch_semaphore_t sema = dispatch_semaphore_create(0);

[object runSomeLongOperationAndDo:^{
    STAssertâ¦

    dispatch_semaphore_signal(sema);
}];

dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
dispatch_release(sema);
</code></pre>

<p>This should behave correctly even if <code>runSomeLongOperationAndDo:</code> decides that the operation isn't actually long enough to merit threading and runs synchronously instead.</p>
