<p>First, you should take into account that Riak automatically adds suffix <code>_set</code>, so that you don't have to name yours <code>type_set</code> but <code>type</code>. Otherwise you will have to query for <code>type_set_set:*</code> instead of <code>type_set:*</code>.</p>

<p>Second, according to <a href="https://docs.basho.com/riak/kv/2.0.0/developing/usage/searching-data-types/#data-type-schemas" rel="nofollow">Data Type Schemas</a>, embedded schemas (as opposed to top-level ones) must use dynamic fields. Apparently Riak prepends field names with some internal identifier of the top-level map. Unfortunately, this also means that you cannot index one set without indexing the other as well.</p>

<p>I've run some tests and found out that <code>&lt;dynamicField name="*_set" type="string" indexed="true" stored="true" multiValued="true"/&gt;</code> works fine, while <code>&lt;dynamicField name="*type_set" type="string" indexed="true" stored="true" multiValued="true"/&gt;</code> does not.</p>
