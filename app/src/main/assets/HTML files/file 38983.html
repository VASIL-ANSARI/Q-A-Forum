<p>Just add this near the top:</p>

<pre><code>x += 0.5e-9.
</code></pre>

<p>This will add half the "epsilon" (minimum value change) for the maximum precision of timespec, effectively "rounding" the input.  Note that if the value of x is more than 15 decimal digits of precision, it will never be accurate, because that's all double gives you.  But 10.1 should work correctly if you "round up" as above.</p>
