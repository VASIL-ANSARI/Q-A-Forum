<p><code>stat</code> is a POSIX function. <code>_tstat</code> is a Windows function intended to help porting POSIX code to Windows (but the _t stuff hinders porting the other way). Don't expect the best performance from such wrappers.</p>

<p>In particular, <code>stat</code> is the equivalent of <code>FindFirstFile</code> on Windows, and the CRT code included with Visual Studio confirms this: the first system call in <code>_stat</code> is to <code>FindFirstFileEx(FindExInfoStandard ... FindExSearchNameMatch)</code>. . It gives you a number of properties of a directory entry, including the file size <em>in the directory</em>. For a file that's being written, that information is out of date. <a href="http://blogs.msdn.com/b/oldnewthing/archive/2011/12/26/10251026.aspx" rel="nofollow"><code>GetFileSize</code> has the correct size</a></p>

<p>(Note that <code>_stat</code> is also doing quite a bit of work to get all kinds of properties that you don't even want. That was pretty cheap on UNIX, but on Windows the file access rights stuff has to be emulated. Not fast either.) </p>
