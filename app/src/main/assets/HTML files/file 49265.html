<p><code>vmalloc_exec</code> is not exported for driver use, so you cannot use it.</p>

<p>However, <a href="http://lxr.free-electrons.com/ident?v=4.2;i=__vmalloc" rel="nofollow"><code>__vmalloc</code></a> takes a page protections argument, so it should do what you want:</p>

<pre><code>void *__vmalloc(unsigned long size, gfp_t gfp_mask, pgprot_t prot);
</code></pre>

<p>So to allocate executable pages, try this:</p>

<pre><code>void *p = __vmalloc(size, GFP_KERNEL, PAGE_KERNEL_EXEC);
</code></pre>
