<p>Personally whenever I do file operations I will use apache <a href="http://commons.apache.org/io/" rel="nofollow">Commons-io</a>.  I find the API much easier to work with than Java's own while still using standard File object.</p>

<p>That said I do not know if switching will make it list without hanging.  </p>

<p>Insert a logging statement in your accept method. I'd recommend a logging library but a simple</p>

<p>System.out.println("Checking " + name + " in " + dir);</p>

<p>Should suffice.</p>

<p>You will now where it is hanging but probably not why.  Perhaps it is not hanging for the reason you think it is, the log statement will give you more information on this.  You can dig deeper by trace debugging the code though for this you will probably need to download the source code of the JDK.</p>

<p>What is the illegal character you have in your file that is causing problem ?</p>

<p>Also, a second look here at your code.  The file name contains the file and extension.  By checking with endsWith you risk getting false positive where a file may not have an extention or a different extention.  For example :</p>

<p>FILE_EXTENSION = "log";</p>

<p>The following files will trigger though it will not be what you want.</p>

<ul>
<li>totolog</li>
<li>toto.totolog</li>
</ul>

<p>You can prepend the . before, if you have full control (not user defined configuration) then it will do but a cleaner solution is to extract the extension and compare that.  A simple call to <a href="http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html#getExtension%28java.lang.String%29" rel="nofollow">FilenameUtils.getExtension</a> will do the trick.</p>
