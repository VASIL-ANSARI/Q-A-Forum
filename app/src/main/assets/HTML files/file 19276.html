<p>i have been using below dirutils lib that i think does what u are trying to do. it uses toPath.resolve()</p>

<p><a href="https://github.com/bbejeck/Java-7/blob/master/src/main/java/bbejeck/nio/files/visitor/CopyDirVisitor.java" rel="nofollow">https://github.com/bbejeck/Java-7/blob/master/src/main/java/bbejeck/nio/files/visitor/CopyDirVisitor.java</a></p>

<p>Edit:
lol now that you say it I revisited my code and noticed I had patched just that part of the lib. One forgets things so easily..</p>

<pre><code> @Override
public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {

    Path relativizedPath =fromPath.relativize(dir);

    Path targetPath = toPath.resolve(relativizedPath.toString());
    if(!Files.exists(targetPath)){
        Files.createDirectory(targetPath);
    }
    return FileVisitResult.CONTINUE;
}
</code></pre>
