<p>Tricky problem. Try the following solution</p>

<pre><code>SELECT id,sender_id,receiver_id,
CASE WHEN sender_id &gt;= receiver_id THEN 
  CONCAT(CAST(sender_id AS CHAR),'|', CAST(receiver_id AS CHAR))
ELSE
  CONCAT(CAST(receiver_id AS CHAR),'|' CAST(sender_id AS CHAR))
END AS participants ,
`datetime`,message from messages 
ORDER BY participants,`datetime`
</code></pre>

<p>This way you have an extra calculated field that represents the sender_id-receiver_id relation where you require that the combination of the two is an entity. Ordering by a calculated field will probably become slow at some point. You may want to consider creating an actual extra field in the table to store the participants information.</p>
