<p>Nothing happens because you're not doing anything with the result. See <a href="http://php.net/manual/en/function.imagecopyresampled.php" rel="nofollow">the documentation for <code>imagecopyresampled</code></a>:</p>

<blockquote>
  <p><code>imagecopyresampled()</code> will take a rectangular area from <code>src_image</code> [...] and place it in a rectangular area of <code>dst_image</code>.</p>
</blockquote>

<p>After running this function, the result will be in <code>$dst_r</code>, which is still an in-memory image resource. You now have to save it to a file. This can be done with the <a href="http://php.net/manual/en/function.imagejpeg.php" rel="nofollow"><code>imagejpeg</code> function</a>, for example:</p>

<pre><code>imagejpeg($dst_r, "$dirname/avatar_cropped.jpeg");
</code></pre>
