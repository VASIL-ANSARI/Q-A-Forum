<p>This is not a capistrano issue but SSH. </p>

<p>I guess you are running capistrano from the same server to which you are deploying.</p>

<p>It doesn't matter what user do you use to run 'cap', what it really matters is what user you are if you 'ssh' to your server.</p>

<p>If you are 'development' user and ssh to your server, what user are you ?</p>

<p>root?, then fix your .ssh/config file.</p>

<p>Your deploy.rb looks good, but I would DRY it with:</p>

<pre><code>namespace :sphinx do
  desc "Start Sphinx Searchd"
  task :start, :roles =&gt; :app do
    rake "ts:start"
  end

  desc "Stop Sphinx Searchd"
  task :stop, :roles =&gt; :app do
    rake "ts:stop"
  end
  desc "Restart Sphinx Searchd"
  task :restart, :roles =&gt; :app do
    rake "ts:restart"
  end
end

def rake(rake_task)
  if rake_task
    raise "Rails environment not set" unless rails_env
    run "cd #{current_path} &amp;&amp; rake #{rake_task} RAILS_ENV=#{rails_env}"
  end
end
</code></pre>
