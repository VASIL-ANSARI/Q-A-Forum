<p>How about <a href="http://jsfiddle.net/LAJzT/2/" rel="nofollow">this fiddle</a></p>

<pre><code>$('p').each(function(index, p) {
    p.find('img').each(function() {
        if (p.text() != '') {
            var newParagraph = $('&lt;p&gt;&lt;/p&gt;');
            var html = p.html();
            newParagraph.append($(this));

            if (html.substring(0,1) != '&lt;') {
                p.after(newParagraph);
            }
            else {
                p.before(newParagraph);
            }

        }         
    });
});

$('p').each(function(i) {
   $(this).attr('id', i);
});
</code></pre>
