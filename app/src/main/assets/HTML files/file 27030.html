<p>Please try to use helper for this, more info can be found <a href="http://ellislab.com/codeigniter/user-guide/helpers/string_helper.html" rel="nofollow">here</a></p>

<pre><code>//example from the site

$string="Joe's \"dinner\"";
$string=quotes_to_entities($string); //results in "Joe&amp;#39;s &amp;quot;dinner&amp;quot;"
</code></pre>

<p>I just found this</p>

<pre><code>- * In some versions of PHP the native function does not work
- * when UTF-8 is the specified character set, so this gives us
- * a work-around.  More info here:
- * http://bugs.php.net/bug.php?id=25670
- *
- * NOTE: html_entity_decode() has a bug in some PHP versions when UTF-8 is the
- * character set, and the PHP developers said they were not back porting the
- * fix to versions other than PHP 5.x.
</code></pre>

<p>workaround in CI should be loading security library and use it like this</p>

<pre><code>$this-&gt;load-&gt;library('security');
return $this-&gt;security-&gt;entity_decode($str, $charset);
</code></pre>
