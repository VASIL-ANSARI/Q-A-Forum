<p>Try this</p>

<pre><code>url = "#{@config[:host]}#{@config[:login_path]}"
c = Faraday.new(:url =&gt; url,
                :request =&gt; { :timeout =&gt; 20, :open_timeout =&gt; 5},
                :ssl =&gt; {:verify =&gt; false}) do |f|
  f.request :url_encoded
  f.adapter Faraday.default_adapter
  f.response :json, :content_type =&gt; /\bjson$/url = "#{@config[:host]}#{@config[:login_path]}"
c = Faraday.new(:url =&gt; url,
                :request =&gt; { :timeout =&gt; 20, :open_timeout =&gt; 5},
                :ssl =&gt; {:verify =&gt; false}) do |f|
  f.request :url_encoded
  f.adapter Faraday.default_adapter
  f.response :json, :content_type =&gt; /\bjson$/
  f.proxy = "http://2abcf906-127e-495c-ae71-c69712862292:616e714aea0cfc81de67ad1445cf1448e38d6a8db345a452c0e1ddc830b8f132@f.services.g1.app.cloud.my_company.net:49349"
end

  @resp = c.post(url, {username: username, password: password,
    deviceId: @config[:device_id], deviceName: @config[:device_name], deviceType: @config[:device_type],
    appId: @config[:app_id], scope: @config[:scope]})

end

  @resp = c.post(url, {username: username, password: password,
    deviceId: @config[:device_id], deviceName: @config[:device_name], deviceType: @config[:device_type],
    appId: @config[:app_id], scope: @config[:scope]})
</code></pre>

<p>Here they says how to set up a proxy on faraday request doing </p>

<pre><code>conn = Faraday.new(url, ssl: {verify:false}) do |conn|
  # middleware ...
  conn.adapter &lt;adapter&gt;

  conn.proxy "http://localhost:80"
end
</code></pre>

<p><a href="https://github.com/lostisland/faraday/issues/221" rel="nofollow">https://github.com/lostisland/faraday/issues/221</a></p>
