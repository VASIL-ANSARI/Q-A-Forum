<p>Answering my own question here, so people don't waste time trying to help me.</p>

<p>It turns out that this error, and indeed most of the errors I was seeing, were red herrings.</p>

<p>I thought the reason for the differences I was getting compiling in XCode rather than Visual Studio were due to compiler differences (this is usually the culprit).</p>

<p>But it turns out it was due to differences in the libraries.</p>

<p>XCode uses the LLVM libcxx, which includes some compile time checks that others don't.</p>

<p>For example in the vector&lt;> definition, we have</p>

<pre><code>    static_assert((is_same&lt;typename allocator_type::value_type, value_type&gt;::value),
              "Allocator::value_type must be same type as value_type");
</code></pre>

<p>Now in the st_tree container, there were places where the developer had used the allocator given for the tree value type in vector declarations for internal values.</p>

<p>Now, when the compiler hit that static_assert failure, it popped up an error, as I would expect, but then continued on in a very broken manner, giving a load of misleading errors, such as the one that prompted me to post this question.</p>

<p>I've informed the developer of st_tree of the issues with his code.</p>
