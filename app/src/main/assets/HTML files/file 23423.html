<p>To be able to see the progress, you need to run your function in a separate thread, otherwise the UI thread is too busy to show anything. You can use an <a href="http://developer.android.com/reference/android/os/AsyncTask.html" rel="nofollow">AsyncTask</a>.</p>

<p>To cancel it when needed, use the cancel mechanism of the AsyncTask. Basically, your will have to check regularly whether you are supposed to stop working, and exit your task if requested. All the information you need is in the AsyncTask documentation.</p>
