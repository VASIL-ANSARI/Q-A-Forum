<p>You're not requesting the right permission. Change this code:</p>

<pre><code>FB.Connect.showPermissionDialog("offline_access");
</code></pre>

<p>to</p>

<pre><code>FB.Connect.showPermissionDialog("publish_stream");
</code></pre>

<p>You can also specify a second parameter here. Give the second parameter a callback function with an argument like this:</p>

<pre><code>FB.Connect.showPermissionDialog("publish_stream", function(perms){ /* ... */ });
</code></pre>

<p>and you can test to see if the user accepted or not (<code>!perms</code> will return true if the user cancelled). That way, you can avoid throwing unnecessary errors.</p>
