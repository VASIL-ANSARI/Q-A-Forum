<p>Your <code>commandHistory</code> is actually a <strong>two-dimensinal</strong> array of strings/char pointers, while you want a one dimensional one. You should declare it like this:</p>

<pre><code>char *commandHistory[MAX_COMMANDS];
</code></pre>

<p>and you don't need to worry about the string length at this point, since each command is allocated dynamically. And then to access the <code>i</code>'th string from this array you just need <code>commandHistory[i]</code>, which is of type <code>char *</code>.</p>

<p><strong>Update:</strong> <br>
If you (or the instructor) insist on having  <code>commandHistory</code> declared as static two dimensional array:</p>

<pre><code> char commandHistory[MAX_COMMANDS][MAX_LINE_LENGTH + 1];
</code></pre>

<p>You should not allocate the buffer dynamically as you do, but <strong>copy</strong> the commands into corresponding place in your <strong>statically pre-allocated</strong> array <code>commandHistory</code> (i.e. instead of <code>buffer[position]=..</code> do <code>commandHistory[i][position] = ...</code>).</p>
