<p>You've got several alternatives.</p>

<p>For driving interactive programs programmatically, use <a href="http://expect.sourceforge.net" rel="nofollow"><code>expect</code></a>, or <a href="https://pexpect.readthedocs.org/en/latest/" rel="nofollow"><code>pexpect</code></a>.</p>

<p>For testing, redefine <code>input()</code>.  Create a different function that is not interactive to drive the REPL through its tests, and insert it in the module where <code>repl()</code> is defined.  It will shadow the builtin <code>input()</code> and yours will be called instead.</p>

<p>Don't test <code>repl()</code>, test <code>do_stuff_with()</code> instead.</p>
