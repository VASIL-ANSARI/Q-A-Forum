<p>Try this</p>

<pre><code>if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message .= '&lt;p&gt;'.$msg.'&lt;/p&gt;';    
}
} else {
$message = "File uploaded successfully";
$sub=1; // keep here sub=1
}
</code></pre>

<p>The $sub=1 is executing when the submit is pressed since it is given in <code>if (isset($_POST['submit']))</code> this means if submit is set.It should be given when upload completes.</p>
