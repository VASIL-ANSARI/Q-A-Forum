<p>You have to change your main like this:</p>

<pre><code>X* a;     // create an uninitialized pointer
func(&amp;a); // pass the address of that pointer to the function
</code></pre>

<p>And inside your function, do this:</p>

<pre><code>void func(X** a){
   int size = 5;
   X* array = (X*)malloc(5*sizeof(X));
   //some writing to the array..
   *a = array; // change the value of the pointer to point to the array
               // you allocated
}
</code></pre>

<p>Note that in C++ the way to go would be to use an <code>std::vector&lt;X&gt;</code>:</p>

<pre><code>std::vector&lt;X&gt; func() {
    std::vector&lt;X&gt; buffer(5);
    // do stuff with buffer
    return buffer;
}

std::vector&lt;X&gt; foo = func();
</code></pre>

<p>This would create a new <code>vector</code> inside the function and return a copy of that vector to the caller. Note that the copy would be optimized away.</p>
