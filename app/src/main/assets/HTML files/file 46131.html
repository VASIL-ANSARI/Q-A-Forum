<p>You can use such xpath to take all nodes in <code>div[@class='a']</code> before <code>div[@class="stop-here"]</code></p>

<pre><code>`//div[@class='a']/*[following::div[@class="stop-here"]]`
</code></pre>

<p><strong>update</strong> it works very easy</p>

<p><code>div[@class='a']/*</code> takes all children of the node</p>

<p><code>[following::div[@class="stop-here"]]</code> selects among them those for which <code>div[@class="stop-here"]</code> is ahead</p>
