<p>The WP codex page <a href="http://codex.wordpress.org/Function_Reference/register_uninstall_hook" rel="nofollow">http://codex.wordpress.org/Function_Reference/register_uninstall_hook</a> has 2 important pieces of information, only 1 of which you list in your question. You do need to make sure that you register the hook.</p>

<p>That aside, if you want to remove all custom post data (regardless if it is upon uninstallation or as another person commented having a seperate button to remove data as many plugins do) you need to be sure to remove the postmeta records as well.</p>

<pre><code>global $wpdb;
$cptName = 'messages';
$tablePostMeta = $wpdb-&gt;prefix . 'postmeta';
$tablePosts = $wpdb-&gt;prefix . 'posts';

$postMetaDeleteQuery = "DELETE FROM $tablePostMeta".
                      " WHERE post_id IN".
                      " (SELECT id FROM $tablePosts WHERE post_type='$cptName'";
$postDeleteQuery = "DELETE FROM $tablePosts WHERE post_type='$cptName'";

$wpdb-&gt;query($postMetaDeleteQuery);
$wpdb-&gt;query($postDeleteQuery);
</code></pre>
