<p>Don't bother with a <code>Structure</code> here, just have the <code>shmat</code> call return a <code>Pointer</code> and use <code>Pointer.getInt(0)</code> to get the ID and <code>Pointer.getInt(4)</code> to get the <code>data</code> field.  </p>

<p>You can even use <code>Native.getDirectBufferPointer()</code> to give you an NIO buffer that you can pass off to other Java code.</p>

<p>If you're reading an array of contiguously allocated <code>struct</code>, then you should create your first <code>Structure</code> using the <code>Pointer</code>-based constructor, then invoke <code>Structure.toArray(size)</code> on that instance to load the full array.</p>

<pre><code>Pointer p = lib.shmat();
MyCStruc s = new MyCStruc(p);
MyCStruc[] array = (MyCStruc[])s.toArray(size);
</code></pre>

<p>And the constructor:</p>

<pre><code>public class MyCStruc extends Structure {
    public MyCStruc(Pointer p) {
        super(p);
        read();
    }
}
</code></pre>
