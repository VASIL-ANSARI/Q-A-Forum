<p>Since your <code>a</code> argument is referencing the <code>&lt;tr&gt;</code> being clicked, by using <code>a.parentNode.parentNode</code> you're actually changing the <code>backgroundColor</code> of the table.</p>

<p>Try this instead:</p>

<pre><code>function visited(tr) {
    tr.style.backgroundColor = "red";
}
</code></pre>

<p>As per your edit, try this:</p>

<pre><code>function visited(tr) {
    var table = tr.parentNode.parentNode;
    var trs = table.getElementsByTagName('tr');

    for (var i = 0; i &lt; trs.length; i++)
        {
        trs[i].style.backgroundColor = null;
        trs[i].style.color = null;
        }

    tr.style.backgroundColor = '#000';
    tr.style.color = '#fff';
}
</code></pre>
