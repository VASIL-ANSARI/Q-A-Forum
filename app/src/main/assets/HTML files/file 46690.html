<pre><code>  def updates
    data=params[:data].as_json(only: [:id, :sort])
    h = {}
    data.each_with_index { |e, i| h[e['id']] = e }
    Linecategory.update(h.keys, h.values)
    render json: {update: 1, data: h}
  end
</code></pre>

<p>Mine has found solutions, I still don't katsa completely optimal, since before the update I have to use:
data.each_with_index { |e, i| h[e['id']] = e }
but even so it works.
Plausible queries to update the database continues to be set, but girlfriend can do it?</p>

<pre><code> Linecategory Load (0.4ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 6 LIMIT 1
       (0.3ms)  BEGIN
      Linecategory Exists (0.4ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'our_dreams' AND `linecategories`.`id` != 6) LIMIT 1
      SQL (0.2ms)  UPDATE `linecategories` SET `sort` = 1, `updated_at` = '2015-07-20 21:07:47' WHERE `linecategories`.`id` = 6
       (2.3ms)  COMMIT
      Linecategory Load (0.5ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 4 LIMIT 1
       (0.3ms)  BEGIN
      Linecategory Exists (0.7ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'beauty_and_health' AND `linecategories`.`id` != 4) LIMIT 1
      SQL (0.3ms)  UPDATE `linecategories` SET `sort` = 2, `updated_at` = '2015-07-20 21:07:47' WHERE `linecategories`.`id` = 4
       (1.0ms)  COMMIT
      Linecategory Load (0.2ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 1 LIMIT 1
       (0.2ms)  BEGIN
      Linecategory Exists (0.7ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'horoscopes' AND `linecategories`.`id` != 1) LIMIT 1
      SQL (0.2ms)  UPDATE `linecategories` SET `sort` = 3, `updated_at` = '2015-07-20 21:07:47' WHERE `linecategories`.`id` = 1
       (0.9ms)  COMMIT
      Linecategory Load (0.4ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 2 LIMIT 1
       (0.3ms)  BEGIN
      Linecategory Exists (0.4ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'test_yourself' AND `linecategories`.`id` != 2) LIMIT 1
      SQL (0.5ms)  UPDATE `linecategories` SET `sort` = 4, `updated_at` = '2015-07-20 21:07:48' WHERE `linecategories`.`id` = 2
       (0.9ms)  COMMIT
      Linecategory Load (0.3ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 5 LIMIT 1
       (0.2ms)  BEGIN
      Linecategory Exists (0.5ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'divination' AND `linecategories`.`id` != 5) LIMIT 1
      SQL (0.2ms)  UPDATE `linecategories` SET `sort` = 5, `updated_at` = '2015-07-20 21:07:48' WHERE `linecategories`.`id` = 5
       (0.8ms)  COMMIT
      Linecategory Load (0.3ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 7 LIMIT 1
       (0.1ms)  BEGIN
      Linecategory Exists (0.4ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'what_is_it_in_my_name' AND `linecategories`.`id` != 7) LIMIT 1
      SQL (0.2ms)  UPDATE `linecategories` SET `sort` = 6, `updated_at` = '2015-07-20 21:07:48' WHERE `linecategories`.`id` = 7
       (0.9ms)  COMMIT
      Linecategory Load (0.3ms)  SELECT  `linecategories`.* FROM `linecategories`  WHERE `linecategories`.`id` = 3 LIMIT 1
       (0.2ms)  BEGIN
      Linecategory Exists (0.4ms)  SELECT  1 AS one FROM `linecategories`  WHERE (`linecategories`.`slug` = BINARY 'delicious' AND `linecategories`.`id` != 3) LIMIT 1
      SQL (0.3ms)  UPDATE `linecategories` SET `sort` = 7, `updated_at` = '2015-07-20 21:07:48' WHERE `linecategories`.`id` = 3
       (1.0ms)  COMMIT
</code></pre>
