<p>Wathershed is probably what will give you an approximation to the solution.</p>

<p>Other thing that you may do is try labelling images with the number of flakes and particles you can count and feed it to a deep neural net and let it findout how to count the flakes, if you have enough training cases you may endup with a good result in the output</p>

<p>information on whatershed can be found at this link
<a href="http://www.pyimagesearch.com/2015/11/02/watershed-opencv/" rel="nofollow">http://www.pyimagesearch.com/2015/11/02/watershed-opencv/</a></p>
