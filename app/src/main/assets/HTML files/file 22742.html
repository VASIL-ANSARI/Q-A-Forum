<p>First off, this is two separate bugs, and unless there is something else going on you aren't telling us the first script has nothing to do with either.</p>

<p>Bug 1: If your script echos <code>"something went wrong"</code> during a call <code>to showCart()</code> then you should be debugging your database connection and your statement prepare.  Unless some of those column names or the row name is wrong, the error will most likely be in your connection.  Try echoing the DB error info to see what is going on.</p>

<p>Bug 2: duplicated product data when showing cart: </p>

<p>To properly debug this we'd need to see how you add a product to the cart in the first place, but likely however you do so is interacting with this line negatively:</p>

<pre><code>foreach ($items as $item) {
            $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
        }
</code></pre>

<p><strong>EDIT</strong></p>

<p>Actually it probably isn't that line causing the second bug, it probably is the fact that you echo product info even if the DB call fails.</p>
