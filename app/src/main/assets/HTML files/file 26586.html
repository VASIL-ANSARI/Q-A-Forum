<p>Seems like you are using a rspec integration method. 
<code>request_via_redirect</code>, <code>post_via_redirect</code> and other methods like that are made to work with testing integration environment. Those functions only work inside a test/spec kind of file.</p>

<p>Try changing your code to the following:</p>

<pre><code>def synchronize
    require "uri"
    require "net/http"
    Net::HTTP.post_form(URI.parse(synchronize_companies_path), params)
end
</code></pre>

<p>I am pretty sure that there's a better way of doing what you want to do. Some more information about your intentions should help.</p>
