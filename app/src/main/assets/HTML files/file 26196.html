<p>See if you can get the query below to work for you. OFX is very particular.</p>

<pre><code>1. Must be a new line after the HTTP headers, if you use them.
2. Must be a new line after the OFX header, i.e., before the OFX tag.
3. No extra tabs, spaces, whatever.
4. Only elements that can have multiple child elements should be closed with end tags when the institution is using v1.xxx (see your trnuid v. mine).
5. From my experience, the error messages rarely point to the real problem!
</code></pre>

<p>A way to discover all the info you need about a given institution, including ofx version, security requirements, etc., is to use this query. Note that the institution should respond with this info using the anonymous login and password shown.</p>

<p>Note 1: DTCLIENT: I use today's date, not important really</p>

<p>Note 2: DTPROFUP: The date we last received an update. I don't keep the profile, so I arbitrarily use today's date minus 2 years. I really don't think it matters when using anonymous login ...</p>

<pre><code>POST https://the.appropriate.url HTTP/1.1
Content-Type: application/x-oFX
Content-length: whatever.the.right.length.is
ENCODING:USASCII
OFXHEADER:200
DATA:OFXSGML
VERSION:211
SECURITY:NONE
CHARSET:UTF-8
COMPRESSION:NONE
OLDFILEUID:NONE
NEWFILEUID:NONE
&lt;OFX&gt;
    &lt;SIGNONMSGSRQV1&gt;
        &lt;SONRQ&gt;
            &lt;DTCLIENT&gt;20130726092234
            &lt;USERID&gt;anonymous00000000000000000000000
            &lt;USERPASS&gt;anonymous00000000000000000000000
            &lt;LANGUAGE&gt;ENG
            &lt;FI&gt;
                &lt;ORG&gt;fidelity.com
                &lt;FID&gt;7776
            &lt;/FI&gt;
            &lt;APPID&gt;5char
            &lt;APPVER&gt;0001
        &lt;/SONRQ&gt;
    &lt;/SIGNONMSGSRQV1&gt;
    &lt;PROFMSGSRQV1&gt;
        &lt;PROFTRNRQ&gt;
            &lt;TRNUID&gt;whatever.you.would.like.it.to.be
            &lt;PROFRQ&gt;
                &lt;CLIENTROUTING&gt;MSGSET
                &lt;DTPROFUP&gt;20110726092234
            &lt;/PROFRQ&gt;
        &lt;/PROFTRNRQ&gt;
    &lt;/PROFMSGSRQV1&gt;
&lt;/OFX&gt;
</code></pre>
