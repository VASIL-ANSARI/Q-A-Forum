<p>This code:</p>

<pre><code>xhr.onload = function(e) {
  var uInt8Array = new Uint8Array(this.response);
  db = new SQL.Database(uInt8Array);
};
</code></pre>

<p>is run as a callback of the onload event. Hence, due to the asynchronous nature of the latter, the initialization of <code>window.db</code> is not done when: </p>

<pre><code>window.db.exec("SELECT rowid,name FROM aux_status");
</code></pre>

<p>is executed. </p>

<p>You should call <code>fill_status</code> as a callback of the other call</p>
