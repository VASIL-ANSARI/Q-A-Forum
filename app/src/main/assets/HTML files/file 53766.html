<p>Commit happens after your closure function, so if you keep using this structure - you won't be able to enqueue after commit.</p>

<p>However, Laravel got another way to do transactions (see 'Manually Using Transactions' in <a href="https://laravel.com/docs/5.1/database#database-transactions" rel="nofollow">Laravel documentation</a>). You could do something like:</p>

<pre><code>$errors = false;

try {
  DB::beginTransaction();

  // All your operations here
} catch (Exception $e) {
  $errors = true;
  DB::rollBack();
}

if (!$errors) {
  DB::commit();

  // Add to queue
}
</code></pre>
