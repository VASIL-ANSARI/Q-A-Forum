<p><a href="http://jsfiddle.net/r5x79/3/" rel="nofollow"><strong>demo</strong></a> </p>

<p>You're missing something important: <code>.on('hashchange'</code></p>

<pre><code>$(function(){
    $(window).on('hashchange', function(){
        var urlHash = window.location.href.split("#")[1];
        if ($('.'+urlHash).length){
           $('html,body').stop().animate({scrollTop:$('.'+urlHash).offset().top}, 500);        
        } 
    }).trigger('hashchange'); // and trigger it on load

    $('a').on('click', function(){
        if (this.href.split("#")[1]==window.location.href.split("#")[1]) $(window).trigger('hashchange');
    });
});
</code></pre>
