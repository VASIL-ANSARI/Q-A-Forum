<p>Your predicate doesn't ensure strict-weak ordering. Following should work:</p>

<pre><code>struct SymbolCmp {
    bool operator() (const Symbol&amp; lhs, const Symbol&amp; rhs) const
    {
        if(lhs.data == rhs.data) {
            return (lhs.bbox.top == rhs.bbox.top) ? (lhs.bbox.left &lt; rhs.bbox.left) : lhs.bbox.top &lt; rhs.bbox.top;
        } else {
            return lhs.data &lt; rhs.data;
        }
    }
};
</code></pre>

<p>If you want to use <code>font</code>, <code>color</code> and dimension in the logic, ensure that your follow the strct-weak ordering constraint.</p>
