<p>I just debugged the <a href="https://entityframework.codeplex.com/SourceControl/latest#src/EntityFramework/Migrations/DbSetMigrationsExtensions.cs" rel="nofollow"><strong><code>EF source code</code></strong></a>, and the code that throws the error is inside <a href="http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.idbsetextensions.addorupdate%28v=vs.103%29.aspx" rel="nofollow"><strong><code>AddOrUpdate</code></strong></a>.</p>

<p>Here is part of the code excerpt that causes error.</p>

<pre><code>var matchExpression
    = identifyingProperties.Select(
        pi =&gt; Expression.Equal(
            Expression.Property(parameter, pi.Single()),
            Expression.Constant(pi.Last().GetValue(entity, null))))
</code></pre>

<p>Or you can replicate the error by doing this.</p>

<pre><code>var fr1 = new Fruit { Weight = 1 };
var epe = Expression.Property(Expression.Constant(fr1), "Weight");
var ec = Expression.Constant(fr1.Weight);
var ee = Expression.Equal(epe, ec);
</code></pre>

<p>I'm not sure why <code>Float?</code> is not acceptable by <a href="http://msdn.microsoft.com/en-us/library/bb352749%28v=vs.110%29.aspx" rel="nofollow"><strong><code>Expression.Equal</code></strong></a>, perhaps somebody else can explain.</p>

<p>But, if you can just use <a href="http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.add%28v=vs.113%29.aspx" rel="nofollow"><strong><code>Add</code></strong></a> or manually checking whether to add or update, instead of <code>AddOrUpdate</code>, that will work.</p>
