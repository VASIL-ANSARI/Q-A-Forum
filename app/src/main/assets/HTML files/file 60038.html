<p>That's what your <code>if</code> clauses return. Just add a return value explicitly.</p>

<pre><code>until visit_number == 100 do
  door_array = door_array.map.with_index { |door_status, door_index|
    if (door_index + 1) % (visit_number + 1) == 0
      if door_status == "closed"
        door_status = "open"
      elsif door_status == "open"
        door_status = "closed"
      end
    end
    door_status
  }
  visit_number += 1
end
</code></pre>

<p>OR:</p>

<pre><code>1.upto(10) {|i| door_array[i*i-1] = 'open'}
</code></pre>
