<p>OK, to answer my own question:</p>

<p>On iOS the keychain will automatically bound the certificate to the private key. That means you only need to:</p>

<ol>
<li>Generate the key pair</li>
<li>Get a certificate that matches the private key</li>
<li>Insert the certificate into the keychain.</li>
</ol>

<p>After this you should be able to get a SecIdentityRef for the certificate / private key.</p>

<p><strong>IMPORTANT:</strong>
<em>SecItemAdd</em> function allows you to insert the certificate data directly (NSData of the DER representation). This way you will be able to get a valid certificate reference, but not an identity ref.<br>
The <strong>right way</strong> to insert the certificate is to first use the <em>SecCertificateCreateWithData</em> function over the DER bytes of the certificate. This will return a <em>SecCertificateRef</em> object which then should be used to persist the certificate into the keychain using the <em>SecItemAdd</em> function.</p>

<p>I hope this will make someone's life easier ;-)</p>

<p>Regards,
Pece </p>
