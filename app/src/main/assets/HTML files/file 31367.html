<p><code>fscanf</code> parses strings (often written with <code>fprintf</code>); <code>fread</code> reads binary data (often written with <code>fwrite</code>). You're pairing <code>fscanf</code> and <code>fwrite</code>.</p>

<p><code>%b</code> is also not a standard format specifier for <code>fscanf</code>, but since I suggest moving away from <code>fscanf</code> entirely in this case, I won't dig into that.</p>
