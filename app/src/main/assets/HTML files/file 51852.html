<p>The first thing I would do is get this repo-><a href="https://github.com/kyamagu/mexplus" rel="nofollow">https://github.com/kyamagu/mexplus</a> and use it to create the correct data types. The second thing you should do, is take a look at this FileExchange entry for wrapping C++ classes-><a href="http://www.mathworks.com/matlabcentral/fileexchange/38964-example-matlab-class-wrapper-for-a-c++-class" rel="nofollow">http://www.mathworks.com/matlabcentral/fileexchange/38964-example-matlab-class-wrapper-for-a-c++-class</a></p>

<p>The message object that you're creating is not the same message object that you access the next time you call your mex file.</p>

<p>Indecently, I'm working on something very similar to bring protobuf messages into MATLAB. If I get mine working and posted, I'll post a follow-up here.</p>
