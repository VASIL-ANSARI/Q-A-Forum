<p>I had a similar issue, the problem wasn't the checksum algorithm.<br>
The problem was the downloaded file was different from the uploaded file.</p>

<p>First of all, I would check that the file upload is he same you stored in the ddbb.</p>

<p>In MySQL:
<code>SELECT fileName, md5(fileBlob) FROM yourTable;</code></p>

<p>Second,  I would check that the file you downloaded is the same you uploaded.</p>

<p>You could check the integrity here <a href="http://onlinemd5.com/" rel="nofollow">http://onlinemd5.com/</a></p>

<p>I did realize that the REST I was developing  was doing a wrong conversion.</p>

<p>I know it's late but Hope it helps.</p>
