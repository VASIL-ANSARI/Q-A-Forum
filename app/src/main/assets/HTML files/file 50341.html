<p>Review your code or your post, I think that your are missing something important. This code works perfect:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;map&gt;

enum state { RED, YELLOW, GREEN };

class foo
{
    int a;
};


int main()
{
    std::map&lt;state, foo *&gt; theMap;

    theMap[RED] = new foo();

    std::cout &lt;&lt; "That's all" &lt;&lt; std::endl;
}
</code></pre>

<p><a href="http://coliru.stacked-crooked.com/a/b73e568aa8074328" rel="nofollow">Live example</a></p>

<p>EDITED: It works with C++98 as well (-std=c++98)</p>
