<p>Well, firstly, your <code>#setEPSquare()</code> function is not correct. When I show you the code below, you might understand why, but I will explain as well:</p>

<pre><code>public static int setHalfMoves(int s, int e){
     return (
             //mask for e to only the correct bits
             (e &amp; 0x7f)
             //left shifted into position
             &lt;&lt; 6)
             //zero out the original value
             | (s &amp; (~(0x7f &lt;&lt; 6)));
}
public static void main (String[] args){
   int s = BoardState.new_state(36, 84, 1, 0);
   System.out.println("ep square: " + epSquare(s)); //36
   System.out.println("half moves: " + halfMoves(s)); //84
   //Note that this is fixed to now reassign s
   s = setHalfMoves(s, 13);
   System.out.println("half moves: " + halfMoves(s)); //should give 13
}
</code></pre>

<p>So your first issue is that ORing the new value against the old is the wrong operation. You need to zero it out for a 'set' type of function. Your second issue was that you have to reassign <code>s</code> after you manipulate it via <code>setHalfMoves(int, int)</code>. You will have to fix <code>#setEPSquare()</code> as well, but I leave that for you to try out.</p>
