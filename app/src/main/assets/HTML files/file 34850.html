<p>Once you have all the data in the $string, you can split each line by the whitespace to get the user which will be found at [1] ([0] would be the "|User") and the date which will be found at [5]. </p>

<p>You then would need to split the [5] by the "|" to get only the date which will be found at [5][1].</p>

<p>once you got the [1] &amp; [5][1], lets say you have an additional object/array outside the loop,
so that on each line;</p>

<p>It would loop into this additional object/array and if it is found using the [1] (which is the user) then it would check the [5][1] (which is the date) and if it is found, then it increment the int stored inside. 
However if it is not found than it would add it to the existing array/object</p>

<p>This would be my way of fixing this problem which will give you something like this;</p>

<pre><code>$array[1][0] = user
$array[1][1] = date
$array[1][2] = amount
$array[2][0] = user
etc...
</code></pre>

<p>you can then use this to provide the expected output..</p>
