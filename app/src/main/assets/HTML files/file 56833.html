<p>1) Create method in controller
2) Call Same library function captch_refresh in controller and return data from library function.
3) Send response from controller's method</p>

<p>Ajax Call Url: </p>

<pre><code>// Controller Code
class Login extends MY_Controller {

public function captcha_refresh() {
   // load library
   $this-&gt;load-&gt;library('captcha_lib');
   // call library function
   echo $this-&gt;captcha_lib-&gt;captcha_refresh();
   exit(); 
}


// Make Library method
class Captcha_lib {
public function captcha_refresh(){
    $CI =&amp; get_instance();

    $values = array(
    'word' =&gt; '',
    'word_length' =&gt; 8,
    'img_path' =&gt; './hrms_assets/captcha_img/',
    'img_url' =&gt; base_url() .'hrms_assets/captcha_img/',
    'font_path' =&gt; base_url() . 'system/fonts/texb.ttf',
    'img_width' =&gt; '150',
    'img_height' =&gt; 50,
    'expiration' =&gt; 3600
    );
    $data = create_captcha($values);
    $CI-&gt;session-&gt;userdata['captchaWord'] = $data['word'];
    return $data['image'];
}
</code></pre>

<p>}</p>

<p>// Jquery Code</p>

<pre><code>$(document).ready(function() {
    $("a.refresh").click(function() {
    jQuery.ajax({
    type: "POST",
    url: "&lt;?php echo base_url('login/captcha_refresh'); ?&gt;",
    success: function(res) {
    if (res)
    {
    jQuery("span.image").html(res);
    }
    }
    });
    });
    });
</code></pre>
