<p><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</code> is not a "DOCTYPE". It is an XML declaration: <a href="http://www.w3.org/TR/xml/#sec-prolog-dtd" rel="nofollow">http://www.w3.org/TR/xml/#sec-prolog-dtd</a>.</p>

<p>If you want to omit the XML declaration, use</p>

<pre><code>&lt;xsl:output omit-xml-declaration = "yes"/&gt; 
</code></pre>

<p>in your stylesheet. It works in both XSLT 1.0 and 2.0. References: </p>

<ul>
<li><a href="http://www.w3.org/TR/xslt#output" rel="nofollow">http://www.w3.org/TR/xslt#output</a></li>
<li><a href="http://www.w3.org/TR/xslt20/#element-output" rel="nofollow">http://www.w3.org/TR/xslt20/#element-output</a>.</li>
</ul>

<p>Note that <code>&lt;xsl:output&gt;</code> is a top-level element in a stylesheet module. It cannot be put in an <code>&lt;xsl:if&gt;</code>, as you already noticed. See <a href="http://stackoverflow.com/questions/633984/condition-xsloutput-in-xslt-1-0">Condition &lt;xsl:output&gt; in XSLT 1.0?</a> for a related discussion.</p>

<p>It is good practice to have an XML declaration in XML documents, but it is not compulsory. So a pure XSLT option is to always omit the XML declaration.</p>
