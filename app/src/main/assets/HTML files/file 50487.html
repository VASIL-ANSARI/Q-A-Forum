<p><code>putchar_unlocked</code> is not part of any C++ standard. It is part of POSIX standard, but defining <code>-std=c++14</code> causes <em>gcc</em> to define <code>__STRICT_ANSI__</code> macro. <em>Cygwin</em> <a href="https://cygwin.com/faq/faq.html#faq.programming.glibc" rel="nofollow">uses</a> <a href="https://sourceware.org/newlib/" rel="nofollow">Newlib</a> for C standard library, and <a href="https://sourceware.org/git/gitweb.cgi?p=newlib-cygwin.git;a=blob;f=newlib/libc/include/stdio.h;h=9d8fd862ef7363e12800f77ff78a485cf070bc49;hb=HEAD#l314" rel="nofollow">from its sources</a> we can see that this prevents <code>putchar_unlocked</code> from being declared, and also that there isn't any other macro to enable it anyway.</p>

<p>Therefore, we need to get rid of <code>__STRICT_ANSI__</code>. Using <code>-std=gnu++14</code> should do that:</p>

<pre><code>g++ -std=gnu++14 foo.cpp &amp;&amp; a.exe &amp;&amp; rm ./a.exe
</code></pre>

<hr>

<p>A comment under the question points out that the code works with <a href="https://ideone.com/wO7TPz" rel="nofollow">Ideone</a>. This is probably, because Ideone runs on different platform (such as Linux), which probably has <code>glibc</code>, which provides <code>putchar_unlocked</code> with different conditions (from <a href="http://linux.die.net/man/3/putchar_unlocked" rel="nofollow">this manual page</a>):</p>

<blockquote>
  <p>Feature Test Macro Requirements for glibc (see
  <a href="http://linux.die.net/man/7/feature_test_macros" rel="nofollow">feature_test_macros(7)</a>):</p>
  
  <p>getc_unlocked(), getchar_unlocked(), putc_unlocked(),
  putchar_unlocked():
      _POSIX_C_SOURCE >= 1 || _XOPEN_SOURCE || _POSIX_SOURCE || _BSD_SOURCE || _SVID_SOURCE</p>
</blockquote>
