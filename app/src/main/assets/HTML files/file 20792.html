<p>use this query</p>

<pre><code>$result = $mysqli-&gt;query("INSERT INTO tbl_tempCand (`datetime`, `names`) VALUES (CURRENT_TIMESTAMP(), '".$ch."')");
                                                    ^ // here was the problem
</code></pre>

<p><code>datetime</code> is a <strong>RESERVED WORD</strong> in <code>mysql</code> and because of that query fails. If you want to use this kind of reserved words as column quote them inside of this <code>``</code> </p>

<p>Change </p>

<pre><code>if($row-&gt;mysql_affected_rows($result)==0)
</code></pre>

<p>to</p>

<pre><code>if($mysqli-&gt;affected_rows &gt; 0)
</code></pre>
