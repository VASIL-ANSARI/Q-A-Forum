<p>In the <code>onclick</code> attribute, instead of just calling <code>insertNewRow()</code>, do something like</p>

<pre><code>insertNewRow.apply(this);
</code></pre>

<p>The <code>this</code> keyword inside the <code>onclick</code> attribute is a reference of the clicked element. With <code>insertNewRow.apply(this)</code>, we'll be calling <code>insertNewRow()</code> and at the same time, assign the <code>this</code> keyword inside that function call to the clicked element or in this case, the button (if we don't do that, <code>this</code> inside <code>insertNewRow()</code> will be a reference to the <code>Window</code> object instead). Then in, your <code>insertNewRow()</code> function, check if the current element being clicked on is a <code>tr</code> element. If not, go up by one level and see if that element is a <code>tr</code> element. Keep doing that until you get to the first <code>tr</code> element. So, basically you'll be searching for the closest <code>tr</code> element.</p>

<pre class="lang-html prettyprint-override"><code>&lt;button type="button" onclick="insertNewRow.apply(this);"&gt;+&lt;/button&gt;
</code></pre>

<pre class="lang-js prettyprint-override"><code>function insertNewRow(){
    var row = null,
        el = this;
    // Get the closest tr element
    while (row === null)
    {
        if (el.tagName.toLowerCase() === 'tr')
        {
            row = el; // row is now the closest tr element
            break;
        }
        el = el.parentNode;                 
    }

    // Rest of the code here

}â
</code></pre>

<p><a href="http://jsfiddle.net/HfnZa/1/" rel="nofollow">JsFiddle</a></p>

<p>If you're still not sure what <code>Function.apply()</code> is, take a look at the documentation <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply" rel="nofollow">here</a>.</p>
