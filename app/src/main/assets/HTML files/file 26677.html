<p>Found a way to replace the DNS resolver app-wide.</p>

<p>Create <code>config/initializers/dns.rb</code> with:</p>

<pre><code>class &lt;&lt; Resolv

  def use_google_dns
    remove_const :DefaultResolver
    const_set :DefaultResolver, self.new(
      [Resolv::Hosts.new, Resolv::DNS.new(nameserver: ['8.8.8.8', '8.8.4.4'], search: ['mydns.com'], ndots: 1)]
    )
  end

end

Resolv.use_google_dns
require 'resolv-replace'
</code></pre>

<p>Tested with Ruby 2.0, but I believe it will also work with 1.9. The file location instruction is Rails specific, but the code should work with any Ruby project.</p>
