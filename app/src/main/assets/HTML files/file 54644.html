<p>You're executing the <code>getData()</code> function once, on pageload, and returning <code>undefined</code> to the <code>onreadystatechange</code> handler, as that's what happens when you add the parentheses.</p>

<p>It has to be either</p>

<pre><code>xhr.onreadystatechange = getData;
</code></pre>

<p>Note the lack of parentheses, or if you have to pass arguments</p>

<pre><code>onreadystatechange = function() {
    getData(segment);
}
</code></pre>
