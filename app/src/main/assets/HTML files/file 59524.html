<p>I fixed this by attaching text files with mime type <code>text/x-diff</code>:</p>

<pre><code>mime_type = ... # Get mime type, e.g.: Paperclip::ContentTypeDetector.new(attachment_file_name).detect
mime_type = mime_type == 'text/plain' ? 'text/x-diff' : mime_type
attachments[attachment_file_name] = { content: File.read..., mime_type: mime_type }
</code></pre>

<p>By swapping the mime type <code>text/plain</code> with <code>text/x-diff</code>, the text file attachment isn't confused for being the body. It is correctly attached to the email and the email body is correctly sent as the body.</p>
