<p>Can we see where $row is coming from? i.e. can you post some rows from your database?
My guess would be that the value passed from $row['expires'] is not what you are expecting, and hence causing $datetime to have an unexpected value.
Try the following:</p>

<pre><code>$datetime = date('d.m.Y \u\m H:i \U\h\r', strtotime(substr($row['expires'], 0, -3)));
</code></pre>

<p>If that still produces incorrect results, the time is probably being saved incorrectly in the first place (keep in mind that you might need to set the timezone for your script to use)</p>

<p>If you don't get it right with the code above, please post an example of a row that is being passed into $row so that we can see what the input is.  Your syntax looks pretty correct, so I would think the problem is the data that is being passed to the script.</p>
