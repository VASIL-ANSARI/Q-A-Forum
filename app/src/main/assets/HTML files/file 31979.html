<p>Try this quite not elegant solution.</p>

<p>Make a separate class called ActiveLogins</p>

<pre><code>class User
  has_one :active_login
end

class ActiveLogins 
  belongs_to :user #=&gt; foregin key :user_id 
end
</code></pre>

<p>Every time you create a AgentLogin you also create a identical ActiveLogin an delete all other ActiveLogins with the same :user_id</p>

<p>Then you can call User.all.includes(:active_login) (hopefully without N+1 issues)</p>
