<p><strong>The complex answer</strong></p>

<p>The issue here is that <code>learnPart</code> is trying to use the return value of getInitial, which is a list, as a key to a dictionary. Lists are mutable, and hence not hashable, which means they can't be used as keys to a dictionary.</p>

<p>You could try adding this line to <code>learnPart</code>:</p>

<pre><code>def learnPart(key, value):
    key = tuple(key) #&lt;-----Try adding this line
    if not mem[key]:
        mem[key] = []
    mem[key] = value
    return mem
</code></pre>

<p>But I do not think that will solve all the problems.</p>

<p><strong>The simple answer</strong></p>

<p>There are plenty of Markov Chain implementations written in Python out there. A quick search on Github yielded 168 projects:
<a href="https://github.com/search?l=Python&amp;q=markov+chain" rel="nofollow">https://github.com/search?l=Python&amp;q=markov+chain</a></p>
