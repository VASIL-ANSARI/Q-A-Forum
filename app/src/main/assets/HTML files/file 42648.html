<p>The short answer is: Because you are constructing HTML by mashing together strings.</p>

<p>You've got an HTML attribute value that is delimited by <code>'</code> characters. Inside that value you are putting a <code>'</code> without escaping it (as <code>&amp;#34;</code>). Since it isn't escaped, it terminates the attribute value.</p>

<p>Use DOM (<code>createElement</code>, <code>setAttribute</code>, <code>appendChild</code>, etc.) instead.</p>
