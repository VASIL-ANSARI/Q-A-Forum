<p>I believe the error code for duplicate keys is 1586. If you were to attempt to execute a query and then, on failure, check the error code using <a href="http://php.net/manual/en/function.mysql-errno.php" rel="nofollow">mysql_errno()</a>/<a href="http://php.net/manual/en/mysqli.errno.php" rel="nofollow">mysqli::errno()</a> and compare it to 1586, that should do it. If it's not 1586, check what it actually is by echoing the error code after your query.</p>
