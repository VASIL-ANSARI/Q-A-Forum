<p>Inside <strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout" rel="nofollow"><code>setTimeout</code></a></strong> callback <code>this</code> refers to window object, so it's retrieving variable defined in global context.</p>

<p>You can make it working by binding the this context using <strong><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind" rel="nofollow"><code>Function#bind</code></a></strong> method .</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>var x = 4,
  obj = {
    x: 3,
    bar: function() {
      var x = 2;
      setTimeout(function() {
        var x = 1;
        alert(this.x);
      }.bind(this), 1000);
    }
  };
obj.bar();</code></pre>
</div>
</div>
</p>

<hr>

<p>Or use a local variable to cache the reference to <code>this</code> and use that inside callback function.
<div class="snippet" data-lang="js" data-hide="false" data-console="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>var x = 4,
  obj = {
    x: 3,
    bar: function() {
      var x = 2,
        that = this;
      setTimeout(function() {
        var x = 1;
        alert(that.x);
      }, 1000);
    }
  };
obj.bar();</code></pre>
</div>
</div>
</p>

<hr>

<p>Also refer the MDN documentation : <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout#The_this_problem" rel="nofollow">The "this" problem</a></p>
