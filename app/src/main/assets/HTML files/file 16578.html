<pre><code> if( mystruct == NULL )
</code></pre>

<p><code>mystruct</code> is not an pointer you cannot just compare it with <code>NULL</code>.</p>

<p>You have three options:</p>

<ol>
<li>Add a status field to <code>MyStruct</code> to indicate whether the struct has been initialized correctly.</li>
<li>Allocate the struct on the heap and return it by pointer.</li>
<li>Pass the structure as a pointer argument and return a status code (thanks @Potatoswatter).</li>
</ol>
