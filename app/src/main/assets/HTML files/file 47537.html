<p>So how should Python know where the string starts or ends if you use the same quotes as are contained in the string? Switch to using <code>"</code> double quotes to enclose your shell command.</p>

<p>Also, you'll need to tell <code>subprocess</code> to use a shell to run your command, otherwise it'll just try to run the command directly (and thus not support shell syntax):</p>

<pre><code>numcpu = sub.Popen("($(cat /proc/cpuinfo | grep 'physical id' | awk '{print $NF}' | sort | uniq | wc -l))",
                   shell=True, stdout=sub.PIPE, stderr=sub.PIPE)
</code></pre>

<p>You may want to just read from <code>proc/cpuinfo</code> directly, and process that in Python:</p>

<pre><code>cpu_ids = set()
with open('/proc/cpuinfo') as cpuinfo:
    for line in cpuinfo:
        if 'physical id' in line:
            cpu_ids.add(line.rsplit(None, 1)[-1])
numcpu = len(cpu_ids)  
</code></pre>
