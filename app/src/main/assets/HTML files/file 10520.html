<p>Not quite sure what your problem is but you are not checking the return code from the <code>recv()</code> call. This should either be a positive number indicating the number of bytes actually received , a negative number indicating an error, or 0 indicating a dropped connection.</p>

<p>Note, it is quite common to get less data than you asked for have a look at the tutorial <a href="http://gnosis.cx/publish/programming/sockets.html" rel="nofollow">here</a> for how to handle this situation. </p>
