<p>There are many ways you can try to fetch comments data. One idea is you can call your model function to get comments in your view file e.g. </p>

<pre><code>            &lt;?php if ($comment['parent_id']) { ?&gt;
                &lt;ul&gt;
                    $this-&gt;products_model-&gt;get_comments($parent_id);
                &lt;/ul&gt;
            &lt;?php } ?&gt;
</code></pre>

<p>Another idea is to make changes to your get_comments model function to include all the parent child data... </p>

<pre><code>  public function get_comments($product_id){
    $this-&gt;db-&gt;where('product_id', $product_id);
    $this-&gt;db-&gt;where('is_confirm', '1');
    $query = $this-&gt;db-&gt;get('xbl_product_comments');
    $data = array();
    foreach($query-&gt;result_array() as $row) {
        $data[] = $row;
        if($row['parent_id'] != 0) { 
            $data = $this-&gt;get_comments($parent_id);
        }
    }
    return $data;
}
</code></pre>

<p>please note i haven't tested it so it may have errors. just change it as per your needs.</p>

<p>One more idea is to simply create a helper function to get comments</p>

<pre><code> function get_comments($product_id){
    $ci = &amp;get_instance();    
    $ci-&gt;db-&gt;where('product_id', $product_id);
    $ci-&gt;db-&gt;where('is_confirm', '1');
    $query = $ci-&gt;db-&gt;get('xbl_product_comments');
    return $query-&gt;result_array();
}
</code></pre>

<p>then simply call this function in your views as you were doing in your 'native' php app.</p>
