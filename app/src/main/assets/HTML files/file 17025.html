<p>I have never tested constraints before using route_to tests but may be anonymous controller could be useful for your test.</p>

<p><a href="https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/controller-specs/anonymous-controller" rel="nofollow">https://www.relishapp.com/rspec/rspec-rails/v/2-4/docs/controller-specs/anonymous-controller</a></p>

<p>You could write spec for application controller like:</p>

<pre><code>require 'spec_helper'

describe ApplicationController do
  controller do
    def index
    end
  end

  describe 'handling block constraints' do
    before { get :index, :app_id =&gt; '100' }

    it "should block request" do
      should redirect_to(:controller =&gt; 'blocks', :action =&gt; 'block_request')
    end
  end
end
</code></pre>
