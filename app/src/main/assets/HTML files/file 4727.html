<p>The ajax call is async. So that last <code>console.log</code> is executed before the request has finished. You have to do all processing requiring the results of the request in the callback function.</p>

<p>Another option would be using <a href="http://api.jquery.com/jQuery.ajax/" rel="nofollow"><code>$.ajax</code></a> with the <code>async: false</code> option. However, this may lock up the browser until the request has finished!</p>
