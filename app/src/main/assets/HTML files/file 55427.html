<p>Since you have <code>where p1.idprod1=o.iprod1 and p2.idprod2=o.idprod2 and p3.idprod3=o.idprod3 and p4.idprod=o.idprod4 and p5.idprod5=o.idprod5</code> I don't see any reason to return <code>p1.idprod1,p2.idprod2,p3.idprod3,p4.idprod4,p5.idprod5</code>.</p>

<p>Other note what is the reason to <code>sum(p1.idprod1+p2.idprod2+p3.idprod3+p4.idprod4+p5.idprod5)</code>?</p>

<p>I think the only column we can <code>SUM</code> is the <code>price</code>.</p>

<p>So my approach is:</p>

<pre><code>SELECT 
  o.*,
  sum(p1.price+p2.price+p3.price+p4.price+p5.price)
FROM order o
LEFT JOIN prod1 p1
ON p1.idprod1=o.iprod1
LEFT JOIN prod2 p2
p2.idprod2=o.idprod2
LEFT JOIN prod3 p3
ON p3.idprod3=o.idprod3 
LEFT JOIN prod4 p4
ON p4.idprod=o.idprod4
LEFT JOIN prod5 p5
ON p5.idprod5=o.idprod5
WHERE o.idorder=(select max(idorder) from order)
GROUP BY o.idorder
</code></pre>
