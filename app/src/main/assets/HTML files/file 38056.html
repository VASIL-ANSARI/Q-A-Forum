<p>First, <code>try</code> and <code>catch</code> is not an entirely bad idea.  You can test for specific errors and rethrow the rest, or catch every possible error in one dragnet, print an error message, and close up.  It entirely depends on the type of data you're reading, what errors you will reasonably expect to see, and what level of gracious error recovery you need to do.</p>

<p>As for using <code>break</code>, there is a way to do this without doing a double free, however, it might be unpopular with some people.</p>

<p>Essentially, it looks something like this:</p>

<pre><code>while (someCondition) {
   // Do things
   error = 1; // Error encountered
   if (error)
       goto cleanUp;
   // Do some more things
}
// Do some other things that you need to do outside the loop here
:cleanUp
free(buffer);
return error;
</code></pre>

<p>It operates similar to having a custom onError event handler in some languages.</p>
