<p>I think you need to see the SQLXML library. I have been using it a lot for the last year and it is really the fastest way to load an XML to a relational database. So, IMHO, the best way to do this is to load the XML to the database using SQLXML bulk load (<a href="https://msdn.microsoft.com/en-us/library/ms171806.aspx" rel="nofollow">https://msdn.microsoft.com/en-us/library/ms171806.aspx</a>) and instead of shredding the XML in the database, you can tell SQLXML to generate for you a relational model i.e. the tables you need to store the XML data. Then you can use the tables to do your processing using set-based logic (this way you can actually optimize the queries) and then using "for xml" to recreate the XML.</p>
