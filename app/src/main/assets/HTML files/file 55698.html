<p>Memory permitting, you can use <a href="http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.einsum.html"><code>np.einsum</code></a> to perform those heavy calculations in a vectorized manner, like so -</p>

<pre><code>moo = size*np.einsum('ij,ik-&gt;jk',bar,bar)
</code></pre>

<p>One can also use <a href="http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.tensordot.html"><code>np.tensordot</code></a> -</p>

<pre><code>moo = size*np.tensordot(bar,bar,axes=(0,0))
</code></pre>

<p>Or simply <code>np.dot</code> -</p>

<pre><code>moo = size*bar.T.dot(bar)
</code></pre>
