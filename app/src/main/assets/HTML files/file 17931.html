<p>The problem here is that Django is expecting a queryset and your code is providing a list. You can fix this by wrapping your comprehension in a set:</p>

<pre><code>    def queryset(self, request, queryset):
        if self.value():
            return set(comment for comment in queryset if comment.posted_by_guest())
        elif not self.value():
            return set(comment for comment in queryset if not comment.posted_by_guest())
</code></pre>
