<p>Make sure to call <code>Intents.init()</code> in the setup of your tests. That should fix the <code>NullPointerException</code> you described:</p>

<pre><code>java.lang.NullPointerException
at android.support.test.espresso.intent.Intents.resumedActivitiesExist(Intents.java:235)
at android.support.test.espresso.intent.Intents.intended(Intents.java:184)
at android.support.test.espresso.intent.Intents.intended(Intents.java:169)
at net.example.login.MainActivityTest.testLoginActivityStarts(MainActivityTest.java:46)
</code></pre>

<p>For more information see javadoc about <a href="http://developer.android.com/reference/android/support/test/espresso/intent/Intents.html#init()">Intents.init()</a></p>
