<p>Code needs some restructuring. Make sure you have values before attempting to insert as noted above</p>

<pre><code>  &lt;?php 

        require("Db.class.php");
        $db = new Db();
        $response = array();

        if(!empty($_POST['idComplejo']) &amp;&amp; !empty($_POST['idUsuario'])){
              $idComplejo= $_POST['idComplejo'];
              $idUsuario= $_POST['idUsuario'];
        }else{
             $response["success"] = 0;
             $response["mensaje"] = "Error";
        }

        if(!isset($response["mensaje"])){
              //Required data is here
              $result = $db-&gt;query("INSERT INTO baneo(idComplejo, idUsuario)   VALUES(:idComplejo, :idUsuario)",array("idComplejo" =&gt; $idComplejo, "idUsuario" =&gt; $idUsuario));
       }


      if($result) { 
            $response["success"] = 1;
            $response["mensaje"] = "Success";
      }

      echo json_encode($response);
</code></pre>

<p>?></p>
