<p>The declaration</p>

<pre><code>char *ptr[buflen];
</code></pre>

<p>creates an array of pointers. If <code>ptr</code> is a local variable (inside of a function) then the pointers are initially garbage values, they don't point to valid memory. If <code>ptr</code> is global or static, then the pointers are initially <code>NULL</code>.</p>

<p>In any case, before you can use one of the pointers to point to a string, the string needs to be in memory somewhere. </p>

<p>Given the line</p>

<pre><code>char *ptr[3] = {"foo", "bar", "bletch"};
</code></pre>

<p>the compiler takes care of allocating memory for the strings, and then puts pointers to the strings into the array.</p>

<p>But if the strings aren't constant, then you have to allocate memory for the string yourself. That's what <code>malloc</code> does. It allocates the number of bytes that you request, and returns a pointer to that memory. You can save that pointer in the array, and then use <code>strcpy</code> or the other string functions to put the string into that memory.</p>

<p>Or you can copy characters one at time, which is what your code does:</p>

<pre><code>ptr[x+1] = malloc(2);     // reserves two bytes of memory, and keeps the pointer 
                          // to that memory in the array of pointers
ptr[x+1][0] = str[1];     // copies a character into the first byte of the memory
ptr[x+1][1] = '\0';       // marks the second byte as the end of the string
</code></pre>

<p>So now you have a string in memory, and a pointer to that string in the array of pointers.</p>
