<p>It fails because there's no <code>0</code> at the end of your array. It's not added automatically, you need to do it explicitly. As a result, you accessed outside the array, which results in undefined behavior. The fact that one of your tests seemed to work was purely luck, you can't depend on it.</p>

<pre><code>int a[] = {5, 4, 1, 2, 1, 0};
</code></pre>

<p>The only time that C automatically adds a null terminator is when you use a string literal to initialize a <code>char</code> array, e.g.</p>

<pre><code>char c[] = "abcde";
</code></pre>
