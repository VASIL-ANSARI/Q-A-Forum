<p>Try with these functions after <code>$im = imagecreatefrompng($filename);</code></p>

<pre><code>imagealphablending($im, false);
imagesavealpha($im, true);
</code></pre>

<p>And use imagecreatetruecolor() :</p>

<pre><code>$nim = imagecreatetruecolor ( imagesx($im), imagesy($im) );
</code></pre>
