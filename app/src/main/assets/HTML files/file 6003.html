<p>Use <code>resize</code> instead of <code>thumbnail</code>.</p>

<p>The point behind <code>thumbnail</code> is to make it easy to scale an image down to fit within a particular bounding box preserving aspect ratio. That means that if your bounding box is a square, the longer side of the image determines the scale used.</p>

<p><code>resize</code> gives you more direct control -- you specify exactly what size you want.</p>

<p>Actually, since you want to preserve aspect you could still use thumbnail, but you need to fudge the bounding box. Before your call to <code>thumbnail</code>, try doing this:</p>

<pre><code>old_aspect = float(imagex)/float(imagey)
new_aspect = float(width)/float(height)
if old_aspect &lt; new_aspect:
  height = int(width / old_aspect)
else:
  width = int(height * old_aspect)
</code></pre>
