<pre><code>sem_t shovel = 1; // Note: Is a lock in the updated question code
sem_t empty = 0;
sem_t seeded = 0;
sem_t unfilled = MAX;
</code></pre>

<p>That's <strong>not</strong> how you initialise semaphores. They're complex things, not just counters that can be assigned to. That's the reason there's the function <code>sem_init</code>, which you're using, but not correctly. <a href="http://linux.die.net/man/3/sem_init" rel="nofollow">Read up on it in a reference of your choice</a>.</p>

<p>IIRC <code>sem_t</code> is a typedef similar to</p>

<pre><code>typedef struct whatever * sem_t;
</code></pre>

<p>Thus each of the above lines initialises a pointer from an integer.</p>

<p>Furthermore, your functions should return what you declare them to return. This is especially true for the functions used for the threads: They (need to) declare that they return a void pointer, so (if you don't have anything meaningful to return) just use</p>

<pre><code>return NULL;
</code></pre>

<p>at the end of reach of these.</p>

<p>Moreover:</p>

<pre><code>pthread_create(&amp;btid, NULL, larry, NULL);  //create the larry thread
pthread_create(&amp;btid, NULL, moe, NULL);  //create the moe thread
pthread_create(&amp;btid, NULL, curly, NULL);  //create the curly thread
</code></pre>

<p>You want these calls to different <code>thread_t</code>s, not all to the same (<code>btid</code>).</p>
