<p>You use <code>dir</code> in <code>java</code> ant task. That tells your JVM to invoke the process in that directory. Have a look at the docs <a href="http://ant.apache.org/manual/Tasks/java.html" rel="nofollow">here</a>. You should be referring to the jar either via <code>jar</code> or <code>classpath</code> attribute. Try changing your build configuration to:</p>

<pre><code>&lt;path id="build.classpath"&gt;         
    &lt;fileset refid="lib"/&gt;
    &lt;fileset dir="${classes.dir}"/&gt;     
&lt;/path&gt;

&lt;target name="run" depends="compile" description="run the project"&gt;
    &lt;java classpathref="build.classpath" classname="${main.class}" fork="yes"&gt;
        &lt;arg line="${args}"/&gt;
    &lt;/java&gt;
&lt;/target&gt;
</code></pre>

<p><strong>EDIT</strong> (Include classpathref in compilation)</p>
