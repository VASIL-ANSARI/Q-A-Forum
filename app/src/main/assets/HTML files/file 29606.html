<p>The following <em>should</em> work, but won't in older versions of IE.</p>

<pre><code>// on(..., function() {
if( this.value.substr(0,this.selectionStart).match(/(?:^|\r?\n\s*)$/)
 &amp;&amp; this.value.substr(this.selectionStart).match(/^(?:\s*\r?\n|$)/)) {
    console.log("empty");
}
</code></pre>

<p>EDIT search now explicitly looks for a newline, with further whitespace optional.</p>
