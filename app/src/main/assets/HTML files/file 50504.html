<p>The actual NullPointerException is happening here:</p>

<pre><code> getContentResolver()
</code></pre>

<p>Calling that method returns null and then calling <strong>query()</strong> on that fails because you can't call methods on <strong>null</strong> objects.  (FWIW: <strong>null</strong> shouldn't exist and is a cancer on software engineering projects everywhere)</p>

<p>I strongly suspect some kind of initialization step necessary for <strong>getContentResolver()</strong> (which is regrettably not enforced by the types) is biting you here.  There is a temporal coupling requiring you to do some kind of rain dance to make that method work correctly which is a bad design choice.</p>
