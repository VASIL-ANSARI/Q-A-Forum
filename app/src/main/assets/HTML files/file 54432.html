<p>This answer uses <a href="https://code.google.com/archive/p/crypto-js/" rel="nofollow">CryptoJS</a> as you've already had some success with it:</p>

<pre class="lang-js prettyprint-override"><code>var username = "alice";
var password = "secret";
var userSalt = "6s6Q5Rn0xZP0LPf89bNdv+65EmMUrTsey2fIhim/wKU=";
var nonce    = "3da210bdb1163d0d41d3c516314cbd6e";

var hmac     = CryptoJS.HmacSHA1(username + ":" + userSalt, password).toString(CryptoJS.enc.Base64);
var digest   = CryptoJS.SHA1(hmac + ":" + nonce).toString(CryptoJS.enc.Base64);

console.log(hmac);   // --&gt; z9NILqJ3QHSG5+GlDnXsV9txjgo=
console.log(digest); // --&gt; B2B3mIzE/+dqcqOJJ/ejSGXRKvE=
</code></pre>

<p>Note it uses the following CryptoJS files:</p>

<pre><code>/rollups/sha1.js
/rollups/hmac-sha1.js
/components/enc-base64-min.js
</code></pre>

<p>You can see a live example in this JS paste bin:</p>

<p><a href="https://jsbin.com/luvinayoyi/edit?js,console" rel="nofollow">https://jsbin.com/luvinayoyi/edit?js,console</a></p>
