<p>About memory usage, if you define the macro <code>CALC_EXACT_MALLOC_SIZE</code> (not sure where, but in <code>ruby.h</code> may work) and recompile Ruby, you will be able to call <code>GC.malloc_allocated_size</code> to know how much memory is allocated by malloc (almost everything), in bytes.</p>
