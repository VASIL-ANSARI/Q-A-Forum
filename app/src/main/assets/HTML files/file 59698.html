<p>In your data set from database, </p>

<ol>
<li>Some of the records doesn't have status field i.e. records 0-6</li>
<li>In your condition your're checking <code>$events[$count_x_course_date - 1]['status'] == 'AVAILABLE'</code> which is wrong. Because from the data set, it's saying value is boolean i.e. true/false
<code>["status"] =&gt; bool(false)</code>. </li>
<li>Actual values which you're checking is in <code>title</code> field i.e. <code>["title"]=&gt;
string(9) "Available"</code></li>
</ol>
