<p>You probably want the height to be the <code>absolute value</code> of the difference between closing price and opening price.  Use php's <code>abs()</code> function to calculate it.</p>

<pre><code>$calculation = ($open_price[$i])-($closing_price[$i]); 
$abscalc = abs($calculation);
</code></pre>

<p>Then, if you wanted the bar to show in a downward direction for negative price movement, you'd want to adjust the y value as well.</p>

<pre><code>$y = $open_price[$i];
if ($calculation &lt; 0) $y = $closing_price[$i];
$bars .= '&lt;rect x="' . $i * 5 . '" y="'.$y.'" width="20" height="' . $abscalc . '" fill="blue"/&gt;'; 
</code></pre>

<p>This code will keep your x value constant, and cause the bar to show the price range.  The bar height will be the absolute value of the price difference, and the bar's y position will be the lower of the opening or closing price.</p>
