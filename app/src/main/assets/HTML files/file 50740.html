<p>Whereever you get the invalid XML from: talk to him and ask to provide valid XML. Everything else is a hack and will break sooner or later.</p>

<p>The not recommended hacky and unstable version:</p>

<p><code>"&lt;root&gt;"+data +"&lt;/root&gt;"</code> gives you the following XML</p>

<pre><code>&lt;root&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;element1 value="3"&gt;&lt;sub&gt;1&lt;/sub&gt;&lt;/element1&gt;
    &lt;element1&gt;&lt;sub&gt;&lt;element&gt;2&lt;/element&gt;&lt;/sub&gt;&lt;/element1&gt;
    &lt;element2&gt;&lt;sub&gt;3&lt;/sub&gt;&lt;/element2&gt;
    &lt;element2&gt;&lt;sub&gt;4&lt;/sub&gt;&lt;/element2&gt;
&lt;/root&gt;
</code></pre>

<p>which is invalid because the processing instruction is not at the beginning.</p>

<p>Remove the processing instruction and it should work. Finding the first <code>"?&gt;"</code> and removing everything before sounds quite safe to me. In real XML you'd have to consider multiple processing instructions like <code>&lt;?xml ...?&gt;</code> and <code>&lt;?xml-stylesheet ... ?&gt;</code>.</p>
