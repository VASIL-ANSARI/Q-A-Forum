<blockquote>
<pre><code>singleCategory.forEach(function(catname){
  if(catname == items[i].category)
   itemarr.push(items[i]);
   categories[catname] = itemarr;
});
</code></pre>
</blockquote>

<p>This part code is not correct. <code>catname</code> is "categories" separated by "," and <code>category</code> is original categories. And you keep pushing items in <code>itemarr</code> without clear it, so the result is very odd.</p>

<p>Please check this <a href="https://jsfiddle.net/uwzo6c9y/" rel="nofollow">jsfiddle</a>.</p>
