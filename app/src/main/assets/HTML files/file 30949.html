<p><strong>Version</strong></p>

<p>1.1 is quite old. We use 1.3.2</p>

<p><strong>locally I still want to be using the originals</strong></p>

<p>You should be using <a href="http://maven.apache.org/guides/introduction/introduction-to-profiles.html" rel="nofollow">profiles</a> for this. You should have two profiles (or may be more). </p>

<ul>
<li>One for Development/Local </li>
<li>One for Production/Release/UAT etc (only this will contain the minimize plugin)</li>
</ul>

<p>This is something we implemented and is working very well for a long time:Please try this way(note - see the stuff in the <strong>war plugin</strong> as well, below, it's very important. You might need to change the <strong>targetPath</strong> for the minimized):</p>

<pre><code>&lt;profile&gt;
    &lt;id&gt;Production&lt;/id&gt;
    .......
    .......
 &lt;plugin&gt;
    &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;
    &lt;artifactId&gt;yuicompressor-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.3.2&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;generate-resources&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;compress&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;nosuffix&gt;true&lt;/nosuffix&gt;
        &lt;encoding&gt;UTF-8&lt;/encoding&gt;
        &lt;!-- Show warnings decided on value of variable set in each profile --&gt;
        &lt;jswarn&gt;${yuiCompression.warn}&lt;/jswarn&gt;
        &lt;webappDirectory&gt;${project.build.directory}/minimized&lt;/webappDirectory&gt;
        &lt;excludes&gt;
                &lt;exclude&gt;**/farbtastic/*&lt;/exclude&gt;
                &lt;exclude&gt;**/jquery.js&lt;/exclude&gt;
                &lt;exclude&gt;**/*.css&lt;/exclude&gt;
        &lt;/excludes&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;

&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.3&lt;/version&gt;
    &lt;configuration&gt;
        &lt;argLine&gt;-Xmx1024m&lt;/argLine&gt;
        &lt;dependentWarExcludes&gt;....&lt;/dependentWarExcludes&gt;
        &lt;warSourceExcludes&gt;....&lt;/warSourceExcludes&gt;
        &lt;packagingExcludes&gt;....&lt;/packagingExcludes&gt;
        &lt;packagingExcludes&gt;....&lt;/packagingExcludes&gt;
        &lt;webResources&gt;
            &lt;resource&gt;
                &lt;directory&gt;${project.build.directory}/minimized&lt;/directory&gt;
                &lt;targetPath&gt;/&lt;/targetPath&gt;
            &lt;/resource&gt;
        &lt;/webResources&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>

<p>Let me know if it works.</p>

<p><strong>Issue of wanting file version numbers and having the hrefs update to point at the latest version</strong></p>

<p>I guess by this you mean by versioning for cache control (Basically to make sure always the new js/css is loaded on release?). This plugin doesnt do that. How will your code knows which version to use?</p>

<p>We had implemented this using a custom Tag lib: After that our Js/Css declaration looks like this:</p>

<pre><code>&lt;custom:ScriptTag src="/js/xyz.js"&gt;&lt;/custom:ScriptTag&gt;
&lt;custom:CssTag rel="stylesheet" type="text/css" href="/style/someStyle.css"/&gt;
</code></pre>

<p>And the compiled/rendered jsp looks like this:</p>

<pre><code>&lt;script type='text/javascript' src='/js/4112-13178/xyz.js' &gt;&lt;/script&gt;
&lt;link type='text/css' href='/style/4112-13178/someStyle.css'  rel='stylesheet' /&gt;
</code></pre>

<p><strong>4112-13178</strong> in between is the release-svnversion. </p>

<p>And once this is referenced an url rewrite filter (based on <a href="http://org.tuckey.web.filters.urlrewrite.UrlRewriteFilter" rel="nofollow">Tuckey</a> or Apache mod_rewrite if you use apache in the front) rewrites this to:</p>

<pre><code>&lt;script type='text/javascript' src='/js/xyz.js' &gt;&lt;/script&gt; 
</code></pre>

<p>when requested by the browser to the server.</p>

<p><strong>Solution 2 - versioning (With YUI plugin but Without URLRewrite)</strong></p>

<ul>
<li>You can add the version to the js using the YUI plugin. </li>
<li>Then store the version number in a property file.</li>
<li>Write a custom taglib(like explained above) which renders with that version no as given in the solution above</li>
</ul>

<p>Advantage of this solution is that you don't need an url rewrite, but still would need a custom taglib.</p>
