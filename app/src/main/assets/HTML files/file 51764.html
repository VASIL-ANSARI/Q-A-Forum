<p>I've got the same problem when I try to manipulate tree before drag end. I.e. change leafs order before dragEnd() throw me the same error. But <a href="https://gaearon.github.io/react-dnd/examples-sortable-simple.html" rel="nofollow">plain list</a> works perfectly.
I stop to change tree during DnD (our designer said - it is not good UX:  jumping to mouse pointer subtree).
So my solution: during DnD just change classes for target and source sub-trees (but do not change leafs order), like:</p>

<pre><code>  .source-dnd {
    opacity: 0.2;
  }

  .target-dnd-add {
    border: 1px dotted #aaa;
  }

  .target-dnd-after {
    border-bottom: 1px dotted #aaa;
  }

  .target-dnd-before {
    border-top: 1px dotted #aaa;
  }
</code></pre>

<p>Also don't forget about <a href="http://gaearon.github.io/react-dnd/docs-drop-target.html" rel="nofollow"><code>monitor.isOver({ shallow: true })</code></a></p>
