<p><code>requestAnimationFrame</code> must have a context of <code>window</code> to function properly. </p>

<p>You can rewrite your call as:</p>

<pre><code>game.requestAnimFrame.call(win, game.run);
</code></pre>

<p>and it will function as expected.</p>

<p>The error you were running into is because <code>requestAnimationFrame</code> expects its context (<code>this</code>) to be <code>window</code>, but instead its context was <code>game</code>.</p>

<p><a href="http://jsfiddle.net/ZbhQY/5/" rel="nofollow">http://jsfiddle.net/ZbhQY/5/</a></p>

<p>Alternatively, you could rewrite your <code>requestAnimFrame</code> getter like so:</p>

<pre><code>game.requestAnimFrame = (function() {
        var rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
        function(callback) {
            window.setTimeout(callback, 1000 / 60);
        };

        return function(callback){
            rAF.call(window, callback);
        };            
    })();
</code></pre>

<p>This would allow you to call <code>game.requestAnimFrame(game.run)</code> as you would expect.</p>
