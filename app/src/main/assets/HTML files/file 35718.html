<p>Here you <a href="http://jsbin.com/isuris/406/edit" rel="nofollow"><strong>go</strong></a>.</p>

<p>Just changed the <code>x</code> and <code>y</code> attributes of the legend and it did the work.</p>

<pre><code>var legend = svg.append("g")
  .attr("class", "legend")
  .attr("x", w)
  .attr("height", 50)
  .attr("width", 300)
  .attr("transform", "translate(" + (w - 200) + ", -50)");
</code></pre>

<p>Removed <code>y</code> and used the <code>transform</code> and placed the legend on top right corner.</p>

<pre><code>legend.selectAll('g').data(dataset)
  .enter()
  .append('g')
  .each(function(d, i) {
    var g = d3.select(this);
    g.append("rect")
      .attr("x", i * 60)
      .attr("y", 65)
      .attr("width", 10)
      .attr("height", 10)
      .style("fill", color_hash[String(i)][1]);
</code></pre>

<p>Here I changed the <code>x</code> and <code>y</code> attribute values to get the desired out.</p>

<pre><code>g.append("text")
      .attr("x", i * 60 + 15)
      .attr("y", 73)
      .attr("height",30)
      .attr("width",100)
      .style("fill", color_hash[String(i)][1])
      .text(color_hash[String(i)][0]);
</code></pre>

<p>And finally amended the text with same logic to stay inline with the legend icons.</p>

<p>Hope this helps you.</p>
