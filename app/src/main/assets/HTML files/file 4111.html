<p>Short answer: yes and no.</p>

<p>REXML uses different formatters based on the value you specify for <code>indent</code>. If you leave the default -1, it uses <code>REXML::Formatters::Default</code>. If you give it a value like 4, it uses <code>REXML::Formatters::Pretty</code>. The pretty formatter does have logic in it to wrap lines (though it looks like it wraps at 80, not 166), when dealing with text (not tags or attributes). For example, the contents of</p>

<pre><code>&lt;p&gt; a paragraph tag &lt;/p&gt;
</code></pre>

<p>would be wrapped at 80 characters, but</p>

<pre><code>&lt;a-tag with='a' long='list' of='attributes'/&gt;
</code></pre>

<p>would not be wrapped.</p>

<p>Anyway the 80 is hard-coded in <code>rexml/formatters/pretty.rb</code> and not configurable. And if you use the default formatter with no indent, then it's mostly just a raw dump without added line breaks. You could try the transitive formatter (see docs for <code>Document.write</code>), but it's broken in some version of ruby and might require a code hack. It probably isn't what you want anyway.</p>

<hr>

<p>You might try taking a look at <code>Builder::XmlMarkup</code> from the builder gem.</p>
