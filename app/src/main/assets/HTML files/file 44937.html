<p>In there whereHas function you pass <code>$id</code> variable in the closure but you are using <code>$packet</code> inside.</p>

<pre><code>$kelengkapan = Kelengkapan::with('detilKelengkapan.tDetilKelengkapanPaket')
                            -&gt;whereHas('detilKelengkapan.tDetilKelengkapanPaket', function($q) use ($id){
                                $q-&gt;where('id_paket', $id);
                                //---------------------^
                            })-&gt;get();
</code></pre>

<p>Try it and let me know the result.</p>
