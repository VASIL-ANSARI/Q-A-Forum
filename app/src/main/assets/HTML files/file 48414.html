<p>Your application can easily associate multiple devices with the same <code>userName</code>.
You can do this from your <code>SecurityPolicy</code>, just associate the <code>userName</code> string with a <code>List&lt;ServerSession&gt;</code> or whatever data structure fits better your case.</p>

<p>Your online state for a particular <code>userName</code> is therefore a function of all the <code>ServerSession</code>s of this particular <code>userName</code>.
As such, it's a mapping from the <code>userName</code> to a list of online states.</p>

<p>If you imagine user <code>bob</code> logged in from two browsers, the mapping for its online status can be:</p>

<pre><code>"bob" -&gt; ["afk", "online"]
</code></pre>

<p>To compute the online status for <code>bob</code> you just run through all the online statuses for each <code>ServerSession</code> and if there is at least one <code>online</code> then it's online, if all are <code>afk</code> then it's away from the keyboard, and so on.</p>

<p>You can implement this logic in several ways (e.g. storing the online status as a <code>ServerSession</code> attribute, use a different data structure, cache the per-user online status, etc.), but you get the idea.</p>

<p>Whenever you get an online status change from one <code>ServerSession</code>, you update your server-side data structure, and then recompute the online status from all <code>ServerSession</code>s for that user, and that is what you send to the other users.</p>
