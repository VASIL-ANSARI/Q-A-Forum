<p>You are calling <code>super.onMeasure(width, width);</code> which calls super with some garbage measure specs and it will set a new measured dimensions, overriding yours.</p>

<p>Instead, either don't call super or call super with proper measure specs obtained from <a href="http://developer.android.com/reference/android/view/View.MeasureSpec.html" rel="nofollow">MeasureSpec.makeMeasureSpec</a>.</p>
