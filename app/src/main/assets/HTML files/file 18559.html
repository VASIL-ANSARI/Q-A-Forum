<p>According to 6.3.1 [tr.unord.req] paragraph 12: </p>

<blockquote>
  <p>... The erase members shall invalidate only iterators and references to the erased elements.</p>
</blockquote>

<p>That is, the code above should be OK.</p>
