<p><strong>Fix for your solution:</strong></p>

<pre><code>$my_array = array("PETER"=&gt;"100","LOIS"=&gt;"75","BRIAN"=&gt;"25");
arsort($my_array);

$previous_key = '';
foreach($my_array as $key=&gt;$value)
{
    // Check if first iteration of loop - if it is set the key and skip rest of loop
    if ($previous_key === '')
    {
        $previous_key = $key;
        continue;
    }
    // Same as your solution but sets the second one to be the previous key
    echo strtolower($key) . ".insertAfter(".strtolower($previous_key).");\n";

    // Updates the previous key with the current key
    $previous_key = $key;
}
</code></pre>
