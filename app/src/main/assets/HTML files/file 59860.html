<p>Have you considered using <code>GlobalTrafficShapingHandler</code> and periodically letting it go full throttle to figure out the server max bandwidth and then limiting it to half of that?</p>

<p>I would periodically do the following (on a schedule, maybe 1 second out of every minute)</p>

<ul>
<li>Increase the <code>setReadLimit</code> <code>setWriteLimit</code> to the max you would ever allow</li>
<li>using the <code>GlobalTrafficShapingHandler</code>s <code>TrafficCounter</code> (via <code>public trafficCounter()</code>) to reset the count by calling <code>resetCumulativeTime</code></li>
<li>Make sure the interval of TrafficCounter is shorter or equal to the time you want to sample for. Change this using <code>TrafficCounter.configure(long)</code></li>
<li>Sample the TrafficCounter to get the server maximum bandwidth</li>
<li>Modify the <code>GlobalTrafficShapingHandler</code> to use half of the bandwidth you just calculated</li>
</ul>

<p>I think the above should give you what you want without being too fragile.</p>
