<p>This line will give you the exception too:</p>

<pre><code>if((n==0) &amp;&amp; (str.charAt(0)==str.charAt(n-1)))
</code></pre>

<p>If n==0 then the string is empty, and charAt(0) will fail. Not sure what you're testing here.</p>
