<h3>main.cpp</h3>

<pre><code>#include &lt;QString&gt;
#include &lt;QDebug&gt;
#include &lt;QRegExp&gt;

int main()
{
    QRegExp rx("\\[{2}([^\\]\\|]+)(\\|[^\\]\\|]+)*\\]{2}");
    QString mystr = "[[normal]], here's [[double phrased|brackets]]";

    for (int pos = 0; (pos = rx.indexIn(mystr, pos)) != -1; pos += rx.matchedLength())
        mystr.replace(pos, rx.matchedLength(), rx.cap(1));

    qDebug() &lt;&lt; mystr;

    return 0;
}
</code></pre>

<h3>Compilation</h3>

<p>You may need a slightly different command, but this is here just for reference so that you can adjust for your environment:</p>

<pre><code>g++ -I/usr/include/qt4/QtCore -I/usr/include/qt4 -fPIC -lQtCore main.cpp &amp;&amp; ./a.out
</code></pre>

<h3>Output</h3>

<pre><code>"normal, here's double phrased"
</code></pre>

<p>Note that, with Qt 5, you should probably converge on to <code>QRegularExpression</code> later.</p>

<p>Also, this is a nice example of why it is good to avoid regex in certain scenarios. Writing a replace functionality here would have taken us less time, and the end result would be more readable, and hence maintainable.</p>

<p>Thanks for lancif for the original inspiration.</p>
