<p>What sort of latency can you live with when knowing if the client is disconnected?</p>

<p>You can use the Last Will and Testament feature to publish a value to a topic when the server detects that the MQTT keep alive time has expired with out receiving a ping from the client.</p>

<p>You can set the keep alive time at connection time. But depending on your requirements (battery/network usage) you need to work out what to set it to. If I remember correctly the default is 30 seconds (might be 60)</p>

<p>When your client connects it can set a flag on a persitent topic to say it's online, and the LWT can set this to 0.</p>

<p>e.g.</p>

<p>on connect publish "1" to client/[uniqueid]/online</p>

<p>set the LWT to publish "0" to client/[uniqueid]/online</p>
