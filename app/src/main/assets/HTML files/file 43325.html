<p>By default when you open a stream in C++ it's opened in <em>text mode</em>, which can do things like converting certain character sequences to others (most notably <code>0x0a</code> can become <code>0x0d 0x0a</code> (<code>'\n'</code> to <code>"\r\n"</code>)).</p>

<p>You need to open the stream in <em>binary</em> mode:</p>

<pre><code>std::ofstream sfile(fname, std::ios::out | std::ios::binary);
</code></pre>
