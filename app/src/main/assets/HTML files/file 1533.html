<p>This line:</p>

<pre><code>csv &lt;&lt; @post_csv_order.each {|element| single_post[element]}
</code></pre>

<p>loops over the <code>@post_csv_order</code> array and returns the array itself, which is not what you want. The <code>each</code> and the block don't actually do anything in this context. If you change <code>each</code> to <code>map</code> it will do what you want:</p>

<pre><code>csv &lt;&lt; @post_csv_order.map {|element| single_post[element]}
</code></pre>

<p><code>map</code> returns a new array containing the result of each invocation of the block.</p>
