<p><code>document.querySelector</code> only selects the first element, not all!</p>

<p>Thats why you need <code>document.getElementsByClassName</code></p>

<p><div class="snippet" data-lang="js" data-hide="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>var boxes = document.getElementsByClassName('js-box'),
    colors = ['green', 'blue', 'red'];



for (var i = 0; i &lt; boxes.length; i++)
{
    boxes[i].onclick = function() {
        color = colors.shift();
        colors.push(color);
        
        this.className = 'js-box' + ' ' + color;
    };
}</code></pre>
<pre class="snippet-code-css lang-css prettyprint-override"><code>.js-box {
    width:200px;
    height:200px;
    margin:50px;
    border:thin grey solid;
    display:block;
}
.red {
    background-color:red;
}
.blue {
    background-color:blue;
}
.green {
    background-color:green;
}</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div class="js-box"&gt;&lt;/div&gt;
&lt;div class="js-box"&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>
