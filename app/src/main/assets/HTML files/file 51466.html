<p>You have "Duplicate entry '0'" because you have not autoincrement for <code>ea_appointments.id</code>.</p>

<p>You can add autoincrement for <code>ea_appointments.id</code>.</p>

<p>And after insert you can use id of inserted record with <code>$this-&gt;db-&gt;insert_id()</code> (or for example, with <a href="http://php.net/manual/de/pdo.lastinsertid.php" rel="nofollow">PDO::lastInsertId</a>) for inserting into associated table.</p>
