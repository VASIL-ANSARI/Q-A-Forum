<pre><code>SELECT  *
FROM    customers Ñ
LEFT JOIN
        purchases p
ON      p.id = 
        (
        SELECT  id
        FROM    purchases pl
        WHERE   pl.customer = c.id
        ORDER BY
                pl.customer DESC, pl.date DESC
        LIMIT 1
        )
</code></pre>

<p>Make sure you have a composite index on <code>purchases (customer, date)</code> if your table is <code>InnoDB</code>, or on <code>purchases (customer, date, id)</code> if your table is <code>MyISAM</code>.</p>
