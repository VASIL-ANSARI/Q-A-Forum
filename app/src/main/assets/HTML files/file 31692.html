<p><strong>1) Why do I have to use an inline function to surround my tested function?</strong></p>

<p>You don't. When you write <code>throws(subfunc(), [...])</code>, <code>subfunc()</code> is evaluated first. As <code>subfunc()</code> throws outside the <code>throws</code> function, the test fails immediately. In order to fix it, you have to pass <code>throws</code> a function. <code>function(){subfunc()}</code> works, but so does <code>subfunc</code>:</p>

<pre><code>test("This works", function () {
    throws(subfunc, "Must throw error to pass.");
});
</code></pre>

<p><strong>2) Why does the last test not fail? 'func' does not throw any exception.</strong></p>

<p>For the same reason. <code>func()</code> is evaluated first. As there is no explicit <code>return</code> statement, it returns <code>undefined</code>. Then, <code>throws</code> tries to call <code>undefined</code>. As <code>undefined</code> is not callable, an exception is thrown and the test passes.</p>

<pre><code>test("This doesn't work", function () {
    throws(func, "Must throw error to pass.");
});
</code></pre>
