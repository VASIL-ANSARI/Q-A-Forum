<p>You can convert the columns to category type and then use the <code>codes</code> to create the <code>coo_matrix</code> object:</p>

<pre><code>import numpy as np
import string
import random
import pandas as pd
from scipy import sparse

lowercase = list(string.ascii_lowercase)

students = np.random.choice(lowercase, size=[20, 3]).view("&lt;U3").ravel().tolist()
teachers = np.random.choice(lowercase, 8).tolist()

df = pd.DataFrame({"student": [random.choice(students) for _ in range(30)],
                   "teacher": [random.choice(teachers) for _ in range(30)]})

df = df.apply(lambda s:s.astype("category"))
arr = sparse.coo_matrix((np.ones(df.shape[0]), 
    (df.student.cat.codes, df.teacher.cat.codes)))
</code></pre>

<p>You can get the labels by <code>df.student.cat.categories</code> and <code>df.teacher.cat.categories</code>.</p>
