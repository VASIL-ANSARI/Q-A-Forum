<p>Something like that? (Maybe not, it was hard to understand the question)</p>

<pre><code>int count(std::vector&lt;float&gt; &amp;data) {
  if ( data.empty() ) return -1;
  float maxval = data[0];
  int maxnum = 0;
  for ( std::vector&lt;float&gt;::iterator it = data.begin()+1; it != data.end(); ++it ) {
    if ( equal(*it, maxval) ) {
      maxnum += 1;
    } else if ( *it &gt; maxval ) {
      maxval = *it;
      maxnum = 0;
    }
  }
  return maxnum;
}
</code></pre>

<p>equal(a, b) checks if |a - b| &lt;= epsilon</p>
