<p>I also often hear that putting variables at the top of the function is the best way to do things, but I strongly disagree. I prefer to confine variables to the smallest scope possible so they have less chance to be misused and so I have less stuff filling up my mental space in each line on the program.</p>

<p>While all versions of C allow lexical block scope, where you can declare the variables depends of the version of the C standard that you are targeting:</p>

<h2>C99 onwards or C++</h2>

<p>Modern C compilers such as gcc and clang support the <a href="https://en.wikipedia.org/wiki/C99" rel="nofollow">C99</a> and <a href="https://en.wikipedia.org/wiki/C11_%28C_standard_revision%29" rel="nofollow">C11</a> standards, which allow you to declare a variable anywhere a statement could go. The variable's scope starts from the point of the declaration to the end of the block (next closing brace).</p>

<pre><code>if( x &lt; 10 ){
   printf("%d", 17);  // z is not in scope in this line
   int z = 42;
   printf("%d", z);   // z is in scope in this line
}
</code></pre>

<p>You can also declare variables inside for loop initializers. The variable will only exist only inside the loop.</p>

<pre><code>for(int i=0; i&lt;10; i++){
    printf("%d", i);
}
</code></pre>

<h3>ANSI C (C90)</h3>

<p>If you are targeting the older <a href="https://en.wikipedia.org/wiki/ANSI_C" rel="nofollow">ANSI C</a> standard, which happens to be the most recent one supported by Microsoft's MSVC compiler, then you are limited to declaring variables immediately after an opening brace<sup>1</sup>.</p>

<p>This doesn't mean you have to declare all your variables at the top of your functions though. In C you can put a brace-delimited block anywhere a statement could go (not just after things like <code>if</code> or <code>for</code>) and you can use this to introduce new variable scopes. The following is the ANSI C version of the previous C99 examples:</p>

<pre><code>if( x &lt; 10 ){
   printf("%d", 17);  // z is not in scope in this line

   {
       int z = 42;
       printf("%d", z);   // z is in scope in this line
   }
}

{int i; for(i=0; i&lt;10; i++){
    printf("%d", i);
}}
</code></pre>

<hr>

<p><sup>1</sup> Note that if you are using gcc you need to pass the <code>--pedantic</code> flag to make it actually enforce the C90 standard and complain that the variables are declared in the wrong place. If you just use <code>-std=c90</code> it makes gcc accept a superset of C90 which also allows the more flexible C99 variable declarations.</p>
