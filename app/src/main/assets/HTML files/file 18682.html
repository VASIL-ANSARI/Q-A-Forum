<p>Yes, it's not correct. Should never compile, if it compiles on MSVC - probably it's a bug of compiler. Forward declaration tells compiler, that <code>TheNS::Entity</code> will be class and nothing else (not enum, union, or typedef). Really, your code is same as</p>

<pre><code>class Entity;   
typedef int Entity;
</code></pre>

<p>Of course it's incorrect.</p>

<p>n3337 9.1/2
<Blockquote><P>
A declaration consisting solely of class-key identifier; is either a redeclaration of the name
in the current scope or a forward declaration of the identifier as a class name. It introduces the class name
into the current scope.</P></Blockquote></p>

<p>So, after this</p>

<pre><code>class Entity;
</code></pre>

<p>compiles knows, that <code>Entity</code> will be used as class-name. This name can be redeclared as function (in the same scope), in this case you should use <code>class Entity</code>, when you want to use <code>Entity</code> class (or redeclare <code>Entity</code> name by typedef as says in comments).</p>

<p>7.1.3/6
<Blockquote><P>
In a given scope, a typedef specifier shall not be used to redefine the name of any type declared in that
scope to refer to a different type. [ Example:</p>

<pre><code>class complex { /â ... â/ };
typedef int complex; // error: redifinition
</code></pre>

<p>â end example ]</P></Blockquote></p>
