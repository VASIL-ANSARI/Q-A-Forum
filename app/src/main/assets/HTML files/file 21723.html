<p>When you first create the <code>.click()</code> event the jQuery selector finds all the <code>'#like_button a'</code> elements and attaches this event to them. When you replace the <code>#like_button a</code> element using <code>$(this).replaceWith(...)</code> this new element <strong>does not</strong> have the <code>.click()</code> event attached to it because your original selector only ran once to attach the event (at which time this element did not exist).</p>

<p>In your code the page reloads because you're clicking on a link that simply links back to the current page -- an event which your <code>.click()</code> function prevents with <code>e.preventDefault()</code>. </p>

<p>If you name the function and then reattach <code>.click()</code> event after replacing the object this should function correctly:</p>

<pre><code>$( function() {
    function toggleLike(e)
    {
        var thisrecord = $( this ).closest( "div" );

        var liking_unliking_user_id = parseInt( thisrecord.find( "span#liking_unliking_user_id" ).html() );
        var liked_unliked_user_id = parseInt( thisrecord.find( "span#liked_unliked_user_id" ).html() );
        var like_unlike = thisrecord.find( "#like_unlike" ).html();


        if (like_unlike == 'Like') 
        {
            $( this ).replaceWith( '&lt;a href=""&gt;&lt;span id="like_unlike" class="link"&gt;Unlike&lt;/span&gt;&lt;/a&gt;' );
            var likes = parseInt( thisrecord.find( "span#number_of_likes" ).html() ) + 1;
            thisrecord.find( "span#number_of_likes" ).html( likes );
            $( '#like_button a' ).click(toggleLike); // **frakenstein teh .click() event
            $.post( base_url+"/controller/function/" + liked_unliked_user_id + "/" + liking_unliking_user_id );
        } else {
            $( this ).replaceWith( '&lt;a href=""&gt;&lt;span id="like_unlike" class="link"&gt;Like&lt;/span&gt;&lt;/a&gt;' );
            var likes = parseInt( thisrecord.find( "span#number_of_likes" ).html() ) - 1;
            thisrecord.find( "span#number_of_likes" ).html( likes );
            $( '#like_button a' ).click(toggleLike); // **frakenstein teh .click() event
            $.post( base_url+"/controller/function/" + liked_unliked_user_id + "/" + liking_unliking_user_id );
        }

        e.preventDefault();
    }

    $( '#like_button a' ).click(toggleLike);
});
</code></pre>
