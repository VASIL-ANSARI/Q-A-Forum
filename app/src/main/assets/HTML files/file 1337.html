<p>fgets() can decode UTF-8 encoded files if you use Visual Studio 2005 and up.  Change your code like this:</p>

<pre><code>infile = fopen(inname, "r, ccs=UTF-8");
</code></pre>
