<p>You have to double the percentage signs you do not want to interpolate with argumewnts of the <code>%</code>operator and some things in addition ;-)</p>

<pre><code>sql_query  = "select cj.name job_name , cb.build_result build_result, count(*) total , GROUP_CONCAT(cb.id) id_list from ci_build as cb INNER JOIN ci_job as cj ON cb.job_id = cj.id where cb.build_time &gt; date_format('%s','%%Y%%m%%d') and cb.build_time &lt; date_format('%s','%%Y%%m%%d') GROUP BY cj.name , cb.build_result;" % ('a', 'b')
</code></pre>

<p>will work. Sorry for using the string literals <code>'a', 'b'</code> to test. You should of course enter your variables.</p>

<p>Also note the added closing double quote after the semicolon to end the string (as @MosesKoledoye noted) and when the database receives the filled in string it would be maybe good to add <code>'%%s'</code> to wrap the inserted literal start and end "times" (but not double quotes I think as @sparkandshine) noted, as this will be "More" valid SQL.</p>

<p>As @mhawke notes: <strong>Try to not build a sql query string by injecting stuff from variables</strong>!</p>

<p>One day you control their content and all is well, the next day you refactor the code, and receive the variables "from the outside" and SQL injection is ready to roll - try prepared statements for all complex queries (to offer the DB possibility to optimize already in the PREPARE phase and add layered security automatically by having a better protection in BIND phase rejecting injection attempts at EXECUTE phase time.</p>
