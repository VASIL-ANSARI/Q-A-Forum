<p>Sql aggregation and group by won't really help to do what you want here.  What you would need to do is something along the lines of:</p>

<p>Order your sql result set by item_id in your query.</p>

<p>something like:</p>

<pre><code>select id,
       name,
       value,
       item_id
from ItemDetails
order by item_id
</code></pre>

<p>step through the result set, keeping track of the previous item_id in a temporary variable.  When the current row's item_id doesn't match the previous, then it's time to start a new element of your outer array.</p>

<p>So, something like:</p>

<pre><code>$temp_item_id = -1;
$i = -1;
$result = array();
foreach($statement-&gt;fetchRow() as $row) {
    if ($row['item_id'] !== $temp_item_id) {
        ++$i;
        $result[$i] = array();
    }
    $temp_item_id = $row['item_id'];
    $result[$i][] = array('ItemDetail' =&gt; $row);
}
</code></pre>
