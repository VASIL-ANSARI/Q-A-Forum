<p>I don't think that there is support out of the box for what you want to reach. However, there may be a way to go for. Have a look at <a href="http://guides.rubyonrails.org/routing.html#advanced-constraints" rel="nofollow">"Rails Guides to Routing, Advanced Constraints"</a>. It uses a <a href="http://guides.rubyonrails.org/action_controller_overview.html#the-request-object" rel="nofollow">request object</a> which is not exactly what you want to have, but may be sufficient.</p>

<p>The idea goes like that:</p>

<ul>
<li>Implement a constraint with the necessary methods.</li>
<li>In the method <code>matches?(request)</code>, do what you want to prove.</li>
<li><p>Integrate it by adding the route constraint:</p>

<pre><code>match "*path" =&gt; "login/:action",
  :constraints =&gt; LoginConstraint.new
</code></pre></li>
</ul>

<p>This is the code for the implementation:</p>

<pre><code>class BlacklistConstraint
  def initialize
    ... # necessary initialization here
  end

  def matches?(request)
    ... # Here is your check that returns true or false
  end
end
</code></pre>
