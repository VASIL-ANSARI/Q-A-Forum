<p>find :  <code>(#[a-z]+\\n)|\\n(?!#)</code></p>

<p>and replace with : '\1'</p>

<p>output : <code>bla1;bla2;bla3;\n#endif\nbla4;</code></p>

<p>demo here : <a href="http://regex101.com/r/uO8wH2" rel="nofollow">http://regex101.com/r/uO8wH2</a></p>

<p>This will keep all the <code>\n</code> newline chars which have a preceding word starting with <code>#</code> or are followed by a hash.</p>

<p>HTH</p>
