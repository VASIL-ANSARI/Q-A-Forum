<p>Try this query -</p>

<pre><code>SELECT * FROM License
  LEFT JOIN Customer USING (customer_id)
GROUP BY
  Customer.customer_id
HAVING
  COUNT(*) &gt; 0 AND COUNT(*) = COUNT(IF(License.expiry &gt; NOW(), 1, NULL))
</code></pre>
