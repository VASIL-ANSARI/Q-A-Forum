<p>You need to group the items based on their value attribute. If you are using xslt 1 you can do this using the Muenchian Method which would look something like:</p>

<pre><code>  &lt;xsl:key name="item-value" match="item" use="@value" /&gt;

  &lt;xsl:template match="/RWFCriteria"&gt;

    &lt;data&gt;
      &lt;xsl:for-each select="item[count(. | key('item-value', @value)[1]) = 1]"&gt;
        &lt;release id="{@value}"&gt;
          &lt;xsl:for-each select="key('item-value', @value)"&gt;
            &lt;milestone id="{@id}" /&gt;
          &lt;/xsl:for-each&gt;
        &lt;/release&gt;
      &lt;/xsl:for-each&gt;
    &lt;/data&gt;

  &lt;/xsl:template&gt;
</code></pre>
