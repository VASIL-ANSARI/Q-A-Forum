<p>The problem here is that the :as => :admin flag is not referring to an active_record model, it's just an a arbitrary symbol your defining. Using it means you need to pass as: :admin in the create call like this</p>

<pre><code>Deal.create(params[:deal], as: :admin)
</code></pre>

<p>So your actual problem is probably with your factory, since it doesn't know to pass the flag when it makes your object. Try something like this </p>

<pre><code>factory :deal do
  my_attr "abc"
  initialize_with do
    create(attributes, as: :admin)
  end
end
</code></pre>
