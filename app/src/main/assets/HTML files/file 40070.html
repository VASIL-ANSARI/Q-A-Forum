<p>Starting from this complete <a href="http://stackoverflow.com/a/3420431/230513">example</a>, I've added an <a href="http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html" rel="nofollow"><code>ActionListener</code></a> to each <code>ButtonPanel</code> in the grid. The listener updates the enclosing panel's background color. Note that each button uses its own <em>instance</em> of the same anonymous class. Comment out the timer's <code>start()</code> invocation to see the effect better. As an exercise, try changing class <code>ButtonPanel</code> to a factory method such as <code>createButtonPanel()</code>, as shown <a href="http://stackoverflow.com/a/7706684/230513">here</a> for <code>createGridPanel()</code>.</p>

<pre><code>private static class ButtonPanel extends JPanel {

    public ButtonPanel(int i) {
        this.setBackground(new Color(rnd.nextInt()));
        JButton b = new JButton("Button " + String.valueOf(i));
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JButton b = (JButton) e.getSource();
                ButtonPanel.this.setBackground(new Color(rnd.nextInt()));
            }
        });
        this.add(b);
    }
}
</code></pre>

<p><img src="http://i.stack.imgur.com/puaIA.png" alt="image"></p>
