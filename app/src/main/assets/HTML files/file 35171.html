<p>Defining global variables</p>

<pre><code>var map,
    marker,
    home = new google.maps.LatLng(46.5, 13.5);
</code></pre>

<p>results in error message:</p>

<pre><code>Uncaught TypeError: Cannot read property '__e3_' of undefined      main.js:15
</code></pre>

<p>from line </p>

<pre><code>google.maps.event.addListener(marker, 'click', deleteMarker);
</code></pre>

<p><code>marker</code> is still <code>undefined</code> because it is not created and event listener cannot be attached to it. That line has to be moved to <code>placeMarker()</code> function:</p>

<pre><code>function placeMarker(event) {
    marker = new google.maps.Marker({
        clickable: true,
        position: event.latLng,
        map: map
    });

    google.maps.event.addListener(marker, 'click', deleteMarker);
}
</code></pre>

<p>See <a href="http://jsbin.com/vafar/1/edit" rel="nofollow">example at jsbin</a>.</p>
