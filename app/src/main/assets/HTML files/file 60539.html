<p>First if tables have relation I suggest you to take the data in a single call with join.</p>

<pre><code>SELECT * FROM table_a a
LEFT JOIN tabl_b b ON a.user_name = b.user_name
WHERE a.state = '0'
</code></pre>

<p>Second for speeding up the things you can put INDEX on the two fields that you are using in the WHERE clause - state, user_name</p>

<pre><code>ALTER TABLE `table_a` ADD INDEX `state` (`state`)
ALTER TABLE `tabl_b` ADD INDEX `user_name` (`user_name`)
</code></pre>
