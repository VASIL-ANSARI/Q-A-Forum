<p>You are true that other tests should not depend on this one. For other scenarios, add a <code>Given an user with other models exists</code> step with the following definition:</p>

<pre><code>Given(/^an user with other models exists$/) do
  parent = FactoryGirl.create(:user)
  user = FactoryGirl.create(:user, email: "xyztest@gmail.com" parent_id: parent)
  account = FactoryGirl.create(:account, user_id: user.id)
  FactoryGirl.create(:filter, user_id: user.id, account_id: account.id)
end
</code></pre>

<p>In spec/factories/users.rb (you specify the default attribute values, but you can override them in the <code>FactoryGirl.create()</code> call):</p>

<pre><code>FactoryGirl.define do
  factory :user do
    email "abc@company1.com"
    default_filter_level true
    ar_id true
  end
end
</code></pre>

<p>In spec/factories/filters.rb:</p>

<pre><code>FactoryGirl.define do
  factory :filter do
    abc_id true
  end
end
</code></pre>

<p>In spec/factories/accounts.rb (It's just an empty factory, you can specify the attributes you often need to have assigned.):</p>

<pre><code>FactoryGirl.define do
  factory :account do

  end
end
</code></pre>

<p>Note that in the last step in the scenario, you should not test whether the appropriate models are created:</p>

<pre><code>And appropriate records should get created for the child user for new abc_id
</code></pre>

<p>Instead use something like this:</p>

<pre><code>When I follow "All Child Users"
Then the page should have newly created child user
</code></pre>
