<p>The two XMLs are the same for a DOM. Descendants inherit the namespace definitions until they are redefined.</p>

<p>So the XML serializer should optimize the the XML and keep only the needed namespace definitions. That means ...</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;nfeProc versao="3.10" xmlns="http://www.portalfiscal.inf.br/nfe"&gt;
  &lt;NFe&gt;
  ...
</code></pre>

<p>... is the expected XML document. Here is no reason to have an identical namespace definition on a child element.</p>

<p>Additionally, use <code>createElementNS()</code> - the namespace aware variant of <code>createElement()</code>. This should add the xmlns-attributes automatically as needed.</p>
