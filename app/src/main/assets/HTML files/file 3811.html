<p>It appears that for most computers you do the following:</p>

<p>LookupAccountName("", "ComputerName", ...);
   ConvertSidToStringSid(...)</p>

<p>But for domain controllers you have to add a dollar sign to the computer name parameter, and then delete the last segment in the returned SID.</p>
