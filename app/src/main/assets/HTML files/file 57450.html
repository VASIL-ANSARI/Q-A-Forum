<p>The best way to mock <code>redis-py</code> package is ti use <code>mockredis</code>. You need to simply patch your method using: <code>@patch('redis.StrictRedis', mock_strict_redis_client)</code>. More info can be found on the project <a href="https://github.com/locationlabs/mockredis" rel="nofollow">page</a>.</p>

<p>Once you patched <code>redis</code>, you can setup the value of specific keys required for your application as if you're using <code>redis</code>. This will enable you to control what values should be returned from the various redis calls and will ensure that your application will work properly.</p>

<p>In your specific case, the call for redis that is being done somewhere in your app might be returning the magic mock instead of some serializable <code>json</code>.</p>

<p>You can control the return value of the call by using <code>mock_info.return_value = json_str</code></p>
