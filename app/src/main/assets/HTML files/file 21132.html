<pre><code>const char* foo2()
{
    std::string temp;
    ...
    return temp.c_str();
}
</code></pre>

<p><code>foo2()</code> is unsafe, you are returning a <code>const char*</code> to a local variable which will point to garbage when the function returns.</p>

<p>Just use <code>foo1</code> which is a safe and idiomatic way in C++ to return an object. <a href="http://en.wikipedia.org/wiki/Return_value_optimization" rel="nofollow">NRVO</a> may kick-in 
which will elide the copy of temp  when <code>foo1</code> returns.</p>

<pre><code>std::string foo1()
{
    std::string temp;
    ...
    return temp;
}
</code></pre>
