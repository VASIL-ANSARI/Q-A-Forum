<p><code>if( !curl_setopt($ch, CURLOPT_FILE, $fp) ) return "FAIL: curl_setopt(CURLOPT_FILE)";</code>
tells the library to write the output to a file.
So when you use curl_exec() the file is immediately written.</p>
