<p>I think the easiest way is to define a custom constant in <code>development.rb</code>, <code>production.rb</code>, and <code>staging.rb</code>.</p>

<p>Something like:</p>

<pre><code># development.rb
mailer_host = ActionMailer::Base.default_url_options[:host] = "localhost"
mailer_port = ActionMailer::Base.default_url_options[:port] = 3000
MailerURL = "http://#{mailer_host}:#{mailer_port}"

# production.rb
mailer_host = ActionMailer::Base.default_url_options[:host] = "foo.com"
MailerURL = "http://#{mailer_host}"
</code></pre>

<p>That way you can avoid the conditionals. Just use <code>MailerURL</code> and it will be different depending on the environment</p>
