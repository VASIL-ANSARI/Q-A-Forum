<p>In Python 3.x, you should pass a dictionary that map unicode ordinals to unicode characters. ( <a href="http://docs.python.org/3/library/stdtypes.html#str.translate" rel="nofollow"><code>str.translate</code> documentation</a>)</p>

<pre><code>&gt;&gt;&gt; s = 'abaabbab'
&gt;&gt;&gt; s.translate({ord('a'): 'b', ord('b'): 'a'})
'babbaaba'
</code></pre>

<h2>Why the re.sub code does not work?</h2>

<p>Because a argument passed to substitution function is not a string, but <a href="http://docs.python.org/3/library/re.html#match-objects" rel="nofollow">a match object</a>; Comparing a match object with a string produce <code>False</code> (<code>0</code>); the substitution returns the first item <code>b</code>.</p>

<p>Use <a href="http://docs.python.org/3/library/re.html#re.match.group" rel="nofollow"><code>group</code> method</a> to get a matched string.</p>

<pre><code>&gt;&gt;&gt; s = 'ab'
&gt;&gt;&gt; re.sub('[ab]', lambda x: ['b','a'][x.group() != 'a'], s)
'ba'
&gt;&gt;&gt; re.sub('[ab]', lambda x: ['a', 'b'][x.group() == 'a'], s)
'ba'
&gt;&gt;&gt; re.sub('[ab]', lambda x: 'ab'[x.group() == 'a'], s)
'ba'
</code></pre>
