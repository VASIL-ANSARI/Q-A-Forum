<p>Ended up writing a category which solves this problem using the customization capabilities of libpng. Posted a gist here: <a href="https://gist.github.com/joshcodes/5681512" rel="nofollow">https://gist.github.com/joshcodes/5681512</a></p>

<p>Hopefully this helps someone else who needs to know how this is done. The essential part is creating a method</p>

<pre><code>void user_read_data(png_structp png_ptr, png_bytep data, png_size_t length)
{
    void *nsDataPtr = png_get_io_ptr(png_ptr);
    ReadStream *readStream = (ReadStream*)nsDataPtr;
    memcpy(data, readStream-&gt;source + readStream-&gt;index, length);
    readStream-&gt;index += length;
}
</code></pre>

<p>and using </p>

<pre><code>// init png reading
png_set_read_fn(png_ptr, &amp;readStream, user_read_data);
</code></pre>

<p>as a custom read method.</p>
