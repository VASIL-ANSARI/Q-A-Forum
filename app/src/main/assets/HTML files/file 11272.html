<p>You should try index on (mode, instruction_id), in that order.</p>

<p>The reasoning behind that index is that it creates an index like this</p>

<pre><code>mode  instruction_id
A     1
A     3
A     4
A     5
A     10
A     11
B     2
B     8
B     12
B     13
B     14
C     6
C     7
C     9
C     15
C     16
C     17
</code></pre>

<p>If you search for mode B the sql server can search the index with a binary search on mode until it finds the first B, then it can simply output the next <code>n</code> rows. This would be really fast, about 22 compares for 4M rows.</p>

<p>Always use <code>ORDER BY</code> if you expect the result to be ordered, regardless of how the data is stored. The query engine might choose a query plan that output the rows in a different order than the order of the PK (maybe not in such simple cases as this, but in general).</p>
