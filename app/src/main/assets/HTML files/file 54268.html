<p>What worked for me when I struggled with a similar problem was initializing the logger using:</p>

<pre><code>((org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false)).start(builder.build());
</code></pre>

<p>I haven't tried your approach then though. My issue was that the loggers didn't write anything, and when debugging I found out the configuration I provided using the <code>builder</code> was never actually used since Log4j2 somehow decided it already uses the same configuration and doesn't need to reconfigure.</p>

<p>If the above doesn't help, try debugging to see what happens in both <code>builder.build()</code> and <code>Configurator.initialize()</code>. As far as I recall, my troubles were caused by <code>AbstractLifeCycle.state</code> flag that needed to be in state <code>INITIALIZED</code> but became <code>STARTED</code> too soon.</p>
