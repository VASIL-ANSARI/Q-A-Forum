<pre><code>$_SESSION['uri'] = str_replace('&amp;error=empty', '', $_SESSION['uri']);
</code></pre>

<p>I think you've just missed assigning the return value from <code>str_replace()</code> to your session variable. <code>str_replace()</code> doesn't modify the variable you pass in by parameter directly, it returns a new value, based on the function call.</p>
