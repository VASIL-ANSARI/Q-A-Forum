<p>Pipes that don't lead to the terminal don't have an encoding, therefore you'll need to check <a href="http://docs.python.org/library/stdtypes.html#file.isatty"><code>sys.stdout.isatty()</code></a> and encode if needed.</p>
