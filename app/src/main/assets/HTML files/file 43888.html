<p>The class needs to implement ConnectionInfoListener. And in the function <code>onConnectionInfoAvailable(final WifiP2pInfo info)</code> you can check if a successful connection has been established or not. The <code>info</code> argument of type <code>WifiP2pInfo</code> contains the information about the connection. It contains a boolean called <code>groupFormed</code> which indicates if a p2p group has been successfully formed. You can also retrieve from it if the device is groupOwner and the IP of the groupOwner, etc.   </p>

<pre><code>@Override
    public void onConnectionInfoAvailable(final WifiP2pInfo info) {

        // After the group negotiation, we check if this device 
        // is acting as group owner

        if (info.groupFormed &amp;&amp; !info.isGroupOwner) {

            // Do whatever you want the group owner to do

        } else if (info.groupFormed) {
            // The device now act as the slave device, 
            // and the other connected device is group owner
    }
</code></pre>

<p>Google provides a very good demo app that uses WiFi Direct to send an image between 2 devices. Check its implementation and try to build on top of it. Link: <a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html" rel="nofollow">http://developer.android.com/guide/topics/connectivity/wifip2p.html</a></p>

<p>Hope this helps. Let me know if you have any questions.</p>
