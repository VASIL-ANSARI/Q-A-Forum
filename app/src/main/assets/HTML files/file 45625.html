<p>Anytime you're running multiple queries with MySQLi you should use <a href="http://php.net/manual/en/mysqli.multi-query.php" rel="nofollow"><code>multi_query()</code></a>:</p>

<pre><code>$db-&gt;multi_query($sql)
</code></pre>

<p>In addition, <code>LAST_INSERT_ID()</code> in your second query is not  returning any sort of value. If you're looking for the last inserted value of the 1st query you have to return that prior to running the second query.</p>
