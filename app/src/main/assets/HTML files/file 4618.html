<p>Try break the query into 2, and make use of <a href="http://dev.mysql.com/doc/refman/5.0/en/user-variables.html" rel="nofollow">mysql user defined variables</a></p>

<p>like</p>

<pre><code>$db-&gt;query("SET @counter:=-1");
$db-&gt;query(UPDATE steps SET step_num = @counter:=@counter+1 WHERE goal_ID='689' ORDER BY step_ID");
</code></pre>
