<p>Your are right about the code beeing ran on the context of the page. You can think of it as if you open your browser's console and paste there everything that goes inside evalute function.</p>

<p>If you paste <em>someFunction()</em> into the console, JS runtime will throw an error: <em>someFunction is not defined</em>. That is because it was never defined on the context of the page.</p>

<p>There is actually a workaround for passing a function from outside, but it will only work if the function is not dependent on the other functions and Global objects on the Node's context.</p>

<p>Here is an example:</p>

<pre><code>function someFunction() {
    return document.title;
}

horseman.open('http://google.com')
    .evaluate(function (someFunction) {
        eval('var sf = ' + someFunction);
        return sf();
    }, someFunction.toString())
    .log() //Will print out "Google"
    .close();
</code></pre>

<p>url is actually a node.js module. You can try substitute it with any similar client side JS library, and then inject it with one of the following commands:</p>

<pre><code>horseman
    .injectJs(file)
</code></pre>

<p>or </p>

<pre><code>horseman
    .includeJs(url)
</code></pre>
