<p>I'm not exactly an expert in this, but how about some C++ template metaprogramming.</p>

<p>Consider this for example:</p>

<pre><code>template&lt;class T&gt; struct x {
    static const char a = '\0';
    static const char b = '\0';
};

template&lt;&gt; struct x&lt;int&gt; {
    static const char a = 'd';
    static const char b = '\0';
};

template&lt;&gt; struct x&lt;double&gt; {
    static const char a = 'l';
    static const char b = 'f';
};
</code></pre>

<p>You could use it to create a string like this:</p>

<pre><code>string test;
test = "%" + x&lt;int&gt;::a + x&lt;int&gt;::b + ",";
test += "%" + x&lt;int&gt;::a + x&lt;int&gt;::b + ",";
test += "%" + x&lt;double&gt;::a + x&lt;double&gt;::b;
</code></pre>

<p>You might want to find some better names for a,b and x, and might need to figure out how to extract the types from a <code>boost::tuple</code>. </p>
