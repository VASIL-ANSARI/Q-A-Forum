<p>You don't need directive for this.</p>

<p>If I understand your problem this will probably be enougth :</p>

<p>controller : </p>

<pre><code>$scope.injectVariableAtCursor = function(templateVariable) {
 $scope.user.post = templateVariable;
};
</code></pre>

<p>Here is an example of what you want :</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>var myController = function($scope) {
  var target = null;
  
  $scope.user = { post: "first" };
  
  $scope.handleFocus = function(event) {
    target = event.target;
  };
  
  $scope.handleClick = function(text) {
    var start, end, actual = $scope.user.post;
    
    if(target) {
      start = target.selectionStart;
      end = target.selectionEnd;
    }else{
      start = end = $scope.user.post.length;
    }
    
    
    $scope.user.post = actual.substr(0,start) + text + actual.substr(end, actual.length);
  };
  
};

angular.module('controller', [])
  .controller('myController', myController);</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"&gt;&lt;/script&gt;

&lt;div ng-app="controller"&gt;
  &lt;div ng-controller="myController"&gt;
    &lt;textarea ng-model="user.post" ng-focus="handleFocus($event)"&gt;&lt;/textarea&gt;
    
    &lt;button ng-click="handleClick('bla')"&gt;add bla&lt;/button&gt;
  &lt;/div&gt;
  
&lt;/div&gt;</code></pre>
</div>
</div>
</p>
