<p>In your code:</p>

<pre><code>function ($join,$id) {

}
</code></pre>

<p>Should be:</p>

<pre><code>function ($join) use ($id) {
    $join-&gt;where('profiles.user_id', '=', $id);
}
</code></pre>
