<p>You're assigning the rectangle's attributes to the group (i.e, <code>svg:g</code>) beneath it. In the line below, remove the <code>.append("svg:g")</code> and it should work.</p>

<pre><code>square.enter().append('svg:rect').append("svg:g")
</code></pre>

<p>Also, you're setting opacity to zero:</p>

<pre><code>.attr('opacity', 0)
</code></pre>

<p>This makes your rectangle invisible. Set it to 1 instead for full visibility, or some number in between for a translucent fill effect.</p>
