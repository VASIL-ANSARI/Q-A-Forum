<p>Do you have some particular reason for modifying the kernel code to produce the timestamp? </p>

<p>What kernel version are you on? If it is anything but ancient, I suggest you look at:
<a href="https://www.kernel.org/doc/Documentation/networking/timestamping.txt" rel="nofollow">https://www.kernel.org/doc/Documentation/networking/timestamping.txt</a>
and some nice example code in:
<a href="https://www.kernel.org/doc/Documentation/networking/timestamping/" rel="nofollow">https://www.kernel.org/doc/Documentation/networking/timestamping/</a></p>

<p>I am not at all familiar with RT Linux, so excuse me if I my suggestion is not applicable. </p>
