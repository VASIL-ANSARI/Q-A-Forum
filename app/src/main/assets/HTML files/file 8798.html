<p>I would highly recommend using the <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html" rel="nofollow">java.util.concurrent.Semaphore</a> from the standard library instead of writing a custom Semaphore implementation. Only to mention one reason why this generally is a better idea: <code>notify</code> does not give any FIFO guarantees (from <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#notify%28%29" rel="nofollow">Object.notify()</a>):</p>

<blockquote>
  <p>The choice is arbitrary and occurs at the discretion of the implementation</p>
</blockquote>
