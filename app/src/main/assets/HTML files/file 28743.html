<p>I could be wrong about this but it seems that the code in your else block has a problem. You declare a <code>map_t** currentEntry</code> assigned to <code>head</code> and then write into it. Why do you do that?</p>

<p>As far as I can tell what you really want there is a <code>map_t* currentEntry = *head</code>.</p>
