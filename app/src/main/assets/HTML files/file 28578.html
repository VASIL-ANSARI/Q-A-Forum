<p>I used <code>form_valid(self, form)</code> in views.py to process and manipulate my images. The complete code is a bit long and very specific, but I'll post a few snipplets which should show the idea of how to generate filenames:</p>

<pre><code>def form_valid(self, form):
    upload = self.request.FILES['profilbild_original'] #coming from a very simple form
    self.request.user.student.profilbild_original = upload
    self.request.user.student.save()
    #no renaming was required here, but now I did some work:

    inputfilepath = os.path.join(my_app.settings.MEDIA_ROOT, profilbild_path(self.request.user, str(upload)))
    original = Image.open(inputfilepath) 
    original.thumbnail((200,200), Image.ANTIALIAS)
    filename = str(upload)+'.thumbnail_200_200_aa.jpg'
    filepath = profilbild_path(self.request.user, filename)
    filepath = os.path.join(my_app.settings.MEDIA_ROOT, filepath)
    original.save(filepath, 'JPEG', quality=90)
    self.request.user.student.profilbild = profilbild_path(self.request.user, filename).replace("\\", "/")
    self.request.user.student.save()

    return super(ProfilbildView, self).form_valid(form)  
</code></pre>

<p><code>profilbild_path</code>is a function according  to  <a href="https://docs.djangoproject.com/en/1.3/ref/models/fields/#django.db.models.FileField.upload_to" rel="nofollow">https://docs.djangoproject.com/en/1.3/ref/models/fields/#django.db.models.FileField.upload_to</a> :</p>

<pre><code>def profilbild_path(instance, filename):
    return os.path.join('profilbilder', str(instance.id), filename)
</code></pre>

<p>I hope this gives you some clues.</p>
