<p>Let's see if I got this straight. For f=0.5, 1/f = 2, so you want i to be 1. For any f larger than 0.5, 1/f will be less than 2, so i will be 0, right?</p>

<pre><code>For 0.5&lt;f&lt;=1     i=0
For 0.25&lt;f&lt;0.5   i=1
For 0.125&lt;f&lt;0.25 i=2
and so on.
</code></pre>

<p>So i is basically the zero-based index of the first 1 bit of the mantissa (taking into account the exponent, which should be added to it)</p>
