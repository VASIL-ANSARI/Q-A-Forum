<p>I changed a few things:</p>

<p>First, instead of passing the value of <code>name</code>, I'm passing the <code>tagName</code> of <code>'input'</code> instead.</p>

<pre><code>&lt;input type="checkbox"  onClick="toggle(this, 'input')" /&gt;
</code></pre>

<p>Then in the <code>toggle()</code> function, I select the <code>parentNode</code> of the <code>source</code> element, and do a <code>getElementsByTagName()</code> so that I only get the <code>input</code> elements in the local <code>div</code>.</p>

<p>Also, I changed the <code>for-in</code> loop to a standard <code>for</code> loop, which is the proper type of loop to iterate over indexed elements. The <code>for-in</code> can actually give some problems.</p>

<pre><code>function toggle(source, element) {
    var checkboxes = source.parentNode.getElementsByTagName(element);
    for (var i = 0; i &lt; checkboxes.length; i++) {
        checkboxes[i].checked = source.checked;
    }
}
</code></pre>

<p><strong>Live Example:</strong> <a href="http://jsfiddle.net/37mT2/" rel="nofollow">http://jsfiddle.net/37mT2/</a></p>

<hr>

<p><strong>Alternatives:</strong></p>

<p>Instead of <code>parentNode</code>, select the ancestor <code>&lt;div&gt;</code> element by assigning it an ID, and passing it to your <code>toggle()</code> function.</p>

<pre><code>&lt;input type="checkbox"  onClick="toggle(this, 'input', 'someUniqueId_1')" /&gt;

&lt;input type="checkbox"  onClick="toggle(this, 'input', 'someUniqueId_2')" /&gt;
</code></pre>

<hr>

<pre><code>function toggle(source, element, id) {
    var checkboxes = document.getElementById( id ).getElementsByTagName('input');
    for (var i = 0; i &lt; checkboxes.length; i++) {
        checkboxes[i].checked = source.checked;
    }
}
</code></pre>

<p>Or you could traverse up the parent nodes until you reach your first <code>&lt;div&gt;</code> element:</p>

<pre><code>&lt;input type="checkbox"  onClick="toggle(this, 'input')" /&gt;
</code></pre>

<hr>

<pre><code>function toggle(source, element) {

    while( source &amp;&amp; source = source.parentNode &amp;&amp; source.nodeName.toLowerCase() === 'div' ) {
        ; // do nothing because the logic is all in the expression above
    }
    var checkboxes = source.getElementsByTagName('input');

    for (var i = 0; i &lt; checkboxes.length; i++) {
        checkboxes[i].checked = source.checked;
    }
}
</code></pre>

<p>Or you could give the <code>&lt;div&gt;</code> elements at that level a common class name and traverse up the parent nodes until you reach that class. In the code below, your <code>&lt;div&gt;</code> elements class is "someClassName":</p>

<pre><code>&lt;input type="checkbox"  onClick="toggle(this, 'input')" /&gt;
</code></pre>

<hr>

<pre><code>function toggle(source, element) {

    while( source &amp;&amp; source = source.parentNode &amp;&amp; source.className === 'someClassName' ) {
        ; // do nothing because the logic is all in the expression above
    }
    var checkboxes = source.getElementsByTagName('input');

    for (var i = 0; i &lt; checkboxes.length; i++) {
        checkboxes[i].checked = source.checked;
    }
}
</code></pre>

<hr>

<p><strong>EDIT:</strong> Fixed a typo. I had <code>getElementsById</code> instead of <code>getElementById</code>.</p>
