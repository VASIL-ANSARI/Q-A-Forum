<p>One problem lies with the parameter you pass to the function:</p>

<pre><code>char *string = "foobar";
</code></pre>

<p>This is a static string allocated in the read-only portion. When you try to overwrite it with </p>

<pre><code>*end = *begin;
</code></pre>

<p>you'll get the segfault.</p>

<p>Try with</p>

<pre><code>char string[] = "foobar";
</code></pre>

<p>and you should notice a difference.</p>

<p>The key point is that in the first case the string exists in the read-only segment and just a pointer to it is used while in the second case an array of chars with the proper size is reserved on the stack and the static string (which always exists) is copied into it. After that you're free to modify the content of the array.</p>
