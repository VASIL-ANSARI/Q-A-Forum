<p>In your <code>Espresso</code> tests you should not directly call methods of your <code>Activity</code>. You should use <code>Espresso</code> to interact with the UI like a real user.</p>

<h3>Why <code>runOnUiThread</code> is required:</h3>

<p>When running instrumentation tests (e.g. <code>Espresso</code> tests) there are actually two apps involved. First the app that is being tested and the app that executes the tests. Both use different main threads. </p>

<p>If you call <code>PostsActivity#showErrorMsg</code> from your test, it is running in the testing apps thread. But manipulating views in Android is only allowed from the apps UI Thread. If you really have to call <code>PostsActivity#showErrorMsg</code> from your test, <code>runOnUiThread</code> is the right choice.</p>

<h3>How to improve</h3>

<p>So instead of calling <code>PostsActivity#showErrorMsg</code> directly from your test, use <code>Espresso</code> to <code>click()</code> e.g. on a <code>Button</code> that will call that method for you:</p>

<pre><code>@Test
public void testShouldShowErrorViewOnNetworkError() {
    onView(withId(R.id.post_button)).perform(click());
    onView(withId(R.id.error_view)).check(matches(isDisplayed()));
}
</code></pre>
