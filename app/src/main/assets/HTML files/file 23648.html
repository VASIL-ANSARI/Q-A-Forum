<p>Take a look at the <code>ByteArrayBuffer</code> class:</p>

<pre><code>public final class ByteArrayBuffer  {

  private byte[] buffer;
  private int len;

  public ByteArrayBuffer(int capacity) {
      super();
      if (capacity &lt; 0) {
       throw new IllegalArgumentException("Buffer capacity may not be negative");
      }
</code></pre>

<p>You are initializing it passing it the <code>length</code> value as the buffer's <code>capacity</code> you aquired from:</p>

<pre><code>int length = conn.getContentLength();
</code></pre>

<p>So the problem comes from the <strong>connection length</strong>, which I believe it's -1 since  the content length is not known. The server may  not be setting a "Content-Length" header in the response message.</p>

<p>Take a look at this <a href="http://stackoverflow.com/questions/5428639/url-connection-returning-negative-value">answer</a> for solving this.</p>
