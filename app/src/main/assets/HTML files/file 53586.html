<p>You're calling the <code>/wp-content/themes/mydomain/categories.php</code> file directly, rather than passing it through WordPress. This means the <code>$wpdb</code> object is not available for use.</p>

<p>You can confirm this by loading the <code>categories.php</code> file directly, and putting:</p>

<pre><code>global $wpdb;
print_r($wpdb);
</code></pre>

<p>You won't get the WordPress Database object (unless you include the required files within categories.php directly.</p>

<p>You should be using the built-in WordPress <a href="https://codex.wordpress.org/AJAX_in_Plugins" rel="nofollow">Ajax functions</a> for handling Ajax requests. </p>

<p>There are a lot of tutorials out there that explain how to use Ajax in WordPress:</p>

<ul>
<li><a href="https://premium.wpmudev.org/blog/using-ajax-with-wordpress/" rel="nofollow">https://premium.wpmudev.org/blog/using-ajax-with-wordpress/</a></li>
<li><a href="https://premium.wpmudev.org/blog/how-to-use-ajax-in-wordpress-to-load-search-results/" rel="nofollow">https://premium.wpmudev.org/blog/how-to-use-ajax-in-wordpress-to-load-search-results/</a></li>
<li><a href="https://www.smashingmagazine.com/2011/10/how-to-use-ajax-in-wordpress/" rel="nofollow">https://www.smashingmagazine.com/2011/10/how-to-use-ajax-in-wordpress/</a></li>
</ul>
