<p>Code Correction</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;homadeus/processes/fridge_process.h&gt;
#include &lt;homadeus/devices/78M6610.h&gt;
#include &lt;homadeus/utils/utils.h&gt;

float global_variable;
int current_state = 0; //down =0, up =1
float current_power = 0;
int sample =1;
float mean;


float get_instant_power()
{

    double scaled_value = MAXIM_78M6610_SCALING_RESOLUTION_POWER_WATTS * maxim_78M6610_get_register_int24(MAXIM_78M6610_P);
    return scaled_value;
}

float get_sum()
{   float sum = 0;
    int dummy[10];
        for(int i=1; i&lt;sample ; sample++){
            dummy[i]=get_instant_power();
            sum +=dummy[i];
        }
}

int get_current_state()
{
    current_power = get_instant_power();
    if(current_power &lt; 0) return  0;
    else return 1; 
}

PROCESS(hmd_fridge_process, HOMADEUS_FRIDGE_PROCESS_DESCRIPTION);

PROCESS_THREAD(hmd_fridge_process, ev, data) {
  static struct etimer timer;

  PROCESS_BEGIN();

  while(1){
      start = clock();
      etimer_set(&amp;timer, CLOCK_CONF_SECOND);
      PROCESS_WAIT_EVENT_UNTIL(etimer_expired(&amp;timer));
      ...
    }


  }

  PROCESS_END();
}
</code></pre>
