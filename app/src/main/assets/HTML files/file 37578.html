<p>Based on your answers to my questions in the comments (whether it's possible to add the query to a <em>Ruby</em> function and that you're using <em>ActiveRecord</em> to interact with <em>Postgres</em>), my answer is as follows:</p>

<p>I believe the best bet would be to add your query above to your <em>Ruby</em> code after you do the importing of the <em>CSV</em>.</p>

<p>Regarding your comment question, yes, it is possible to add the query to a <em>Ruby</em> function.</p>

<p>With <em>ActiveRecord</em>, while they discourage raw <em>SQL</em> in general, you should be able to use the <code>connection</code> on your <em>model</em> object to run the query.</p>

<p>So, something like this should work (not tested, as I don't have a <em>Rails</em> setup handy):</p>

<pre><code>query = "SELECT setval('products_id_seq', max(id))
         FROM products"

TheModel.connection.execute(query)
</code></pre>

<p>where <code>TheModel</code> is the name of the model object whose connection you want to use (the one connected to the DB on which you're doing the <em>CSV</em> import).</p>
