<p>Why don't you look on other protocols how they do it?</p>

<p>Eg. IRCClient would be good example I guess - <a href="http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.2.0/twisted/words/protocols/irc.py#L1707" rel="nofollow">http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.2.0/twisted/words/protocols/irc.py#L1707</a></p>
