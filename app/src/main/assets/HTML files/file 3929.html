<p>I think you're doing it the hard way. Have you considered parsing HTML as XML using SimpleXML library? You could do that! Allow me to explain:</p>

<p>Suppose you read your file into a string variable called $html_main, now consider this code:</p>

<pre><code>$dom = new DOMDocument("1.0", "UTF-8");
$dom-&gt;loadHTML($html_main);

$xml = simplexml_import_dom($dom);
</code></pre>

<p>Using XPATH (//html/head) will give you the node, just need to call the function:</p>

<pre><code>$xpathObj = $xml-&gt;xpath('//html/head');
</code></pre>

<p>Then you can manage your HTML code as a collection! I think that if you are planning doing some major parsing, then this might be a better way!</p>
