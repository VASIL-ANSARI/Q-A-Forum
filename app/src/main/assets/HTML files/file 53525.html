<p>In MS library, there is a <a href="http://en.cppreference.com/w/c/chrono/ctime" rel="nofollow"><code>ctime_s</code></a>, which allows for the same "not using a global" feature that <code>ctime_r</code> has in Linux/Unix OS's. You will probably have to wrap it like this:</p>

<pre><code>const char *my_ctime_r(char *buffer, size_t bufsize, time_t cur_time)
{
#if WINDOWS
    errno_t e = ctime_s(buffer, bufsize, cur_time);
    assert(e == 0 &amp;&amp; "Huh? ctime_s returned an error");
    return buffer;
#else 
    const char *res = ctime_r(buffer, cur_time);
    assert(res != NULL &amp;&amp; "ctime_r failed...");
    return res;
#endif
}
</code></pre>
