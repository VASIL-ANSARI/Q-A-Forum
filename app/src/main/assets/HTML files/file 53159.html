<p>Have a look at <a href="http://goo.gl/b7bWy1" rel="nofollow">this project</a> I set up with your code. It works just as expected, your error must lie in some parts of the code you removed to simplify your code example.</p>

<p>And always consider that your static code must be executed. If you call the code above from a static context, some circular dependencies may result in some static variables not being initialized before being called</p>
