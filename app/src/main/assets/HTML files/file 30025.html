<p>Try this</p>

<pre><code>  select a.product_number, a.maxtimestamp, b.product_price
  from    ( SELECT DISTINCT product_number ,MAX(update_timestamp) as maxtimestamp
  FROM product_price
  group by product_number) a
  inner join product_price b on a.product_number = b.product_number 
  and a.maxtimestamp =   b.update_timestamp
  group by maxtimestamp ;
</code></pre>
