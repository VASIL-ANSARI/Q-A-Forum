<p>In your <strong><a href="http://mongodb.github.io/morphia/1.0/guides/aggregation/" rel="nofollow">aggregation framework</a></strong>, create a <strong><a href="http://mongodb.github.io/morphia/1.0/javadoc/org/mongodb/morphia/aggregation/AggregationPipeline.html#project(org.mongodb.morphia.aggregation.Projection...)" rel="nofollow"><code>projection</code></a></strong> pipeline first that does the arithmetic calculations then use the new field in your <strong><a href="http://mongodb.github.io/morphia/1.0/javadoc/org/mongodb/morphia/aggregation/AggregationPipelineImpl.html#group(java.lang.String,%20org.mongodb.morphia.aggregation.Group...)" rel="nofollow"><code>group</code></a></strong> pipeline, something like this:</p>

<pre><code>Iterator&lt;Foo&gt; aggregate = datastore.createAggregation(Foo.class)
       .project(projection("_id").suppress(),
           projection("field1", "_id"),
           projection("field2"), projection("field3"),
           projection("sales", multiply(projection("value"), projection("amount"))))
      .group("field3", grouping("totalSales", sum("sales")));
</code></pre>
