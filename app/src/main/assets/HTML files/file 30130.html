<p>If you want to dynamic allocate the size of shared memory, just declare the shared memory first, and give the size when launching:</p>

<pre><code>extern __shared__ char array[];
__global__ void shared_memory_1(float* result, int shared_size)
{
    float* sh_data = (float*)array; 
    float* sh_data2 = (float*)&amp;sh_data[shared_size]; 
    ...
}
</code></pre>

<p>just like the picture discribed:
<img src="http://i.stack.imgur.com/BTJob.gif" alt="enter image description here"></p>
