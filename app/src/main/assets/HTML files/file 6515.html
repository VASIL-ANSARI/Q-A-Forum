<p>Inside of <code>function1</code> and <code>function2</code> you make a copy of the <code>struct1</code> object that you create in the <code>main()</code> function.  These copies have the same pointer <code>x</code>.  When the destructor for each of these copies is called, <code>gsl_vector_free</code> is called, so you try to call it three times on the same pointer:</p>

<ul>
<li>once in <code>function1</code> when <code>s</code> is destroyed</li>
<li>once in <code>function2</code> when <code>s</code> is destroyed</li>
<li>once in <code>main</code> when <code>s</code> is destroyed</li>
</ul>

<p>You need to implement a copy constructor and copy assignment operator for this class.  Any time you have a class that owns a resource, you need to implement these two functions and a destructor.  A resource is anything that needs to be cleaned up when you are done using it.</p>

<p>In your sample code, it would be far better to encapsulate all of the allocation and deallocation inside of the class so that you can use the class without worrying about it.  Make the class actually manage its resource.</p>
