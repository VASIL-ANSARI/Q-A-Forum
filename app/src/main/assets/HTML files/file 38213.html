<p>The root issue is that you've ended up some using the capybara methods for logging in (visit, click) and so on but the rails integration test methods for the delete request.</p>

<p>Since these two are completely separate, the cookies set by the logging in process aren't used by your delete request. Note that in the page you link to, they do</p>

<pre><code>before { sign_in non_admin, no_capybara: true }
</code></pre>

<p>This causes the <code>sign_in</code> helper to set cookies directly instead of going to the page, filling in the form etc.</p>
