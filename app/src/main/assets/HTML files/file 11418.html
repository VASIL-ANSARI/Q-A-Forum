<p>This should do it for you</p>

<pre><code>var prev = $(this).parent().prevAll("section").attr("id");
</code></pre>

<p>Note that <code>prevAll()</code> appears to return elements ordered by distance from <code>this</code>, so the closest one will be first. And since <code>attr()</code> returns attribute for the first matching element, there is no need to call <code>first()</code> or <code>last()</code> on it. Magic simply happens.</p>
