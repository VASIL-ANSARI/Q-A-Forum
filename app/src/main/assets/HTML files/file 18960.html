<p>Ok, so apart from <code>mysql_*</code> being deprecated, I understand your wanting to <em>know</em> about any possible workaround that might exist. <a href="http://www.suspekt.org/2008/09/18/slides-from-my-lesser-known-security-problems-in-php-applications-talk-at-zendcon/" rel="nofollow">perhaps this blog post</a> and the slides might reveal some of them.<br/>But as <a href="http://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string">this older question</a> here shows, casting and quoting isn't full proof. There's just <em>So many things that can wrong</em>, and Murphy's law, twined with that ever valid mantra <em>"Never trust the network"</em>, will go horribly wrong. </p>

<p>Perhaps <a href="http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string" rel="nofollow">this article</a>, but most importantly, <a href="http://ilia.ws/archives/103-mysql_real_escape_string-versus-Prepared-Statements.html" rel="nofollow">the follow-up to that article</a> can reveal even more security issues. To be honest, I know <code>mysql_real_escape_string</code> isn't fullproof, even in combination with type casting and string formats:</p>

<pre><code>printf('WHERE id = \'%d\'',(int)mysql_real_escape_string($_REQUEST['id']));
</code></pre>

<p>doesn't cover every possible attack. <br/>I'm no expert on this matter, but what I can tell you is sanitizing every input, will, if anything, give you a <em>FALSE</em> sense of security. Most of the time, you'll know (initially) what and why and how you protect against the attacks, but your colleagues might not. They might forget something, and your entire system is compromized. </p>

<p>In summary: Yes, you might be able to prevent <em>any form of malicious input</em> from getting to your DB, but every additional action it requires is an added risk. In that scenario, the greatest liability (as always) is the developer that hasn't had is fourth cup of coffee on a monday morning. No code, no matter how defensive and well thought out, can protect itself from the monster that is a tired developer with a bad temper, going cold turkey on caffeine and nicotine. </p>
