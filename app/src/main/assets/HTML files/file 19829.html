<p>i figured out how to avoid calling register_type on archive. For those who might be interested, it is needed to do template serialization specialization as well as exporting key + implement.</p>

<p>So here is what your .hpp should look like :</p>

<ul>
<li>class declaration (mynamespace::myclass)</li>
<li>class export : <code>BOOST_CLASS_EXPORT_KEY(mynamespace::myclass)</code></li>
</ul>

<p>And in the cpp:</p>

<ul>
<li>class definiton</li>
<li>class export : <code>BOOST_CLASS_EXPORT_IMPLEMENT(mynamespace::myclass)</code></li>
<li>AND : serialize() member specialization on the archive you need to use, for each class :</li>
</ul>

<p><code>template void mynamespace::mypacket::serialize(boost::archive::text_iarchive&amp; arch, const unsigned int version);</code></p>

<p><code>template void mynamespace::mypacket::serialize(boost::archive::text_oarchive&amp; arch, const unsigned int version);</code></p>

<p>Where boost::archive::text_(i/o)archive should be replaced with whatever kind of boost archive you are using.</p>

<p>In hope it will help someone someday (this is clearly written in the <a href="http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/special.html#dlls">boost documentation</a>, but i must have missed it till today...)</p>
