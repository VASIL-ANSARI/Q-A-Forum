<p>Since you supply just a filename to <code>$.ajax</code> instead of an absolute path or URL the browser uses it as a relative URL. Since the URL path of the current page is <code>/validate/foo</code> (never mind that it's set by <code>history.pushState</code>; the browser makes no distinction), it assumes you want to request <code>submit.php</code> relative to that path, which is <code>/validate/submit.php</code>.</p>

<p>You should always use an absolute path or full URL when making requests in the browser, e.g.:</p>

<pre><code>$.ajax({
  url: '/submit.php',
  // ...
});
</code></pre>
