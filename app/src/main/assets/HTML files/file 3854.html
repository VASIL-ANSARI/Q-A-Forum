<p>Rails routes are based solely on URL. If you don't have <code>/pages</code> or <code>/categories</code> or whatever before the name, then how is Rails going to tell if a URL like <code>http://example.com/smartphones</code> is a page URL or category URL? Unless you have some predefined list of pages names in the routes conditions, it cannot.</p>

<p>The only way to do that in this example would be to actually search for a page by <code>smartphones</code> and if none is found assume that this is a category name and search for a category. This can't be done in rails routes. To do that, you'd need a single controller that would handle all those URLs and do that search and then render a proper template (you can't redirect, because that would change the url). And that is an ugly way to solve this problem.</p>

<p>If I were you I'd try to convince the customer to agree on some kind of prefix (like <code>/p_pagename</code>) or preferably different URLs. It could be something like <code>/p/shipping</code> for pages and all other URLs could be routed to <code>CategoriesController</code> or <code>ProductsController</code>.</p>
