<p>The visitor is passed by value, so you need to share the vector it holds with the instance of MyVisitor copied into the function call.</p>

<p>Try this:</p>

<pre><code>class MyVisitor : public boost::default_dfs_visitor {
public:
    MyVisitor(): vv(new std::vector&lt;Vertex&gt;()){}

    void discover_vertex(Vertex v, const Graph&amp; g)  { //note the lack of const
        if(boost::in_degree(v,g)!=0){ //only print the vertices in the connected component (I already did MCC and removed edges so all the extra vertices are isolated)
            std::cerr &lt;&lt; v &lt;&lt; std::endl;
            vv-&gt;push_back(v);
        }
        return;
    }
    std::vector&lt;Vertex&gt;&amp; GetVector() const  { return *vv; }
private: 
    boost::shared_ptr&lt; std::vector&lt;Vertex&gt; &gt; vv;
};
</code></pre>
