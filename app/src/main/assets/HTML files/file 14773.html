<p>There's no reason for the extra <code>ptr</code> here. Using <code>self</code> inside the block would be more correct. The block will retain <code>self</code> in that case. That may cause a retain loop, so it's up to you to remember to set <code>self.selectionBlock = nil</code> at some point before <code>dealloc</code> to break the retain loop.</p>

<p><code>flag</code> may be optimized away here. It's not clear how it could possibly be useful from the above code.</p>

<p>I'm always very nervous about long indirection-chains in a set operation like this one:</p>

<pre><code>self.footer.defaultSelectedItem.selectionBlock = ...
</code></pre>

<p>I would make sure that <code>footer</code>, and the <em>current</em> <code>defaultSelectedItem</code> can't disappear before this runs.</p>

<p>Simplify the problem. Make the block just log "Running block." Then add back things until it crashes.</p>
