<p>The issue is that when <code>__init__</code> is called, <code>li</code> doesn't exist yet.</p>

<p>Basically, what's happening is that as part of <code>__init__</code> you call <code>__setattr__</code> to set <code>li</code>. But, <code>li</code> doesn't exist yet, so you get a keyerror.</p>

<p>What you need to do is check if the attribute exists before you try to add to it.</p>

<pre><code>class testop:
    def __init__(self):
        self.li = [x * 2 for x in list(range(5))]

    def __getitem__(self, index):
        return self.li[index]

    def __setattr__(self, attr, value):
        if attr in self.__dict__:
            self.__dict__[attr] += value
        else:
            pass  # Either create it or throw an exception, whatever you want to do.


if __name__ == '__main__':
    testop().li = 3
</code></pre>
