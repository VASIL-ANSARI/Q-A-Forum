<p>You are returning reference to local array ( output ), which will not work.</p>

<p>Try changing your script to:</p>

<pre><code>from cpython.mem cimport PyMem_Malloc

cdef public double * cyTest(double[] input):
    cdef double * output = &lt; double * &gt;PyMem_Malloc( sizeof(double) * 3 )
    for i in xrange(3):
        output[i] = input[i]**2
        print 'loop: ' + str(output[i])
    return output
</code></pre>

<p>And in your c++ code,</p>

<p>after you done using <code>double* output</code> issue <code>free( output );</code></p>

<p>If you want to use <code>cdef double* results = cyTest(test)</code> in your pyx script then don't forget to use <code>PyMem_Free(results)</code></p>
