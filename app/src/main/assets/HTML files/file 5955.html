<p>Filesize is sent in a <code>Response Header</code>, specifically the <code>Content-Length</code> header. You have to build the entire response either in memory or on disk and calculate its size and send the <code>Content-Length</code> header with this size for the client to know how to calculate a progress indicator. You also with some non-standard browsers ( IE ) have to set the <code>Disposition</code> of the file to get the Download file dialog box to pop up and process the response correctly with a progress indicator.</p>

<p>Try using a browser like Firefox and the 'Live HTTP Headers' extension and 'Firebug' to debug what is actually being sent back.</p>

<p>You don't say what browsers this isn't working in so it may be browsers specific and need additional browsers specific meta-data.</p>
