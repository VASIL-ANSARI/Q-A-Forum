<p>In the <a href="https://code.google.com/p/phpquery/#ITERATE_IT" rel="nofollow">docs for phpQuery</a>, it states that when you loop with <code>foreach</code> a php DOM is returned. This must be passed back to phpQuery useing pq().</p>

<p>Change all occurances of <code>$stuffs</code> to <code>pq($stuffs)</code></p>

<p>Out of curiosity I did the following as I have never used phpQuery before:</p>

<pre><code>&lt;?
require 'phpQuery-onefile.php';
$html = "&lt;table id=\"xp\"&gt;               
        &lt;tbody &gt;
            &lt;tr&gt;
                &lt;td&gt;
                &lt;input type=\"text\" data-type=\"string\" value=\"testvalue\" class=\"text\"&gt;
                &lt;/td&gt;
                &lt;td&gt;
                &lt;input type=\"text\" data-type=\"string\" value=\"\" class=\"text\"&gt;
                &lt;/td&gt;
            &lt;/tr&gt;

        &lt;/tbody&gt;  
&lt;/table&gt;";

$pq = phpQuery::newDocument($html); 
foreach(pq('.text') as $stuffs)
{
  pq($stuffs)-&gt;val('ompalompa');
  echo pq($stuffs)-&gt;val()."&lt;/br&gt;";
}

?&gt;
</code></pre>

<p>The output was:</p>

<pre><code>ompalompa
ompalompa
</code></pre>

<p>If I use:</p>

<pre><code>$stuffs-&gt;val('ompalompa');
</code></pre>

<p>Then</p>

<pre><code>Fatal error: Call to undefined method DOMElement::val() in /var/www/index.php on line 20
</code></pre>
