<p>Don't use Apple's instructions to generate the CSR.</p>

<ol>
<li><p>Generate key:</p>

<pre><code>openssl genrsa -out $app.key 2048
</code></pre></li>
<li><p>Generate CSR:</p>

<pre><code>openssl req -new -key $app.key -out $app.csr
</code></pre>

<p>And enter the relevant data.</p></li>
<li><p>Upload CSR to Apple. Download certificate.</p></li>
<li><p>Convert certificate to PEM:</p>

<pre><code>openssl x509 -inform DER -in $app.cer -out $app.pem
</code></pre></li>
</ol>

<p>Now you have the key in <code>$app.key</code>, and a PEM-encoded certificate in <code>$app.pem</code>. You can then install both on the box that will be connecting to APNS (depending on the software you use, they might be separate files, or you may just append the key to the certificate file).</p>
