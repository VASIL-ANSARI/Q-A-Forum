<p>try this Code . if u have questions about the code just post under it.</p>

<pre><code>&lt;?php
$tel = 1;
$next_div = true;
$foreach_ended = 0;
// 2 New vars they are needed for the right output down

foreach($projectcr1 as $projects1) {
    $projectimages = $projects1['images']; // Get image parameters of the article
    $projectimgs = json_decode($projectimages); // Split the parameters apart

    if($projectimgs-&gt;image_intro != ''){
        $img = 'cms/'.$projectimgs-&gt;image_intro;
    }else{
        $img = 'cms/images/placeholder/placeholder.jpg';
    }

    if (strlen($projects1['introtext']) &gt; 40){
       $shortstrproj = substr($projects1['introtext'], 0, 40) . '...';
    }else{
        $shortstrproj = $projects1['introtext'];
    }

    if($projects1['id'] != '')
    {
        $foreach_ended=0;
        // set to 0 when a DIV is Open.

        if($tel == 1&amp;&amp;$next_div==true){ /* set the first ACTIVE div with $next_div */
            $projecten1 .= '&lt;div class="carousel-item active"&gt;&lt;div class="row"&gt;';
            $next_div=false;  /* set it to false so every new 4xDIV is not Active */
        }
        elseif($tel == 1&amp;&amp;$next_div!=true)
        {
            $projecten1 .= '&lt;div class="carousel-item"&gt;&lt;div class="row"&gt;';
        }else{}

        $projecten1 .= '
            &lt;div class="col-xs-12 col-sm-6 col-lg-3 js-wpg-item" data-categories="'.$projects1['categorie_alias'].'"&gt;
                &lt;a class="card portfolio-grid__card js-wpg-card" href="project/'.$projects1['content_alias'].'.html"&gt;
                    &lt;div class="imgwrapport"&gt;
                        &lt;img width="360" height="180" src="'.$img.'" class="card-img-top  portfolio-grid__card-img" alt="photo1" srcset="'.$img.' 360w, '.$img.' 300w, '.$img.' 768w, '.$img.' 540w, '.$img.' 830w"
                            sizes="(max-width: 360px) 100vw, 360px"&gt;
                    &lt;/div&gt;
                    &lt;div class="card-block portfolio-grid__card-block"&gt;
                        &lt;h5 class="card-title  ortfolio-grid__card-title"&gt;'.$projects1['title'].'&lt;/h5&gt;
                        &lt;p class="portfolio-grid__card-price"&gt;'.strip_tags($shortstrproj).'&lt;/p&gt;
                        &lt;div class="portfolio-grid__card-items"&gt;
                            &lt;p class="portfolio-grid__card-item"&gt;
                                Bekijk project
                            &lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/a&gt;
            &lt;/div&gt;';

        if(($tel % 4) == 0){
            $tel=1; /* reset Tel */
            $projecten1 .= '&lt;/div&gt;&lt;/div&gt;'; /* End DIV when 4x is reached */
            $foreach_ended=1; /* set DIV to closed */
        }
        else
        {
            $tel++;
        }
    }
}
if($foreach_ended==0){$projecten1 .= '&lt;/div&gt;&lt;/div&gt;';} /* when the Foreach enden and the LAST div had less then 4 items its not marked as CLOSED . so this IF closes the last open DIV */
echo $projecten1;
?&gt;
</code></pre>
