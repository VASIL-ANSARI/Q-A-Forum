<p>First, keep in mind that what you put into <code>my.cnf</code> is <em>defaults</em> and will <em>not</em> change any the table definitions for existing tables, nor any characters already stored in those tables.</p>

<p>The defaults for 'database' need to be under <code>[mysqld]</code>.</p>

<p>I ignore database defaults and simply be explicit whenever creating a table:</p>

<pre><code>CREATE TABLE (...) ...
    DEFAULT CHARACTER SET utf8mb4
    DEFAULT COLLATE       utf8mb4_unicode_520_ci;
</code></pre>

<p>That way, I cannot be burned by the kind of mis-configuration you describe.</p>

<p>You can also do </p>

<pre><code>CREATE DATABASE ...
    DEFAULT CHARACTER SET utf8mb4
    DEFAULT COLLATE       utf8mb4_unicode_520_ci;
</code></pre>
