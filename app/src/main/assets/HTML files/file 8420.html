<p>This sounds a bit of a fun one so I'm going to give answering it a try.</p>

<p>I hope this helps you. Let me know how it goes.</p>

<p>So, what you are asking can be done, and here's how:</p>

<p><strong>For Functions:</strong></p>

<ol>
<li>Get all defined functions with <code>$function = get_defined_functions()</code>.</li>
<li>Loop through the <code>$functions['user']</code> key and inspect each one with the <code>ReflectionFunction</code> class. You'll need to get:
<ol>
<li>The comment using <code>-&gt;getDocComment()</code></li>
<li>The arguments using <code>-&gt;getParameters()</code></li>
</ol></li>
<li>Do some magic (I'll let you figure out how to parse the comment using some regular extressions and match it up with the parameter list from the reflection. Don't forget optional parameters!)</li>
<li>Rename the function using <code>runkit_function_rename</code></li>
<li>Generate code in a string that checks the parameters and calls the renamed function</li>
<li>Generate a parameter list as a string</li>
<li>Create a new function with <code>runkit_function_add</code> using the code you generated in step #5 and the parameter list from step #6.</li>
</ol>

<p><strong>For Classes:</strong></p>

<ol>
<li>Get a list of classes with <code>$classes = get_declared_classes();</code></li>
<li>Loop through each one and inspect it with <code>ReflectionObject</code> and <code>-&gt;getMethods()</code> to get the methods. Make sure that the class is not internal with <code>-&gt;isInternal()</code> because we can't do anything about the internal classes.</li>
<li>In an inner loop... go through each method using the <code>ReflectionMethod</code> class. Get the arguments and PHPDoc/JavaDoc comments just like you did with normal functions.</li>
<li>Do the same thing you did with the functions only use <code>runkit_method_add</code> and <code>runkit_method_rename</code> instead.</li>
</ol>

<p><strong>Downsides:</strong></p>

<p>You won't be able to do the checking on internal class methods and functions (which is fine because they won't have doc comments anyway).</p>

<p>This is a lot of work! I left a lot of parts up to your imagination to avoid this being the length of a short book.</p>

<p>Please send me this or open source it and let me know when you finish, I really want to use this myself. Contact info is on my website which is in my profile ;)</p>

<p><strong>Alternatively:</strong></p>

<p>You can use <a href="http://xdebug.org/docs/execution_trace">XDebug's function trace</a> along with reflection then analyze the results after the fact so that you don't have to dynamically edit the code. If you want to write unit-test you could even automate it.</p>

<p>Hope type checking makes it into future versions of PHP and wait: <a href="https://wiki.php.net/rfc/typechecking">https://wiki.php.net/rfc/typechecking</a></p>

<p><strong>Notes:</strong></p>

<p>This class reference has a potentially useful example of parsing docComments in the comments section of the page:
<a href="http://us.php.net/manual/en/class.reflectionmethod.php">http://us.php.net/manual/en/class.reflectionmethod.php</a></p>

<p><strong>References</strong></p>

<ul>
<li><a href="http://www.php.net/manual/en/function.get-defined-functions.php">get_defined_functions</a></li>
<li><a href="http://www.php.net/manual/en/function.get-declared-classes.php">get_declared_classes</a></li>
<li><a href="http://us.php.net/manual/en/class.reflectionfunction.php">ReflectionFunction</a></li>
<li><a href="http://us.php.net/manual/en/class.reflectionobject.php">ReflectionObject</a></li>
<li><a href="http://us.php.net/manual/en/class.reflectionmethod.php">ReflectionMethod</a></li>
<li><a href="http://us2.php.net/manual/en/book.runkit.php">runkit</a></li>
</ul>
