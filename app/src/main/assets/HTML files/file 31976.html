<p>The only possible infinite loop is the do-while.</p>

<pre><code>if(m1==a &amp;&amp; m2==b)
    flag=false;
else
    flag=true;
</code></pre>

<p>You only exit the loop if <code>flag</code> is true. Breakpoint the if statement here and have a look to see why it is never getting set to false. Maybe add some debug print statements as well.</p>
