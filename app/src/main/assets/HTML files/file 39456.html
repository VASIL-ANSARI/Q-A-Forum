<p>In place of the <code>if</code> statement, use</p>

<p><code>rev += std::abs(stren[pos]-stren[c]);</code></p>

<p><code>abs</code> returns the positive difference between two integers. This will be much quicker than an <code>if</code> test and ensuing branching. The <code>(long long)</code> cast is also unnecessary although the compiler will probably optimise that out.</p>

<p>There are other optimisations you could make, but this one should do it. If your <code>abs</code> function is poorly implemented on your system, you <em>could</em> always make use of this fast version for computing the absolute value of <code>i</code>:</p>

<p><code>(i + (i &gt;&gt; 31)) ^ (i &gt;&gt; 31)</code> for a 32 bit <code>int</code>.</p>

<p>This has no branching at all and would beat even an inline ternary! (But you should use <code>int32_t</code> as your data type; if you have 64 bit <code>int</code> then you'll need to adjust my formula.) But we are in the realms of micro-optimisation here.</p>
