<p>This is your query:</p>

<pre><code>SELECT tblprsn.prsnid, tblprsn.name 
FROM tblprsn LEFT OUTER JOIN 
     (SELECT tblrtm.rtmid 
      FROM dbo.getrtmn(tblprsn.prsnid) as getrtmn_1
     ) AS tblgetrtmn 
     ON tblprsn.prsnid = tblgetrtmn.rtmid
</code></pre>

<p>You are referencing the first table in the subquery.  This isn't allowed.  First, I don't think the subquery is necessary.  You are only selecting from the first table and doing a <code>left outer join</code> to keep all the records.  The only affect of the subquery would be to multiply the rows.  So, as you have written it, this query should do pretty much the same thing (except for duplicates):</p>

<pre><code>SELECT tblprsn.prsnid, tblprsn.name 
FROM tblprsn;
</code></pre>

<p>You can do what you want in the original query, though, using <code>apply</code> rather than <code>join</code>:</p>

<pre><code>SELECT tblprsn.prsnid, tblprsn.name 
FROM tblprsn cross apply 
     dbo.getrtmn(tblprsn.prsnid) tblgetrtmn 
where tblprsn.prsnid = tblgetrtmn.rtmid
</code></pre>
