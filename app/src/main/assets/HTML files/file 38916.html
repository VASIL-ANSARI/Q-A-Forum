<p>The wording is a bit difficult to follow but I think this is what it is asking for:</p>

<p><strike></p>

<pre><code>unsigned setbits(unsigned int x, int p, int n, unsigned y){
  return x | ((y&amp;((1&lt;&lt;n)-1))&lt;&lt;(p-n));
}
</code></pre>

<p></strike></p>

<pre><code>unsigned setbits(unsigned int x, int p, int n, unsigned y){
  return (x &amp; ~(((1&lt;&lt;n)-1)&lt;&lt;(p-n))) | ((y&amp;((1&lt;&lt;n)-1))&lt;&lt;(p-n));
}
</code></pre>

<p>breakdown:</p>

<ul>
<li><p>left half of |</p>

<ul>
<li><code>((1&lt;&lt;n)-1)</code> will shift 1 n bits to the left, subtracting 1 makes all bits to the right 1.</li>
<li><code>&lt;&lt;(p-n)</code> shift them left by p-n</li>
<li><code>~</code> invert them leaving those bits as 0s and everything else 1s</li>
<li><code>x &amp;</code> and it to <code>x</code> to turn those bits to 0s.</li>
</ul></li>
<li><p>Right half of |</p>

<ul>
<li><code>((1&lt;&lt;n)-1)</code> same as above</li>
<li><code>y &amp;</code> will mask only those bits</li>
<li><code>&lt;&lt;(p-n)</code> will shift those bits p-n to the left</li>
<li><code>left | right</code> will OR the values together so that:
<ul>
<li>the <code>n</code> bits that begin at position <code>p</code> are set to the rightmost <code>n</code> bits of <code>y</code>, leaving the other bits of <code>x</code> unchanged</li>
</ul></li>
</ul></li>
</ul>
