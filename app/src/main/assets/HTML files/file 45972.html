<p>Below is my solution to finding files matching a certain naming convention in a selected folder and its sub-folders and deleting them. To make it work for your situation. You'll want to place it above the directory that you want to delete, and you'll specify the specific folder by replacing the part where I have <code>./media/catalog/</code>. You'll also want to replace the criteria I have selected, namely <code>(substr($path, -5)=='f.jpg' || substr($path, -5)=='s.jpg')</code>. Note that the 5 in the preceding code refers to how many letters are being matched in the criteria. If you wanted to simply match ".jpg" you would replace the 5 with a 4.</p>

<p><strong>As always, when working with code that can effect a lot of files, be sure to make a backup in case the code doesn't work the way you expect it will.</strong></p>

<pre><code>&lt;?php #stick ClearOldJpg.php above the folder you want to delete
function ClearOldJpg(){
    $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator("./media/catalog/"));
    $files = iterator_to_array($iterator, true);

    // iterate over the directory
    foreach ($files as $path) {
              if( is_file( $path ) &amp;&amp; (substr($path, -5)=='f.jpg' || substr($path, -5)=='s.jpg')){ 
                unlink($path);
                echo "$path deleted&lt;br/&gt;";              
              }
    }
}

    $start = (float) array_sum(explode(' ',microtime()));
    echo "*************** Deleting Selected Files ***************&lt;br/&gt;";
    ClearOldJpg( );

    $end = (float) array_sum(explode(' ',microtime()));
    echo "&lt;br/&gt;------------------- Deleting selected files COMPLETED in:". sprintf("%.4f", ($end-$start))." seconds ------------------&lt;br/&gt;";
    ?&gt;
</code></pre>

<p>One fun bonus of this code is that it will list the files being deleted and tell how long it took to run.</p>
