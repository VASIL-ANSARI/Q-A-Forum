<p>I had the same issue, see the code bellow (it works for me):</p>

<pre><code>    ...
    checkPosition(input_files[file_index].ctx);
    ...

    void checkPosition(AVFormatContext *is) {
        int stream_index = av_find_default_stream_index(is);
        //Convert ts to frame
        tm = av_rescale(tm, is-&gt;streams[stream_index]-&gt;time_base.den, is-                &gt;streams[stream_index]-&gt;time_base.num);
        tm /= 1000;

        //SEEK
        if (avformat_seek_file(is, stream_index, INT64_MIN, tm, INT64_MAX, 0) &lt; 0) {
            av_log(NULL, AV_LOG_ERROR, "ERROR av_seek_frame: %u\n", tm);
        } else {
            av_log(NULL, AV_LOG_ERROR, "SUCCEEDED av_seek_frame: %u newPos:%d\n", tm, is-&gt;pb-&gt;pos);
            avcodec_flush_buffers(is-&gt;streams[stream_index]-&gt;codec);
        }
    }
</code></pre>
