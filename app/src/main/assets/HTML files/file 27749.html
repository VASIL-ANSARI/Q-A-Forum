<p>I have tried to do something similar in the past myself.  Unfortunately, there isn't a good way to go about it because of everything that the TFS Build Workflow requires.  What I found was that there are basically 2 ways to go about it.</p>

<ol>
<li>Create a MSBuild script that will run on both Server and Local</li>
<li>Create a MSBuild script for local and Custom Activity for Server.</li>
</ol>

<p>If you are intent or have a requirement that you be able to reproduce the build exactly on both the developer machine and the build server, then I would opt for #1.  Otherwise I would go with #2.  The second option is nice because then you can play within the TFS workflow for doing the main builds which provides you with many objects that you would need as well as giving you a nice place to configure settings without having to check out/in files to change how the build occurs.  </p>

<p>For either method you would most likely have to modify your Perl scripts to take in parameters to account for any customization you have to do between systems.  Then you can have the user either pass these in or default them in the MSBuild script for local builds and set them up as parameters in the TFS Build Workflow.  Thus they can be easily modified if needed.  Regardless of the method though, the only good way to do it is to standardize on how things need to be setup on the developer machines and the build server so that you don't have to provide the customization as much.</p>

<p>If you do opt for the first option then you can use the Legacy build configuration for TFS build which supports using a MSBuild script for everything and then you can share the script between both developers and the build server but if someone accidentally changes this script then it does run the risk of breaking the build.</p>
