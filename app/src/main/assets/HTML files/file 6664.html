<p>Associative data structures, by design, make it fast to look up a value given a key.  They aren't intended to be efficient for looking up keys by value.</p>

<p>In C++ std::map does not do this efficiently, but boost::bimap does.  I don't know how it works underneath, but logically it could work by creating two maps (key to value and value to key) and making an interface to make it look like they're one.  You could do the same thing.  Since your map appears to be single-valued in one direction and multivalued in the other direction (i.e., no one-to-one correspondence) I doubt there are many prebuilt libraries that do precisely what you want.</p>

<p>Disclaimer: I do not know Ruby.</p>
