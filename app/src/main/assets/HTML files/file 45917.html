<p>you can try this
yourButtonViewObject is the button onwhich you click to show this popupwindow</p>

<pre><code>ListPopupWindow listPopupWindow = new ListPopupWindow(
            ListPopupWindowAppActivity.this);

//here you can set your custom adapter aswell
        listPopupWindow.setAdapter(new ArrayAdapter(
            ListPopupWindowAppActivity.this,
            R.layout.list_item, passyourarrayhere));
        listPopupWindow.setAnchorView(yourButtonViewObject);
        listPopupWindow.setWidth(300);
        listPopupWindow.setHeight(400);

listPopupWindow.setModal(true);
        listPopupWindow.setOnItemClickListener(
            ListPopupWindowAppActivity.this);

//when you click on yourButtonViewObject show listPopupWindow like this
listPopupWindow.show();

//and in onItemClick overiden method do similar as you do in listview
</code></pre>
