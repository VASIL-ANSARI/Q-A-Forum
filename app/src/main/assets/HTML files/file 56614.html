<p>I think your problem is caused by incorrect constant name. Did you tried something like this?</p>

<pre><code>def setBuild
  if Foreman::Model::Vmware.available?
    vm_reconfig_hardware('instance_uuid' =&gt; params[:token], 'hardware_spec' =&gt; {'bootOptions'=&gt;['network', 'disk']})
  end
  self.build = true
  self.save
  errors.empty?
end
</code></pre>

<p>In Foreman source code there is no constant ComputeResources (with s at the end), but when you try to use it in rails console it will work. It is because rails autoloading is kind of creating module on the fly because there is directory with name <code>compute_resources</code>.</p>
