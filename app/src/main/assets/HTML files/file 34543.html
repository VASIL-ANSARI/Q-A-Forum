<p>You would usually deduplicate the data when you receive the <code>NSPersistentStoreDidImportUbiquitousContentChangesNotification</code> notification, and you have merged the changes into your context. After merging, go through the data and dedupe.</p>

<p>Here is a good tutorial on deduping: <a href="http://www.atomicbird.com/blog/icloud-complications-part-2">http://www.atomicbird.com/blog/icloud-complications-part-2</a></p>

<p>Deduplication is one of the poorer design aspects of Core Data + iCloud in my view. Other sync solutions, like <a href="http://wasabisync.com">Wasabi Sync</a> and <a href="http://ensembles.io">Ensembles</a>, allow you to provide global identifiers as an alternative to deduplication. I find it a cleaner solution. (Disclosure: I am the developer of Ensembles.)</p>
