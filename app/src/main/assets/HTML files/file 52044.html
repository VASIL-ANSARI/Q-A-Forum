<p>I've decided that it's too much hassle on the programmer's mind to see what's happening here, so here is much cleaner version of your code.</p>

<pre><code>&lt;?php
$people = pdo_query("SELECT customer, birthday FROM table ORDER BY birthday ASC", array($empty));
if (!empty($people)) {
// Find out people with the same birthday and group them.
$birthdays = [];
foreach ($people as $man) {
    $birthday = $man['birthday'];
        if (empty($birthdays[$birthday])) {
            $birthdays[$birthday] = [];
        }
        $birthdays[$birthday][] = $man['customer'];
    }
// Now let's output everything!
?&gt;
&lt;div&gt;
&lt;?php foreach ($birthdays as $birthday =&gt; $customers): ?&gt;
    &lt;div class=title&gt;&lt;h1&gt;&lt;?= $birthday ?&gt;&lt;/h1&gt;&lt;/div&gt;
    &lt;div class="customer"&gt;
        &lt;?= implode('&lt;br&gt;&lt;hr&gt;', $customers) ?&gt;
    &lt;/div&gt;
&lt;?php endforeach;?&gt;
&lt;/div&gt;
&lt;?php } // endif (!empty($people)) ?&gt;
</code></pre>

<p>Main point of this solution - very simple to understand, uses somewhat templating (you could create one for this little snippet), easy to debug and modify. And yes, it does not output the empty <code>&lt;div&gt;&lt;/div&gt;</code> anymore!</p>
