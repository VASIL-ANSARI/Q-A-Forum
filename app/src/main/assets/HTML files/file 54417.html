<p>You haven't responded to what driver you're using, but it looks like the default rack_test driver has a bug where it incorrectly considers hidden type inputs to be visible.  A fix has been added in the master branch of Capybara.  The selenium driver correctly considers it invisible -- not sure about the other drivers available (capybara-webkit, poltergeist, etc)</p>
