<p>The error is due to wrong argument <code>shapes</code> for function <a href="https://www.tensorflow.org/versions/r0.9/api_docs/python/io_ops.html#batch" rel="nofollow"><code>tf.train.batch</code></a>. The argument <code>shapes</code> should be left to default, or should be:</p>

<blockquote>
  <p>shapes: (Optional) The shapes for each example. Defaults to the inferred shapes for tensor_list</p>
</blockquote>

<p>Here you are giving <code>shapes = [256, 256, 3]</code>, but you should give the shape for <code>pr_image</code> and <code>pr_label</code> in a list:</p>

<pre class="lang-py prettyprint-override"><code>image_batch, label_batch = tf.train.batch(
    [pr_image, pr_label],
    batch_size=batch_size,
    shapes = [[256,256,3], pr_label.get_shape()])
</code></pre>
