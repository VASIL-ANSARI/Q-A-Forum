<p>I'm not sure if I understand your question correctly. Do you try to source a shell script before running another one? In this case the answer is simple:</p>

<pre><code>#!/bin/env ruby
system "source &lt;path_to_source_file&gt; &amp;&amp; &lt;command&gt;"
</code></pre>

<p>If the source file contains variables which your command should use you have to <code>export</code> them. It is also possible to set environment variables within your Ruby script by using <code>ENV['&lt;name_of_var&gt;'] = &lt;value&gt;</code>.</p>

<hr>

<p><em>Update: Jan 26, 2010 - 15:10</em></p>

<p>You can use IO.popen to open a new shell:</p>

<pre><code>IO.popen("/bin/bash", "w") do |shell|
  shell.puts "source &lt;path_to_source_file&gt;"
  shell.puts "&lt;command&gt;"
end
</code></pre>
