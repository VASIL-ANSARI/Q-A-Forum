<p>Why are you using <code>ObjectInputStream</code> at all? You're not reading or writing any serialized objects - just raw binary data. Use whatever <code>InputStream</code> is provided, and read from that.</p>

<p>Anyway, that's not the big problem. The big problem is that you're just writing several files to one stream, with no indication of where one file is meant to finish and the next one is meant to start. How were you expecting to split the multiple files up? Options:</p>

<ul>
<li>Use a delimiter between files (very ugly - you'd have to potentially escape any data which looked like the delimiter as you went along)</li>
<li>Prefix each file with its length</li>
<li>Send each file on a different connection</li>
</ul>

<p>(You're also reading and writing a single byte at a time. Use the overloads of read/write which accept byte arrays.)</p>
