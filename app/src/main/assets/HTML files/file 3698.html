<p>I am the reporter of the gettext ticket you're refering to in your post.
When I submitted the ticket, I had something completely different in mind, something more along those lines:</p>

<pre><code>&lt;?php
  $msg = _(&lt;&lt;&lt;TXT
  He said: "Hello world!".
  TXT
);
?&gt;
</code></pre>

<p>Gettext can not extract text from such heredoc/nowdoc strings, but this could be really useful when translating large pieces of text.</p>

<p>In my case, I use gettext in a CLI PHP script to translate chunks of texts that contain XML markup. That markup is part of the original text and has to be translated too. Having to manually escape each and every quote or apostrophe in the markup makes the messages quite hard to read in POedit or any other editor.</p>

<p>In your case, it seems you'd like interpolated code in (heredoc/nowdoc) strings to be extracted. You can easily workaround this problem by preparing the text before you actually use interpolation:</p>

<pre><code>&lt;?php
$t = _('test');
echo &lt;&lt;&lt;EOD
&lt;h1&gt;$t&lt;/h1&gt;
EOD
?&gt;
</code></pre>

<p>I don't think this should be considered a bug because the exact equivalent to the code you posted using heredoc syntax would be:</p>

<pre><code>&lt;?php
echo "&lt;h1&gt;{$t-&gt;_('test')}&lt;/h1&gt;";
?&gt;
</code></pre>

<p>from which gettext can not extract the "test" message either.</p>
