<p>I'm not sure why you are using <code>re.findall</code> if you're only interested in the first value found.</p>

<p>Nevertheless, your problem is simply the way you index the result: <code>key</code> is a list, and as the error says, you can't use a list as a dict key. But you've put the <code>[0]</code> outside the first set of brackets, so Python interprets this as you wanting to set the first value of <code>routing_table[key]</code>, rather than you wanting to use the first value of <code>key</code> as the thing to set.</p>

<p>What you actually mean is this:</p>

<pre><code>routing_table[key[0]] = [[params], func]
</code></pre>
