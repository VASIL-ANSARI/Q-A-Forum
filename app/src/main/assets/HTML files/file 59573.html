<p>It turned out that compiler wasn't translating decltype correctly. I tried to get deleter immediately after initializing shared_ptr and it worked. However the same decltype in function was generating slightly other type. I checked it in debugger and it generated this results:</p>

<p>In constructor:</p>

<pre><code>std::_Binder&lt;std::_Unforced,grim::impl::TObjectArrayDeleter&lt;APlayer&gt;,std::_Ph&lt;1&gt; const &amp;,unsigned int &amp;&gt; &amp;
</code></pre>

<p>In function:</p>

<pre><code>std::_Binder&lt;std::_Unforced,grim::impl::TObjectArrayDeleter&lt;APlayer&gt;,std::_Ph&lt;1&gt; const &amp;,unsigned int const &amp;&gt; *
</code></pre>

<p>Take a look at the end - it appended additional const. I needed to change it manually, so now my code looks like this:</p>

<pre><code>using D = std::_Binder&lt;std::_Unforced,grim::impl::TObjectArrayDeleter&lt;U&gt;,
                       std::_Ph&lt;1&gt; const &amp;,unsigned int &amp;&gt;;

return ((void*)std::get_deleter&lt;D&gt;(m_shared)) != nullptr;
</code></pre>
