<p>As it's written, yes, you suffer from the asynchronous nature of the <code>GM_xmlhttpRequest()</code> call.  The loop will fire off and start fetching all the pageTitle values, but will immediately continue on, not waiting for the requests to complete, and so pageTitle (which you didn't declare anywhere, by the way) is null when you use it for the textNode.</p>

<p>The first step you need to take to rectify the situation is to move all of the stuff that currently follows the <code>GM_xmlhttpRequest()</code> call to the inside of the <code>onload: function()</code> definition.  Then, only after each page has been retrieved will you continue on with modifying your links. (There may be other issues with needing to pass in or reacquire the <code>thislink</code> value too, I'm not sure.)</p>
